(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{358:function(r,e,t){"use strict";t.r(e);var i=t(10),l=Object(i.a)({},(function(){var r=this,e=r._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h1",{attrs:{id:"redis集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis集群"}},[r._v("#")]),r._v(" "),e("center",[r._v("redis集群")])],1),r._v(" "),e("ul",[e("li",[r._v("修改配置文件，设置成集群配置")]),r._v(" "),e("li",[r._v("启动redis-server（以集群配置启动的redis现在只是单个的集群）")]),r._v(" "),e("li",[r._v("meet + 指派槽位 + 分配主从\nredis-cli --cluster create ip1:port1 ip2:port3 ip3:port3 ip4:port4 ip5:port5 ip6:port6--cluster-replicas num // num 主从比例,注意：集群整合的时候至少需要3个主从节点，只有主机有槽位，从机没有")]),r._v(" "),e("li",[r._v("新增节点\n"),e("ul",[e("li",[r._v("启动新的节点（新的节点也是向上面一样以集群的方式启动）")]),r._v(" "),e("li",[r._v("将新的节点加入集群 redis-cli --cluster add-node newIP:newPort oldIP:oldPort --cluster-slave // newIP:newPort指新启动的节点ip和端口，oldIP:oldPort指原来集群中任一节点的ip和端口，--cluster-slave选填，不写表示以主机方式加入，写了表示以从机方式加入")]),r._v(" "),e("li",[r._v("重新分配槽位 redis-cli --cluster reshard ip:port // ip:port表示集群中任一节点ip和端口，然后会叫分配多少个槽位，再然后叫分配给哪个节点（输入节点id，cluster nodes查看id），再然后叫输入从哪些节点（填写节点id）分配出来，输入all表示其余所有节点平均给出槽位，组成前面要求的槽位数,再然后输入yes完事")])])])])])}),[],!1,null,null,null);e.default=l.exports}}]);