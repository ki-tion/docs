<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>月窗散记</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/docs/imgs/head.jpg">
    <meta name="description" content="闲暇记录学习代码时的点滴历程">
    <meta name="keywords" content="月窗散记,笔记,开发">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d5ec1c5.css" as="style"><link rel="preload" href="/docs/assets/js/app.e9bf7062.js" as="script"><link rel="preload" href="/docs/assets/js/2.21081ec6.js" as="script"><link rel="preload" href="/docs/assets/js/1.d6a5e65b.js" as="script"><link rel="preload" href="/docs/assets/js/71.acb0758d.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.9b4db267.js"><link rel="prefetch" href="/docs/assets/js/100.e311d782.js"><link rel="prefetch" href="/docs/assets/js/101.7499b16d.js"><link rel="prefetch" href="/docs/assets/js/102.f7d7d9fc.js"><link rel="prefetch" href="/docs/assets/js/103.a41cb2e9.js"><link rel="prefetch" href="/docs/assets/js/104.ce259601.js"><link rel="prefetch" href="/docs/assets/js/105.c940ba59.js"><link rel="prefetch" href="/docs/assets/js/106.7c947769.js"><link rel="prefetch" href="/docs/assets/js/107.1a04a9d6.js"><link rel="prefetch" href="/docs/assets/js/108.30de9c83.js"><link rel="prefetch" href="/docs/assets/js/109.22a243b0.js"><link rel="prefetch" href="/docs/assets/js/11.690021fa.js"><link rel="prefetch" href="/docs/assets/js/110.d198aa34.js"><link rel="prefetch" href="/docs/assets/js/111.dcfc4fa5.js"><link rel="prefetch" href="/docs/assets/js/112.865ed45e.js"><link rel="prefetch" href="/docs/assets/js/113.61279f07.js"><link rel="prefetch" href="/docs/assets/js/114.5250c33f.js"><link rel="prefetch" href="/docs/assets/js/115.326839b0.js"><link rel="prefetch" href="/docs/assets/js/116.b1d4cbbb.js"><link rel="prefetch" href="/docs/assets/js/117.1acfbebc.js"><link rel="prefetch" href="/docs/assets/js/118.93f13cdc.js"><link rel="prefetch" href="/docs/assets/js/119.5a980eba.js"><link rel="prefetch" href="/docs/assets/js/12.6fcc671a.js"><link rel="prefetch" href="/docs/assets/js/120.fbd81856.js"><link rel="prefetch" href="/docs/assets/js/121.1b960932.js"><link rel="prefetch" href="/docs/assets/js/122.b29fb009.js"><link rel="prefetch" href="/docs/assets/js/123.63cbd0d2.js"><link rel="prefetch" href="/docs/assets/js/124.3f1d290b.js"><link rel="prefetch" href="/docs/assets/js/125.59469aaf.js"><link rel="prefetch" href="/docs/assets/js/126.b09e4266.js"><link rel="prefetch" href="/docs/assets/js/127.fc7fda67.js"><link rel="prefetch" href="/docs/assets/js/128.01e1c038.js"><link rel="prefetch" href="/docs/assets/js/129.df69bdbf.js"><link rel="prefetch" href="/docs/assets/js/13.c7a0c6d5.js"><link rel="prefetch" href="/docs/assets/js/14.2b8b9240.js"><link rel="prefetch" href="/docs/assets/js/15.20728d29.js"><link rel="prefetch" href="/docs/assets/js/16.5321a22c.js"><link rel="prefetch" href="/docs/assets/js/17.60ed3f63.js"><link rel="prefetch" href="/docs/assets/js/18.cb38b1ad.js"><link rel="prefetch" href="/docs/assets/js/19.b58682e0.js"><link rel="prefetch" href="/docs/assets/js/20.08fed5a8.js"><link rel="prefetch" href="/docs/assets/js/21.b6e62902.js"><link rel="prefetch" href="/docs/assets/js/22.24c69e91.js"><link rel="prefetch" href="/docs/assets/js/23.921f8a74.js"><link rel="prefetch" href="/docs/assets/js/24.f2152ebf.js"><link rel="prefetch" href="/docs/assets/js/25.55cb6df7.js"><link rel="prefetch" href="/docs/assets/js/26.ba83a3fb.js"><link rel="prefetch" href="/docs/assets/js/27.174b1678.js"><link rel="prefetch" href="/docs/assets/js/28.309b00b4.js"><link rel="prefetch" href="/docs/assets/js/29.b35680f8.js"><link rel="prefetch" href="/docs/assets/js/3.04f428b9.js"><link rel="prefetch" href="/docs/assets/js/30.6aaabbcf.js"><link rel="prefetch" href="/docs/assets/js/31.cc5cffb7.js"><link rel="prefetch" href="/docs/assets/js/32.ad41d324.js"><link rel="prefetch" href="/docs/assets/js/33.1140989d.js"><link rel="prefetch" href="/docs/assets/js/34.ff497298.js"><link rel="prefetch" href="/docs/assets/js/35.4d523d75.js"><link rel="prefetch" href="/docs/assets/js/36.1c20b66a.js"><link rel="prefetch" href="/docs/assets/js/37.2da1705f.js"><link rel="prefetch" href="/docs/assets/js/38.0fe1c3f1.js"><link rel="prefetch" href="/docs/assets/js/39.1f6a5c7b.js"><link rel="prefetch" href="/docs/assets/js/4.1ce2464c.js"><link rel="prefetch" href="/docs/assets/js/40.eddd46af.js"><link rel="prefetch" href="/docs/assets/js/41.42a73812.js"><link rel="prefetch" href="/docs/assets/js/42.43955417.js"><link rel="prefetch" href="/docs/assets/js/43.bd3ec667.js"><link rel="prefetch" href="/docs/assets/js/44.62cbaa5b.js"><link rel="prefetch" href="/docs/assets/js/45.233edbc3.js"><link rel="prefetch" href="/docs/assets/js/46.aafdef08.js"><link rel="prefetch" href="/docs/assets/js/47.595fd768.js"><link rel="prefetch" href="/docs/assets/js/48.a6540ad3.js"><link rel="prefetch" href="/docs/assets/js/49.726d0669.js"><link rel="prefetch" href="/docs/assets/js/5.8739eddd.js"><link rel="prefetch" href="/docs/assets/js/50.304f5c8a.js"><link rel="prefetch" href="/docs/assets/js/51.a24e9848.js"><link rel="prefetch" href="/docs/assets/js/52.e2dd0be4.js"><link rel="prefetch" href="/docs/assets/js/53.4f656f8b.js"><link rel="prefetch" href="/docs/assets/js/54.773afa1e.js"><link rel="prefetch" href="/docs/assets/js/55.b4b04462.js"><link rel="prefetch" href="/docs/assets/js/56.36eec085.js"><link rel="prefetch" href="/docs/assets/js/57.157d15a4.js"><link rel="prefetch" href="/docs/assets/js/58.e0c6d305.js"><link rel="prefetch" href="/docs/assets/js/59.33bac785.js"><link rel="prefetch" href="/docs/assets/js/6.05d88696.js"><link rel="prefetch" href="/docs/assets/js/60.fbb2bc1c.js"><link rel="prefetch" href="/docs/assets/js/61.31e6b365.js"><link rel="prefetch" href="/docs/assets/js/62.b21dbcb9.js"><link rel="prefetch" href="/docs/assets/js/63.d300ff10.js"><link rel="prefetch" href="/docs/assets/js/64.69f65722.js"><link rel="prefetch" href="/docs/assets/js/65.8f8d018d.js"><link rel="prefetch" href="/docs/assets/js/66.f335df08.js"><link rel="prefetch" href="/docs/assets/js/67.df717949.js"><link rel="prefetch" href="/docs/assets/js/68.11cf70a1.js"><link rel="prefetch" href="/docs/assets/js/69.cdd6ce02.js"><link rel="prefetch" href="/docs/assets/js/7.97313c33.js"><link rel="prefetch" href="/docs/assets/js/70.166b14ea.js"><link rel="prefetch" href="/docs/assets/js/72.82990d4e.js"><link rel="prefetch" href="/docs/assets/js/73.53ae9974.js"><link rel="prefetch" href="/docs/assets/js/74.81e7b0e1.js"><link rel="prefetch" href="/docs/assets/js/75.a7db37d2.js"><link rel="prefetch" href="/docs/assets/js/76.2734cbb8.js"><link rel="prefetch" href="/docs/assets/js/77.a64ef896.js"><link rel="prefetch" href="/docs/assets/js/78.4c503dcb.js"><link rel="prefetch" href="/docs/assets/js/79.b0b40de1.js"><link rel="prefetch" href="/docs/assets/js/80.608970d9.js"><link rel="prefetch" href="/docs/assets/js/81.537f238c.js"><link rel="prefetch" href="/docs/assets/js/82.9e80b244.js"><link rel="prefetch" href="/docs/assets/js/83.21f21168.js"><link rel="prefetch" href="/docs/assets/js/84.8b2f4ce4.js"><link rel="prefetch" href="/docs/assets/js/85.b52f4b36.js"><link rel="prefetch" href="/docs/assets/js/86.625023d9.js"><link rel="prefetch" href="/docs/assets/js/87.96c0892d.js"><link rel="prefetch" href="/docs/assets/js/88.31271f14.js"><link rel="prefetch" href="/docs/assets/js/89.18d6c9a7.js"><link rel="prefetch" href="/docs/assets/js/90.e8c786af.js"><link rel="prefetch" href="/docs/assets/js/91.9d4e8723.js"><link rel="prefetch" href="/docs/assets/js/92.ae174bc0.js"><link rel="prefetch" href="/docs/assets/js/93.baaf9bc5.js"><link rel="prefetch" href="/docs/assets/js/94.0d885c47.js"><link rel="prefetch" href="/docs/assets/js/95.0d0b9732.js"><link rel="prefetch" href="/docs/assets/js/96.48dfb6f2.js"><link rel="prefetch" href="/docs/assets/js/97.1541b4e2.js"><link rel="prefetch" href="/docs/assets/js/98.728cf299.js"><link rel="prefetch" href="/docs/assets/js/99.791c7aa4.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d5ec1c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/imgs/head.jpg" alt="月窗散记" class="logo"> <span class="site-name can-hide">月窗散记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/wujie.html" class="sidebar-link">wujie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/wujie.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#安装依赖" class="sidebar-link">安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块a" class="sidebar-link">子模块A</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块b" class="sidebar-link">子模块B</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#基座" class="sidebar-link">基座</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/实现Promise.html" class="sidebar-link">实现Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/坐标拾取组件封装.html" class="sidebar-link">坐标拾取组件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/坐标拾取组件封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/高德地图轨迹回放与滑块控制.html" class="sidebar-link">高德地图轨迹回放与滑块控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/高德地图2.0点聚合bug及处理办法.html" class="sidebar-link">高德地图2.0点聚合bug及处理办法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#解决思路" class="sidebar-link">解决思路</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/SharedWorker.html" class="sidebar-link">SharedWorker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#备注" class="sidebar-link">备注</a></li></ul></li><li><a href="/docs/分时函数.html" class="sidebar-link">分时函数</a></li><li><a href="/docs/大文件分片上传.html" class="sidebar-link">大文件分片上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#启动" class="sidebar-link">启动</a></li></ul></li><li><a href="/docs/sse.html" class="sidebar-link">SSE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sse.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/PWA.html" class="sidebar-link">PWA</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-manifest-json" class="sidebar-link">配置 manifest.json</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化样式" class="sidebar-link">初始化样式</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化测试数据" class="sidebar-link">初始化测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-index-html" class="sidebar-link">配置 index.html</a></li></ul></li><li><a href="/docs/请求工具函数封装.html" class="sidebar-link">请求工具函数封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/请求工具函数封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/访问器处理双向影响数据.html" class="sidebar-link">访问器处理双向影响数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/访问器处理双向影响数据.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/自定义日期组件.html" class="sidebar-link">自定义日期组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/http缓存.html" class="sidebar-link">http缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/http缓存.html#强缓存" class="sidebar-link">强缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#协商缓存" class="sidebar-link">协商缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/深拷贝、防抖和节流.html" class="sidebar-link">深拷贝、防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#深拷贝" class="sidebar-link">深拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#防抖" class="sidebar-link">防抖</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#节流" class="sidebar-link">节流</a></li></ul></li><li><a href="/docs/pdf.js+带线条标注.html" class="sidebar-link">pdf.js+带线条标注</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/动态表单设计方案.html" class="sidebar-link">动态表单设计方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/cadvisor+prometheus+grafana监控容器.html" class="sidebar-link">cadvisor+prometheus+grafana监控容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/VScode实现远程免密登录.html" class="sidebar-link">VScode实现远程免密登录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#客户端生成公钥-若没有" class="sidebar-link">客户端生成公钥(若没有)</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#将客户端的公钥放到服务器" class="sidebar-link">将客户端的公钥放到服务器</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#配置权限" class="sidebar-link">配置权限</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/docs/vue3单元测试.html" class="sidebar-link">vue3单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#初始化项目" class="sidebar-link">初始化项目</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试函数" class="sidebar-link">测试函数</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试vue组件" class="sidebar-link">测试vue组件</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#交互测试-事件测试" class="sidebar-link">交互测试&amp;事件测试</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#请求-注入" class="sidebar-link">请求&amp;注入</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/THREE.js渲染地图.html" class="sidebar-link">THREE.js渲染地图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#效果演示" class="sidebar-link">效果演示</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#前置说明" class="sidebar-link">前置说明</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#定义类型" class="sidebar-link">定义类型</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/使用视口尺寸和计算属性做响应式开发.html" class="sidebar-link">使用视口尺寸和计算属性做响应式开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用视口尺寸和计算属性做响应式开发.html#定义等分大小" class="sidebar-link">定义等分大小</a></li></ul></li><li><a href="/docs/使用indexDB缓存THREE.js模型.html" class="sidebar-link">使用indexDB缓存THREE.js模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#封装indexdb" class="sidebar-link">封装indexDB</a></li><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#调用" class="sidebar-link">调用</a></li></ul></li><li><a href="/docs/THREE笔记.html" class="sidebar-link">THREE笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#纹理" class="sidebar-link">纹理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#_3d字体" class="sidebar-link">3D字体</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#光源辅助" class="sidebar-link">光源辅助</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#阴影" class="sidebar-link">阴影</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#raycaster射线拾取" class="sidebar-link">Raycaster射线拾取</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#模型加载" class="sidebar-link">模型加载</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#blender" class="sidebar-link">blender</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#图像优化" class="sidebar-link">图像优化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#顶点着色器" class="sidebar-link">顶点着色器</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#three钩子" class="sidebar-link">THREE钩子</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#后期处理" class="sidebar-link">后期处理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#性能调优" class="sidebar-link">性能调优</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#向量" class="sidebar-link">向量</a></li></ul></li><li><a href="/docs/vue3响应式与组件渲染.html" class="sidebar-link">vue3响应式与组件渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#初始化环境" class="sidebar-link">初始化环境</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#工具库函数编写" class="sidebar-link">工具库函数编写</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#依赖收集与触发" class="sidebar-link">依赖收集与触发</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#reactive和computed" class="sidebar-link">reactive和computed</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#组件渲染" class="sidebar-link">组件渲染</a></li></ul></li><li><a href="/docs/前端渲染大量数据方案.html" class="sidebar-link">前端渲染大量数据方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#效果演示" class="sidebar-link">效果演示</a></li></ul></li><li><a href="/docs/yapi.html" class="sidebar-link">yapi</a></li><li><a href="/docs/递归转while.html" class="sidebar-link">递归转while</a></li><li><a href="/docs/实现promise.all方法.html" class="sidebar-link">实现promise.all方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/vue3+tsx+keepAlive.html" class="sidebar-link">vue3+tsx+keepAlive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#路由定义" class="sidebar-link">路由定义</a></li><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#组件keep-alive" class="sidebar-link">组件keep-alive</a></li></ul></li><li><a href="/docs/Vue3+Electron.html" class="sidebar-link">Vue3+Electron</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#打包" class="sidebar-link">打包</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#报错" class="sidebar-link">报错</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#处理preload" class="sidebar-link">处理preload</a></li></ul></li><li><a href="/docs/ts重新设置类型.html" class="sidebar-link">ts重新设置类型</a></li><li><a href="/docs/ts指定key类型和其余任意key类型.html" class="sidebar-link">ts指定key类型和其余任意key类型</a></li><li><a href="/docs/ts将可选字段转化为必填字段.html" class="sidebar-link">ts将可选字段转化为必填字段</a></li><li><a href="/docs/ts定义必填属性，其余必须以指定开头为key.html" class="sidebar-link">ts定义必填属性，其余必须以指定开头为key</a></li><li><a href="/docs/skywalking.html" class="sidebar-link">skywalking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/skywalking.html#创建挂载卷" class="sidebar-link">创建挂载卷</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#编写docker-compose-yml" class="sidebar-link">编写docker-compose.yml</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#nodejs使用" class="sidebar-link">nodejs使用</a></li></ul></li><li><a href="/docs/sass.html" class="sidebar-link">sass</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sass.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#嵌套" class="sidebar-link">嵌套</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#混入" class="sidebar-link">混入</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#interpolation" class="sidebar-link">Interpolation</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#if-else" class="sidebar-link">@if @else</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#for" class="sidebar-link">@for</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#each" class="sidebar-link">@each</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#while" class="sidebar-link">@while</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#function" class="sidebar-link">@function</a></li></ul></li><li><a href="/docs/rollup简要笔记.html" class="sidebar-link">rollup简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改tsconfig-json" class="sidebar-link">修改tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写src-index-ts" class="sidebar-link">编写src/index.ts</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写rollup-config-js" class="sidebar-link">编写rollup.config.js</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改package-json" class="sidebar-link">修改package.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#打包" class="sidebar-link">打包</a></li></ul></li><li><a href="/docs/redis主从.html" class="sidebar-link">redis主从</a></li><li><a href="/docs/redis集群.html" class="sidebar-link">redis集群</a></li><li><a href="/docs/react+react-router-dom+redux.html" class="sidebar-link">react+react-router-dom+redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#导出具有ref的组件" class="sidebar-link">导出具有ref的组件</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#antd" class="sidebar-link">antd</a></li></ul></li><li><a href="/docs/react-navtive.html" aria-current="page" class="active sidebar-link">react-navtive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#版本信息" class="sidebar-link">版本信息</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#环境安装参考" class="sidebar-link">环境安装参考</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装jdk" class="sidebar-link">安装jdk</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#配置环境变量" class="sidebar-link">配置环境变量</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装-android-studio" class="sidebar-link">安装 Android Studio</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#小技巧" class="sidebar-link">小技巧</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#真机调试" class="sidebar-link">真机调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#错误处理" class="sidebar-link">错误处理</a></li></ul></li><li><a href="/docs/prometheus-docker.html" class="sidebar-link">prometheus-docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#prometheus主机-192-168-2-200" class="sidebar-link">prometheus主机（192.168.2.200）：</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#被监控主机-192-168-2-201" class="sidebar-link">被监控主机（192.168.2.201）:</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#使用" class="sidebar-link">使用</a></li></ul></li><li><a href="/docs/onlyoffice.html" class="sidebar-link">onlyoffice</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#部署-onlyoffice" class="sidebar-link">部署 onlyoffice</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/nuxt3笔记.html" class="sidebar-link">nuxt3笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#布局系统" class="sidebar-link">布局系统</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求" class="sidebar-link">请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#动态请求" class="sidebar-link">动态请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求代理" class="sidebar-link">请求代理</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#服务端中间件" class="sidebar-link">服务端中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#状态管理-组合逻辑" class="sidebar-link">状态管理(组合逻辑)</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#sass" class="sidebar-link">sass</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#环境判断" class="sidebar-link">环境判断</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#全局css注入" class="sidebar-link">全局css注入</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#使用阿里图标库" class="sidebar-link">使用阿里图标库</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#配置路径别名" class="sidebar-link">配置路径别名</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#pinia使用" class="sidebar-link">pinia使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#自定义指令" class="sidebar-link">自定义指令</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#装饰器的使用" class="sidebar-link">装饰器的使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#seo" class="sidebar-link">seo</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#客户端特定渲染" class="sidebar-link">客户端特定渲染</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#打包部署" class="sidebar-link">打包部署</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#其他问题" class="sidebar-link">其他问题</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#追加" class="sidebar-link">追加</a></li></ul></li><li><a href="/docs/nuxt3.html" class="sidebar-link">nuxt3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#动态路由" class="sidebar-link">动态路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#_404页面" class="sidebar-link">404页面</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#layout" class="sidebar-link">layout</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组合逻辑" class="sidebar-link">组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#三方插件pinia代替组合逻辑" class="sidebar-link">三方插件pinia代替组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#全局样式" class="sidebar-link">全局样式</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#其他" class="sidebar-link">其他</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#未解决的问题" class="sidebar-link">未解决的问题</a></li></ul></li><li><a href="/docs/nginx简要笔记.html" class="sidebar-link">nginx简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#root" class="sidebar-link">root</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#路径匹配" class="sidebar-link">路径匹配</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#proxy-pass" class="sidebar-link">proxy_pass</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#http升级https" class="sidebar-link">http升级https</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#跨域代理" class="sidebar-link">跨域代理</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#gzip压缩" class="sidebar-link">gzip压缩</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#完整示例" class="sidebar-link">完整示例</a></li></ul></li><li><a href="/docs/Nginx.html" class="sidebar-link">Nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Nginx.html#中间件架构" class="sidebar-link">中间件架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器架构" class="sidebar-link">代理服务器架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的安装和使用" class="sidebar-link">Nginx的安装和使用</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的请求限制配置" class="sidebar-link">Nginx的请求限制配置</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的web静态资源服务" class="sidebar-link">Nginx的Web静态资源服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器" class="sidebar-link">代理服务器</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx代理服务" class="sidebar-link">Nginx代理服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#负载均衡调度slb" class="sidebar-link">负载均衡调度SLB</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#动态缓存" class="sidebar-link">动态缓存</a></li></ul></li><li><a href="/docs/nexus3.html" class="sidebar-link">nexus3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nexus3.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#npm" class="sidebar-link">npm</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#docker" class="sidebar-link">docker</a></li></ul></li><li><a href="/docs/nest-GRPC.html" class="sidebar-link">nest-GRPC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-a" class="sidebar-link">nest-a</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-b" class="sidebar-link">nest-b</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#验收" class="sidebar-link">验收</a></li></ul></li><li><a href="/docs/mysql8&amp;json.html" class="sidebar-link">mysql8&amp;json</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#部署mysql8" class="sidebar-link">部署mysql8</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#结合nestjs" class="sidebar-link">结合nestjs</a></li></ul></li><li><a href="/docs/nestjs单元测试.html" class="sidebar-link">nestjs单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#前置代码" class="sidebar-link">前置代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#测试代码" class="sidebar-link">测试代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#修改package-json配置" class="sidebar-link">修改package.json配置</a></li></ul></li><li><a href="/docs/nestjs+typeorm定时建表，动态查询表.html" class="sidebar-link">nestjs+typeorm定时建表，动态查询表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定义实体" class="sidebar-link">定义实体</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定时创建表" class="sidebar-link">定时创建表</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#动态查询表" class="sidebar-link">动态查询表</a></li></ul></li><li><a href="/docs/nest.html" class="sidebar-link">nest</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest.html#项目生成" class="sidebar-link">项目生成</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#依赖安装" class="sidebar-link">依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#过滤器" class="sidebar-link">过滤器</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#守卫-权限验证" class="sidebar-link">守卫（权限验证）</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#集成安装过滤器、守卫、api文档和安全设置" class="sidebar-link">集成安装过滤器、守卫、api文档和安全设置</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#数据库" class="sidebar-link">数据库</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#测试案例" class="sidebar-link">测试案例</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件和子模块加入" class="sidebar-link">中间件和子模块加入</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#文件操作" class="sidebar-link">文件操作</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#定时任务" class="sidebar-link">定时任务</a></li></ul></li><li><a href="/docs/mysql.html" class="sidebar-link">mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql.html#使用docker安装mysql" class="sidebar-link">使用docker安装mysql</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#创建测试数据库并生成测试数据" class="sidebar-link">创建测试数据库并生成测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#基础查询" class="sidebar-link">基础查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见内置函数" class="sidebar-link">常见内置函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#连接查询-多表查询" class="sidebar-link">连接查询(多表查询)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#查询关键字执行顺序" class="sidebar-link">查询关键字执行顺序</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#插入" class="sidebar-link">插入</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#修改" class="sidebar-link">修改</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#库的管理" class="sidebar-link">库的管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#表达管理" class="sidebar-link">表达管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见数据类型" class="sidebar-link">常见数据类型</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见约束" class="sidebar-link">常见约束</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#视图-用的少" class="sidebar-link">视图(用的少)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#锁" class="sidebar-link">锁</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#存储过程和函数" class="sidebar-link">存储过程和函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#循环" class="sidebar-link">循环</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#递归查询" class="sidebar-link">递归查询</a></li></ul></li><li><a href="/docs/MinIO.html" class="sidebar-link">MinIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/MinIO.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/MinIO.html#在nestjs中使用" class="sidebar-link">在nestjs中使用</a></li></ul></li><li><a href="/docs/mariadb主从.html" class="sidebar-link">mariadb主从</a></li><li><a href="/docs/lodash源码阅读-cloneDeep.html" class="sidebar-link">lodash源码阅读-cloneDeep</a></li><li><a href="/docs/kafka-nestjs.html" class="sidebar-link">kafka-nestjs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#kafka基础概念" class="sidebar-link">kafka基础概念</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#部署-3个节点" class="sidebar-link">部署(3个节点)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#结合nestjs-使用kafkajs" class="sidebar-link">结合nestjs(使用kafkajs)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/js通过字符串拿到对象属性.html" class="sidebar-link">js通过字符串拿到对象属性</a></li><li><a href="/docs/js判断对象是否存在某个属性.html" class="sidebar-link">js判断对象是否存在某个属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#直接判断是否等于undefined" class="sidebar-link">直接判断是否等于undefined</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#object-keys" class="sidebar-link">Object.keys</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#hasownproperty" class="sidebar-link">hasOwnProperty</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#in" class="sidebar-link">in</a></li></ul></li><li><a href="/docs/实现new.html" class="sidebar-link">实现new</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现new.html#new的过程发生了什么" class="sidebar-link">new的过程发生了什么</a></li><li class="sidebar-sub-header"><a href="/docs/实现new.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/gsap.html" class="sidebar-link">gsap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gsap.html#to" class="sidebar-link">to</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#from" class="sidebar-link">from</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#timeline" class="sidebar-link">timeline</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#ticker" class="sidebar-link">ticker</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#exportroot" class="sidebar-link">exportRoot</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#getproperty" class="sidebar-link">getProperty</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#gettweensof" class="sidebar-link">getTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#istweening" class="sidebar-link">isTweening</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#killtweensof" class="sidebar-link">killTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmedia" class="sidebar-link">matchMedia</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmediarefresh" class="sidebar-link">matchMediaRefresh</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#random" class="sidebar-link">random</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#flip" class="sidebar-link">Flip</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#draggable" class="sidebar-link">Draggable</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#motionpathplugin" class="sidebar-link">MotionPathPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#observer" class="sidebar-link">Observer</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltoplugin" class="sidebar-link">ScrollToPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#textplugin" class="sidebar-link">TextPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltrigger" class="sidebar-link">scrollTrigger</a></li></ul></li><li><a href="/docs/graphgl(nest).html" class="sidebar-link">graphgl(nest)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#nest项目生成-依赖安装" class="sidebar-link">nest项目生成&amp;&amp;依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#schema" class="sidebar-link">schema</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#database" class="sidebar-link">database</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#resolver" class="sidebar-link">resolver</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#访问" class="sidebar-link">访问</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#参数" class="sidebar-link">参数</a></li></ul></li><li><a href="/docs/gitlab(docker)+git免密+CICD.html" class="sidebar-link">gitlab(docker)+git免密+CICD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab" class="sidebar-link">安装gitlab</a></li><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab-runner-ci-cd" class="sidebar-link">安装gitlab-runner(CI/CD)</a></li></ul></li><li><a href="/docs/elasticsearch.html" class="sidebar-link">elasticsearch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#docker部署elasticsearch" class="sidebar-link">docker部署elasticsearch</a></li><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#ik分词器添加" class="sidebar-link">ik分词器添加</a></li></ul></li><li><a href="/docs/EFK.html" class="sidebar-link">EFK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/EFK.html#拉取镜像" class="sidebar-link">拉取镜像</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#elasticsearch" class="sidebar-link">ElasticSearch</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#kibana" class="sidebar-link">Kibana</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#filebeat" class="sidebar-link">FileBeat</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#设置密码" class="sidebar-link">设置密码</a></li></ul></li><li><a href="/docs/docker安装zookeeper集群.html" class="sidebar-link">docker安装zookeeper集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#最新版本报错找不到端口-百度说最新的发行版有问题-回到3-4-13版本" class="sidebar-link">最新版本报错找不到端口，百度说最新的发行版有问题，回到3.4.13版本</a></li><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#后台运行-compose-project-name-zk-test-docker-compose-up-d-zk-test自定义名称" class="sidebar-link">后台运行 COMPOSEPROJECTNAME=zktest docker-compose up -d （zktest自定义名称）</a></li></ul></li><li><a href="/docs/docker-compose部署redis.html" class="sidebar-link">docker-compose部署redis</a></li><li><a href="/docs/js this指向.html" class="sidebar-link">js this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js this指向.html#常规" class="sidebar-link">常规</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#call、apply和bind" class="sidebar-link">call、apply和bind</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li><a href="/docs/css高度从0过渡到auto.html" class="sidebar-link">css高度从0过渡到auto</a></li><li><a href="/docs/console.html" class="sidebar-link">console</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/console.html#常用方法" class="sidebar-link">常用方法</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#部分实例" class="sidebar-link">部分实例</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#css" class="sidebar-link">css</a></li></ul></li><li><a href="/docs/class-validator自定义校验.html" class="sidebar-link">class-validator自定义校验</a></li><li><a href="/docs/class-validator 验证装饰器.html" class="sidebar-link">class-validator 验证装饰器</a></li><li><a href="/docs/Blob 下载文件时 type 类型 大全.html" class="sidebar-link">Blob 下载文件时 type 类型 大全</a></li><li><a href="/docs/自定义装饰器校验数据.html" class="sidebar-link">自定义装饰器校验数据</a></li><li><a href="/docs/网站换肤.html" class="sidebar-link">网站换肤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#创建项目-安装依赖" class="sidebar-link">创建项目&amp;安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编写sass文件" class="sidebar-link">编写sass文件</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编辑vite-config-ts" class="sidebar-link">编辑vite.config.ts</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/算法-KMP.html" class="sidebar-link">算法-KMP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#个人理解" class="sidebar-link">个人理解</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#最长相等前后缀" class="sidebar-link">最长相等前后缀</a></li></ul></li><li><a href="/docs/算法-bf.html" class="sidebar-link">算法-bf</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#举例" class="sidebar-link">举例</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/算法-希尔排序.html" class="sidebar-link">算法-希尔排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-直接插入排序.html" class="sidebar-link">算法-直接插入排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#算法描述" class="sidebar-link">算法描述</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#适用范围" class="sidebar-link">适用范围</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#个人理解" class="sidebar-link">个人理解</a></li></ul></li><li><a href="/docs/算法-快速排序.html" class="sidebar-link">算法-快速排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-简单选择排序.html" class="sidebar-link">算法-简单选择排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-赫夫曼编码.html" class="sidebar-link">算法-赫夫曼编码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#工作原理" class="sidebar-link">工作原理</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#赫夫曼树" class="sidebar-link">赫夫曼树</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-回溯法与八皇后问题.html" class="sidebar-link">算法-回溯法与八皇后问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#八皇后问题" class="sidebar-link">八皇后问题</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#回溯法" class="sidebar-link">回溯法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/算法-汉诺塔.html" class="sidebar-link">算法-汉诺塔</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#玩法" class="sidebar-link">玩法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-斐波那契数列.html" class="sidebar-link">算法-斐波那契数列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-二分查找.html" class="sidebar-link">算法-二分查找</a></li><li><a href="/docs/算法-堆排序.html" class="sidebar-link">算法-堆排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#前置名词解释" class="sidebar-link">前置名词解释</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-度量方法.html" class="sidebar-link">算法-度量方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#时间复杂度" class="sidebar-link">时间复杂度</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#大o计数法" class="sidebar-link">大O计数法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#常用时间复杂度排序" class="sidebar-link">常用时间复杂度排序</a></li></ul></li><li><a href="/docs/数据结构-图.html" class="sidebar-link">数据结构-图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的存储" class="sidebar-link">图的存储</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的遍历" class="sidebar-link">图的遍历</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最小生成树" class="sidebar-link">最小生成树</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最短路径" class="sidebar-link">最短路径</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aov网" class="sidebar-link">AOV网</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aoe网" class="sidebar-link">AOE网</a></li></ul></li><li><a href="/docs/数据结构-散列表.html" class="sidebar-link">数据结构-散列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列表" class="sidebar-link">散列表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列函数" class="sidebar-link">散列函数</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列地址" class="sidebar-link">散列地址</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列冲突" class="sidebar-link">散列冲突</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#处理冲突的方法" class="sidebar-link">处理冲突的方法</a></li></ul></li><li><a href="/docs/数据结构-平衡二叉树.html" class="sidebar-link">数据结构-平衡二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉排序树.html" class="sidebar-link">数据结构-二叉排序树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#性质" class="sidebar-link">性质</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉树.html" class="sidebar-link">数据结构-二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉树.html#定义" class="sidebar-link">定义</a></li></ul></li><li><a href="/docs/数据结构-栈&amp;队列.html" class="sidebar-link">数据结构-栈&amp;队列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#栈" class="sidebar-link">栈</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#队列" class="sidebar-link">队列</a></li></ul></li><li><a href="/docs/数据结构-链表.html" class="sidebar-link">数据结构-链表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#单向链表" class="sidebar-link">单向链表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#双向链表" class="sidebar-link">双向链表</a></li></ul></li><li><a href="/docs/ca自签名+配置https.html" class="sidebar-link">ca自签名+配置https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成私钥" class="sidebar-link">生成私钥</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成csr-证书签名请求" class="sidebar-link">生成CSR（证书签名请求）</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#删除私钥中的密码" class="sidebar-link">删除私钥中的密码</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成自签名证书" class="sidebar-link">生成自签名证书</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#express使用" class="sidebar-link">express使用</a></li></ul></li><li><a href="/docs/centos7安装docker.html" class="sidebar-link">centos7安装docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#更新yum包-安装需要的软件包" class="sidebar-link">更新yum包&amp;安装需要的软件包</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#设置yum源-选择其中一个-我选的阿里仓库" class="sidebar-link">设置yum源（选择其中一个,我选的阿里仓库）</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker" class="sidebar-link">安装Docker</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#启动docker-并加入开机启动" class="sidebar-link">启动Docker,并加入开机启动</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#配置阿里云加速-否则不能下载镜像" class="sidebar-link">配置阿里云加速，否则不能下载镜像</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker-compose" class="sidebar-link">安装docker-compose</a></li></ul></li><li><a href="/docs/centos7搭建vsftp.html" class="sidebar-link">centos7搭建vsftp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#安装应用" class="sidebar-link">安装应用</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#备份配置文件" class="sidebar-link">备份配置文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建载体用户" class="sidebar-link">创建载体用户</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#修改载体用户目录权限" class="sidebar-link">修改载体用户目录权限</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建虚拟用户表" class="sidebar-link">创建虚拟用户表</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#生成db文件" class="sidebar-link">生成db文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#设置认证文件pam" class="sidebar-link">设置认证文件PAM</a></li></ul></li><li><a href="/docs/linux安装mysql.html" class="sidebar-link">linux安装mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置mysql-8-0安装源" class="sidebar-link">配置Mysql 8.0安装源</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#安装mysql-8-0" class="sidebar-link">安装Mysql 8.0</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#启动mysql服务" class="sidebar-link">启动mysql服务</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#拿到临时密码" class="sidebar-link">拿到临时密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#登录" class="sidebar-link">登录</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#查看当前的密码验证策略" class="sidebar-link">查看当前的密码验证策略</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#重设密码" class="sidebar-link">重设密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置远程访问" class="sidebar-link">配置远程访问</a></li></ul></li><li><a href="/docs/安全连接远程linux.html" class="sidebar-link">安全连接远程linux</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-navtive"><a href="#react-navtive" class="header-anchor">#</a> <center>react-navtive</center></h1> <h2 id="版本信息"><a href="#版本信息" class="header-anchor">#</a> 版本信息</h2> <p>jdk: 13
react-native: 0.72.6</p> <h2 id="环境安装参考"><a href="#环境安装参考" class="header-anchor">#</a> 环境安装参考</h2> <p>参考：https://www.react-native.cn/docs/environment-setup
路由参考：https://reactnavigation.org/ https://reactnavigation.org/docs/bottom-tab-navigator/
卸载Android Studio参考: https://blog.csdn.net/sgx1825192/article/details/129369676</p> <h2 id="安装jdk"><a href="#安装jdk" class="header-anchor">#</a> 安装jdk</h2> <p>jdk下载地址: https://www.oracle.com/java/technologies/downloads/</p> <p>除了安装地址，一路next就好</p> <h2 id="配置环境变量"><a href="#配置环境变量" class="header-anchor">#</a> 配置环境变量</h2> <p>假定安装路径: D:\java\13</p> <p>除了安装路径一直next</p> <ul><li>删掉系统配置的一条环境变量，该环境变量以<code>\javapath</code>结尾</li> <li>JAVA_HOME: D:\java\13 // 填写安装路径,以后更换jdk版本只需替换此变量</li> <li>CLASSPATH: .;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</li> <li>path:</li> <li><ul><li>%JAVA_HOME%\bin</li></ul></li></ul> <h3 id="测试java"><a href="#测试java" class="header-anchor">#</a> 测试java</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>javac <span class="token parameter variable">-version</span> 
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>javac 13.0.1
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> Hello
<span class="token builtin class-name">cd</span> ./Hello
<span class="token function">vim</span> ./Hello.java
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span><span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>javac .<span class="token punctuation">\</span>Hello.java
<span class="token function">java</span> Hello
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>HelloWorld
</code></pre></div><h2 id="安装-android-studio"><a href="#安装-android-studio" class="header-anchor">#</a> 安装 Android Studio</h2> <p>下载地址: https://developer.android.com/studio?hl=zh-cn</p> <p>假设安装地址: D:\android\studio</p> <p>假设sdk地址: D:\android\sdk</p> <p>除了安装地址，一路next即可,安装完后运行时除了设置sdk地址外，皆next</p> <p>sdk按照上述链接设置，设置方式:顶部<code>tools</code> -&gt; <code>SDK Manager</code></p> <h4 id="配置环境变量-2"><a href="#配置环境变量-2" class="header-anchor">#</a> 配置环境变量</h4> <ul><li>ANDROID_HOME: D:\android\sdk // 填写sdk地址</li> <li>path:</li> <li><ul><li>%ANDROID_HOME%\platform-tools</li></ul></li> <li><ul><li>%ANDROID_HOME%\emulator</li></ul></li></ul> <h2 id="创建项目"><a href="#创建项目" class="header-anchor">#</a> 创建项目</h2> <div class="language-sh extra-class"><pre class="language-sh"><code>npx react-native init AwesomeProject
</code></pre></div><p><code>0.73</code>版本用了kotlin，很多生态的文档还没跟上，可以考虑锁一下版本，即</p> <div class="language-sh extra-class"><pre class="language-sh"><code>npx react-native init AwesomeProject <span class="token parameter variable">--version</span> <span class="token number">0.72</span>.6
</code></pre></div><h3 id="修改android-gradle"><a href="#修改android-gradle" class="header-anchor">#</a> 修改android gradle</h3> <p>由于墙的原因，基本都会超时，超时时间<code>timeout</code>设置为10分钟(即600秒),networkTimeout设置为100000000</p> <div class="language-sh extra-class"><pre class="language-sh"><code>android<span class="token punctuation">\</span>gradle<span class="token punctuation">\</span>wrapper<span class="token punctuation">\</span>gradle-wrapper.properties
</code></pre></div><div class="language-properties extra-class"><pre class="language-properties"><code>...
<span class="token key attr-name">networkTimeout</span><span class="token punctuation">=</span><span class="token value attr-value">100000000</span>
<span class="token key attr-name">timeout</span><span class="token punctuation">=</span><span class="token value attr-value">600</span>
...
</code></pre></div><p>若任下载失败，可依次尝试：</p> <ol><li>首先尝试打开vpn全局代理然后下载</li> <li>开了vpn依然失败，可以直接把问价下载下来放到指定位置。比如配置信息<code>distributionUrl=https\://services.gradle.org/distributions/gradle-8.0.1-all.zip</code>，直接下载文件<code>services.gradle.org/distributions/gradle-8.0.1-all.zip</code>，然后放到<code>C:\Users\[your_user_name]\.gradle\wrapper\dists</code>。这里我试了好几个版本，总是出现莫名问题，但<code>8.0.1-all</code>是可以的,如若其他版本一直有问题，可考虑替换</li></ol> <h3 id="使用装饰器"><a href="#使用装饰器" class="header-anchor">#</a> 使用装饰器</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> tsconfig.json
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;emitDecoratorMetadata&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span>
  ...
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @babel/plugin-proposal-decorators <span class="token parameter variable">-D</span>
<span class="token function">yarn</span> <span class="token function">add</span> reflect-metadata
<span class="token function">vim</span> babel.config.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'module:metro-react-native-babel-preset'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/plugin-proposal-decorators'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">legacy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> App.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token string">'reflect-metadata'</span>
<span class="token operator">...</span>
</code></pre></div><h2 id="运行"><a href="#运行" class="header-anchor">#</a> 运行</h2> <p>使用Android Studio启动一个模拟器</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> android
</code></pre></div><p>第一次运行很花时间，可能会花一天</p> <p>若遇到报错:</p> <div class="language- extra-class"><pre class="language-text"><code>FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:checkDebugAarMetadata'.
&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.
   &gt; Failed to transform react-android-0.72.6-debug.aar (com.facebook.react:react-android:0.72.6) to match attributes {artifactType=android-aar-metadata, com.android.build.api.attributes.BuildTypeAttr=debug, org.gradle.category=library, org.gradle.dependency.bundling=external, org.gradle.libraryelements=aar, org.gradle.status=release, org.gradle.usage=java-runtime}.
      &gt; Could not download react-android-0.72.6-debug.aar (com.facebook.react:react-android:0.72.6)
         &gt; Could not get resource 'https://repo.maven.apache.org/maven2/com/facebook/react/react-android/0.72.6/react-android-0.72.6-debug.aar'.
            &gt; Read timed out
   &gt; Failed to transform hermes-android-0.72.6-debug.aar (com.facebook.react:hermes-android:0.72.6) to match attributes {artifactType=android-aar-metadata, com.android.build.api.attributes.BuildTypeAttr=debug, org.gradle.category=library, org.gradle.dependency.bundling=external, org.gradle.libraryelements=aar, org.gradle.status=release, org.gradle.usage=java-runtime}.
      &gt; Could not download hermes-android-0.72.6-debug.aar (com.facebook.react:hermes-android:0.72.6)
         &gt; Could not get resource 'https://repo.maven.apache.org/maven2/com/facebook/react/hermes-android/0.72.6/hermes-android-0.72.6-debug.aar'.
            &gt; Could not GET 'https://repo.maven.apache.org/maven2/com/facebook/react/hermes-android/0.72.6/hermes-android-0.72.6-debug.aar'.
               &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/146.75.112.215] failed: Connection timed out: no further information

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.

* Get more help at https://help.gradle.org
</code></pre></div><p>并且执行</p> <div class="language-sh extra-class"><pre class="language-sh"><code>npx react-native doctor
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>✓ Adb - Required to verify if the android device is attached correctly
 ✓ JDK - Required to compile Java code
 ✖ Android Studio - Required for building and installing your app on Android
 ✖ Android SDK - Required for building and installing your app on Android
   - Versions found: N/A
   - Version supported: 33.0.0
 ✓ ANDROID_HOME - Environment variable that points to your Android SDK installation

Errors:   2
Warnings: 0
</code></pre></div><p>直接按<code>e</code>修复即可</p> <p>其余报错可尝试重启计算机</p> <h2 id="调试"><a href="#调试" class="header-anchor">#</a> 调试</h2> <p>在运行<code>yarn android</code>时打开的命令行按<code>d</code>，在模拟器终会打开菜单，选择<code>debug</code>可以打开浏览器调试</p> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <div class="language- extra-class"><pre class="language-text"><code>yarn add @react-navigation/bottom-tabs @react-navigation/native react-native-safe-area-context react-native-screens react-native-vector-icons redux react-redux @react-navigation/native-stack @react-native-community/async-storage redux-persist
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>yarn add -D @types/react-native-vector-icons
</code></pre></div><h5 id="编辑文件-android-app-src-main-java-mainactivity-java"><a href="#编辑文件-android-app-src-main-java-mainactivity-java" class="header-anchor">#</a> 编辑文件 android/app/src/main/java/<your package="" name="">/MainActivity.java</your></h5> <p>将以下代码添加到MainActivity类的主体中：</p> <div class="language- extra-class"><pre class="language-text"><code>@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(null);
}
</code></pre></div><p>并确保在此文件顶部添加导入语句：</p> <div class="language- extra-class"><pre class="language-text"><code>import android.os.Bundle;
</code></pre></div><p>android/app/build.gradle 添加语句</p> <div class="language- extra-class"><pre class="language-text"><code>apply from: &quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;
</code></pre></div><p>使用阿里图标库(参考地址:https://blog.csdn.net/weixin_43840341/article/details/119462782)
下载阿里图标，找到文件：iconfont.json iconfont.tff
将字体文件复制到 android/app/src/main/assets/fonts 目录下(没有assets/fonts的自行创建)
将字体文件复制到 assets/icon 目录下(后面会用到)
更改 android/app/build.gradle 文件，在dependencies里加入(这一步或许不要加，我加了报错，不加就成功了)</p> <div class="language- extra-class"><pre class="language-text"><code>compile project(':react-native-vector-icons')
</code></pre></div><p>更改 android/settings.gradle 文件，在文件中加入如下两行代码</p> <div class="language- extra-class"><pre class="language-text"><code>include ':react-native-vector-icons'
project(':react-native-vector-icons').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-vector-icons/android')
</code></pre></div><h4 id="键盘弹出占用可视区处理办法"><a href="#键盘弹出占用可视区处理办法" class="header-anchor">#</a> 键盘弹出占用可视区处理办法：</h4> <p>修改文件android\app\src\main\AndroidManifest.xml</p> <div class="language- extra-class"><pre class="language-text"><code>android:windowSoftInputMode=&quot;stateAlwaysHidden|adjustPan&quot;
</code></pre></div><h4 id="打包-参考地址-https-www-jianshu-com-p-0142e7f83784"><a href="#打包-参考地址-https-www-jianshu-com-p-0142e7f83784" class="header-anchor">#</a> 打包(参考地址:https://www.jianshu.com/p/0142e7f83784)</h4> <p>使用keytool生成密钥,keytool在jdk/bin目录下</p> <div class="language- extra-class"><pre class="language-text"><code>keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
</code></pre></div><p>执行完成后将会生成 my-release-key.keystore 文件 , 找到keystore文件后，放入项目中的 android/app 目录下
找到 android/gradle.properties 文件，添加配置如下</p> <div class="language- extra-class"><pre class="language-text"><code>MYAPP_RELEASE_STORE_FILE=my-release-key.keystore
MYAPP_RELEASE_KEY_ALIAS=my-key-alias
MYAPP_RELEASE_STORE_PASSWORD=[生成密钥时使用的密码]
MYAPP_RELEASE_KEY_PASSWORD=[生成密钥时使用的密码]
</code></pre></div><p>找到 android/app/build.gradle 文件，添加配置如下</p> <div class="language- extra-class"><pre class="language-text"><code>...
android {
    ...
    defaultConfig { ... }
    signingConfigs {
        release {
            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {
              storeFile file(MYAPP_RELEASE_STORE_FILE)
              storePassword MYAPP_RELEASE_STORE_PASSWORD
              keyAlias MYAPP_RELEASE_KEY_ALIAS
              keyPassword MYAPP_RELEASE_KEY_PASSWORD
            }
        }
    }
    buildTypes {
        release {
          ...
          signingConfig signingConfigs.release
        }
    }
}
...
</code></pre></div><p>进入当前项目中的 android 目录，运行如下：</p> <div class="language- extra-class"><pre class="language-text"><code>cd android
./gradlew assembleRelease
</code></pre></div><p>生成APK位置如下 :</p> <div class="language- extra-class"><pre class="language-text"><code>android/app/build/outputs/apk/release/app-release.apk
</code></pre></div><h2 id="小技巧"><a href="#小技巧" class="header-anchor">#</a> 小技巧</h2> <h3 id="获取组件尺寸"><a href="#获取组件尺寸" class="header-anchor">#</a> 获取组件尺寸</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span>
  <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> backgroundColor<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>layout<span class="token punctuation">)</span> <span class="token comment">// yx y width height</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="子组件暴露方法和父组件调用子组件"><a href="#子组件暴露方法和父组件调用子组件" class="header-anchor">#</a> 子组件暴露方法和父组件调用子组件</h3> <p>子组件</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> Child.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useImperativeHandle<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>

<span class="token comment">// 暴露数据类型</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Export</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用forwardRef定义组件，可以让父组件使用ref获取子组件实例</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token generic-function"><span class="token function">forwardRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>Export<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token function-variable function">Subtraction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 暴露的数据，类似vue3的expose</span>
    <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        add<span class="token punctuation">,</span>
        Subtraction
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> Father.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Child<span class="token punctuation">,</span> Export <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Child'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Father<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> c<span class="token operator">:</span> Export
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>+1<span class="token punctuation">'</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ev <span class="token operator">=&gt;</span> c<span class="token operator">=</span> ev<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用webview"><a href="#使用webview" class="header-anchor">#</a> 使用webview</h3> <p>新的版本没有直接暴露WebView,需要使用第三方库，安装依赖</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> react-native-webview
</code></pre></div><p>html相关文件(css,js)需要存放到android的静态目录中，具体路径是<code>android\app\src\main\assets</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>assets
<span class="token function">mkdir</span> html
<span class="token builtin class-name">cd</span> html
<span class="token function">mkdir</span> demo
<span class="token builtin class-name">cd</span> demo
<span class="token function">vim</span> index.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {string} msg
*/</span>
<span class="token keyword">const</span> <span class="token function-variable function">writeMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
  p<span class="token punctuation">.</span>innerText <span class="token operator">=</span> msg
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">writeMsg</span><span class="token punctuation">(</span><span class="token string">'generated by jsvascript'</span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">writeMsg</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// window.postMessage(JSON.stringify({ // 这种方式发送的消息native端已经接受不到了</span>
  window<span class="token punctuation">.</span>ReactNativeWebView<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'h5 send a message to native'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> index.html
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>send msg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>i is fish 2333<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> pages/Demo.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">FC</span><span class="token punctuation">,</span> createRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WebView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-webview'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Demo<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> webViewRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>WebView<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>injectJavaScript<span class="token punctuation">'</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        webViewRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">injectJavaScript</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          document.body.style.backgroundColor = document.body.style.backgroundColor === 'red' ? 'blue' : 'red';
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>send msg<span class="token punctuation">'</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        webViewRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>msg<span class="token operator">:</span> <span class="token string">'native send a message to h5'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span> 
        <span class="token attr-name">originWhitelist</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">allowFileAccess</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">javaScriptEnabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token comment">// uri: 'https://baidu.com',</span>
          <span class="token comment">// html: `&lt;h1&gt;?????000&lt;/h1&gt;`</span>
          uri<span class="token operator">:</span> <span class="token string">'file:///android_asset/html/demo/index.html'</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span> 
        <span class="token attr-name">injectedJavaScript</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          document.body.style.backgroundColor = 'blue';
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>webViewRef<span class="token punctuation">}</span></span>
        <span class="token attr-name">onError</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onError'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onLoad</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLoad'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onLoadEnd</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLoadEnd'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onLoadStart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLoadStart'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">onMessage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> msg <span class="token operator">=</span> val<span class="token punctuation">.</span>nativeEvent
          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'native onMessage:'</span><span class="token punctuation">)</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> start --reset-cache 
</code></pre></div><p>如果修改了<code>android\app\src\main\assets</code>下的文件，需重新编译,即</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> start --reset-cache 
</code></pre></div><h3 id="操作文件"><a href="#操作文件" class="header-anchor">#</a> 操作文件</h3> <p>文档地址: https://www.npmjs.com/package/react-native-fs</p> <p>安装依赖</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> react-native-fs
<span class="token function">yarn</span> <span class="token function">add</span> @react-native-camera-roll/camera-roll // 操作相册
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android/settings.gradle
</code></pre></div><div class="language-gradle extra-class"><pre class="language-gradle"><code><span class="token punctuation">...</span>
include <span class="token string">':react-native-fs'</span>
<span class="token keyword">project</span><span class="token punctuation">(</span><span class="token string">':react-native-fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>projectDir <span class="token operator">=</span> new <span class="token class-name">File</span><span class="token punctuation">(</span>settingsDir<span class="token punctuation">,</span> <span class="token string">'../node_modules/react-native-fs/android'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android/app/build.gradle
</code></pre></div><div class="language-gradle extra-class"><pre class="language-gradle"><code><span class="token keyword">dependencies</span> <span class="token punctuation">{</span>
  <span class="token punctuation">...</span>
  <span class="token keyword">implementation</span> <span class="token keyword">project</span><span class="token punctuation">(</span><span class="token string">':react-native-fs'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>低于<code>0.6</code>版本时，在<code>android\app\src\main\java\com\accounting\MainApplication.java</code>手动引入</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>java<span class="token punctuation">\</span>com<span class="token punctuation">\</span>accounting<span class="token punctuation">\</span>MainApplication.java
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rnfs<span class="token punctuation">.</span></span><span class="token class-name">RNFSPackage</span></span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>shell<span class="token punctuation">.</span></span><span class="token class-name">MainReactPackage</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token keyword">implements</span> <span class="token class-name">ReactApplication</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// @Override // 文档上有这个，但我加这个之后报错，删除之后正确</span>
  <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span><span class="token function">asList</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">MainReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// &lt;---- add comma</span>
      <span class="token keyword">new</span> <span class="token class-name">RNFSPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &lt;---------- add package</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>AndroidManifest.xml
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这一步可能不是必须的，使用<code>react-native link</code>链接一下，使用全局的<code>react-native</code>会报错，需要使用项目中的才行，在<code>package.json</code>中<code>scripr</code>追加一行</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;link&quot;: &quot;react-native link react-native-fs&quot;
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">link</span>
</code></pre></div><p>然后删除</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;link&quot;: &quot;react-native link react-native-fs&quot;
</code></pre></div><p>使用:</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span><span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Image<span class="token punctuation">,</span> ScrollView<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> ToastAndroid<span class="token punctuation">,</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>
<span class="token keyword">import</span> <span class="token constant">RNFS</span> <span class="token keyword">from</span> <span class="token string">'react-native-fs'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CameraRoll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@react-native-camera-roll/camera-roll&quot;</span>

<span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// 创建文件</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>createFileName<span class="token punctuation">,</span> setCreateFileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">createFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>createFileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">readDir</span><span class="token punctuation">(</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token punctuation">)</span>
    <span class="token keyword">const</span> exit <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.txt'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> createFileName
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>exit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">已存在文件：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>createFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>createFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">'i is fish'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入失败:'</span><span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 读取文件</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>readFileName<span class="token punctuation">,</span> setReadFileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">readFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">readDir</span><span class="token punctuation">(</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token punctuation">)</span>
      
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>readFileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'files:'</span><span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> file <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.txt'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> readFileName
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">不存在文件:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>readFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 修改文件</span>
    <span class="token keyword">const</span> <span class="token function-variable function">initUpdateFile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      fileName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> 
      fileValue<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>updateFileData<span class="token punctuation">,</span> setUpdateFileData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token function">initUpdateFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">updateFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>clear <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>updateFileData<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">readDir</span><span class="token punctuation">(</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token punctuation">)</span>
      <span class="token keyword">const</span> file <span class="token operator">=</span> files<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.txt'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> updateFileData<span class="token punctuation">.</span>fileName
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">不存在文件:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>updateFileData<span class="token punctuation">.</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> fn <span class="token operator">=</span> clear <span class="token operator">?</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span>writeFile <span class="token operator">:</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span>appendFile
      <span class="token function">fn</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>path<span class="token punctuation">,</span> updateFileData<span class="token punctuation">.</span>fileValue<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改成功'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'修改失败:'</span><span class="token punctuation">)</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 删除文件</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>deleteFileName<span class="token punctuation">,</span> setDeleteFileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">deleteFile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>deleteFileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deleteFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.txt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除失败:'</span><span class="token punctuation">)</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 下载文件</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>downFileSrc<span class="token punctuation">,</span> setDownFileSrc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>imgSrc<span class="token punctuation">,</span> setImgSrc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">downFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>downFileSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> options<span class="token operator">:</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span>DownloadFileOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        fromUrl<span class="token operator">:</span> downFileSrc<span class="token punctuation">,</span>
        toFile<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DocumentDirectoryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>downFileSrc<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token function-variable function">begin</span><span class="token operator">:</span> res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          ToastAndroid<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">size:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>contentLength<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,type:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>ToastAndroid<span class="token punctuation">.</span><span class="token constant">SHORT</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> exists <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>toFile<span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>exists<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'exists'</span><span class="token punctuation">)</span>
        <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>toFile<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>promise
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'下载成功'</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> CameraRoll<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">'file://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>toFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// 保存到相册</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;图片已保存至相册&quot;</span><span class="token punctuation">)</span>
          <span class="token function">setImgSrc</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">file://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>toFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'下载失败:'</span><span class="token punctuation">)</span>
          <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ScrollView</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">文件操作</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>paddingBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>createFileName<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setCreateFileName</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>createFile<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">创建文件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>paddingBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>readFileName<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setReadFileName</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>readFile<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">读取文件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>paddingBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>updateFileData<span class="token punctuation">.</span>fileName<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setUpdateFileData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              fileName<span class="token operator">:</span> text<span class="token punctuation">,</span>
              fileValue<span class="token operator">:</span> updateFileData<span class="token punctuation">.</span>fileValue
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>updateFileData<span class="token punctuation">.</span>fileValue<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setUpdateFileData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              fileName<span class="token operator">:</span> updateFileData<span class="token punctuation">.</span>fileName<span class="token punctuation">,</span>
              fileValue<span class="token operator">:</span> text
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateFile</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">修改文件(追加)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateFile</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">修改文件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>paddingBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>deleteFileName<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setDeleteFileName</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>deleteFile<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">删除文件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>paddingBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>downFileSrc<span class="token punctuation">}</span></span> <span class="token attr-name">onChangeText</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">setDownFileSrc</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Input</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>downFile<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">下载文件</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span>height<span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>uri<span class="token operator">:</span>imgSrc<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ScrollView</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'SystemComponent'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> zhName <span class="token operator">=</span> <span class="token string">'系统'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> System <span class="token operator">=</span> Widget
</code></pre></div><h3 id="获取权限"><a href="#获取权限" class="header-anchor">#</a> 获取权限</h3> <p>权限大全：https://reactnative.dev/docs/permissionsandroid</p> <p>首先要在<code>android\app\src\main\AndroidManifest.xml</code>中添加权限</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.INTERNET<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_MEDIA_IMAGES<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_MEDIA_VIDEO<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在使用的时候申请</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PermissionsAndroid<span class="token punctuation">,</span> Platform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>

<span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> <span class="token function-variable function">hasAndroidPermission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>Platform<span class="token punctuation">.</span>Version<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">33</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> checkRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token comment">// 使用PermissionsAndroid.check检查是否拥有权限</span>
          PermissionsAndroid<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_IMAGES</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          PermissionsAndroid<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_VIDEO</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> checkRes<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_EXTERNAL_STORAGE</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getAndroidPermission</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getAndroidPermission'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>Platform<span class="token punctuation">.</span>Version<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">33</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'&gt;= 33'</span><span class="token punctuation">)</span>
      <span class="token comment">// 使用requestMultiple请求多个权限</span>
      <span class="token keyword">const</span> getRes <span class="token operator">=</span> <span class="token keyword">await</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token function">requestMultiple</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_IMAGES</span><span class="token punctuation">,</span>
        PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_VIDEO</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        getRes<span class="token punctuation">[</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_IMAGES</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        getRes<span class="token punctuation">[</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_MEDIA_VIDEO</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item <span class="token operator">===</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">RESULTS</span><span class="token punctuation">.</span><span class="token constant">GRANTED</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'&lt; 33'</span><span class="token punctuation">)</span>
    <span class="token comment">// 使用request请求单个权限</span>
    <span class="token keyword">return</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_EXTERNAL_STORAGE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> status <span class="token operator">===</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">RESULTS</span><span class="token punctuation">.</span><span class="token constant">GRANTED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> has <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">hasAndroidPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'has:'</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>has<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>has<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> get <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAndroidPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get:'</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>get<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>check<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">检查权限</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="读取应用列表"><a href="#读取应用列表" class="header-anchor">#</a> 读取应用列表</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> react-native-launcher-kit
<span class="token function">vim</span> package.json
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code>...
<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   ...
    <span class="token property">&quot;link&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-native link react-native-launcher-kit&quot;</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
...
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">link</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> InstalledApps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native-launcher-kit'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>

<span class="token keyword">export</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getInstalledApps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> apps <span class="token operator">=</span> InstalledApps<span class="token punctuation">.</span><span class="token function">getApps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'apps:'</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>apps<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>getInstalledApps<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">读取应用列表</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="通讯录"><a href="#通讯录" class="header-anchor">#</a> 通讯录</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> react-native-contacts
</code></pre></div><p>这一步可能不是必须</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> package.json
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;link&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-native link react-native-contacts&quot;</span>
  <span class="token punctuation">}</span>
  ...
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">link</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>settings.gradle
</code></pre></div><div class="language-gradle extra-class"><pre class="language-gradle"><code><span class="token punctuation">...</span>
include <span class="token string">':react-native-contacts'</span>
<span class="token keyword">project</span><span class="token punctuation">(</span><span class="token string">':react-native-contacts'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>projectDir <span class="token operator">=</span> new <span class="token class-name">File</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>projectDir<span class="token punctuation">,</span> <span class="token string">'../node_modules/react-native-contacts/android'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>build.gradle
</code></pre></div><div class="language-gradle extra-class"><pre class="language-gradle"><code><span class="token punctuation">...</span>
<span class="token keyword">dependencies</span> <span class="token punctuation">{</span>
  <span class="token punctuation">...</span>
  <span class="token keyword">implementation</span> <span class="token keyword">project</span><span class="token punctuation">(</span><span class="token string">':react-native-contacts'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>java<span class="token punctuation">\</span>com<span class="token punctuation">\</span>accounting<span class="token punctuation">\</span>MainApplication.java
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//  MainApplication.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rt2zz<span class="token punctuation">.</span>reactnativecontacts<span class="token punctuation">.</span></span><span class="token class-name">ReactNativeContacts</span></span><span class="token punctuation">;</span> <span class="token comment">// &lt;--- import</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token keyword">implements</span> <span class="token class-name">ReactApplication</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span><span class="token function">asList</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">MainReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">ReactNativeContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;------ add this</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>AndroidManifest.xml
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_CONTACTS<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
3 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_CONTACTS<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
4 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.GET_ACCOUNTS<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_PROFILE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>
<span class="token keyword">import</span> Contacts <span class="token keyword">from</span> <span class="token string">'react-native-contacts'</span>

<span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getContacts</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pass <span class="token operator">=</span> <span class="token keyword">await</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_CONTACTS</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> ok <span class="token operator">=</span> <span class="token keyword">await</span> PermissionsAndroid<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>PermissionsAndroid<span class="token punctuation">.</span><span class="token constant">PERMISSIONS</span><span class="token punctuation">.</span><span class="token constant">READ_CONTACTS</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
      
    Contacts<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>contacts<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'contacts:'</span><span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contacts<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err:'</span><span class="token punctuation">)</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>getContacts<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">联系人列表</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="判断程序是否在前台运行"><a href="#判断程序是否在前台运行" class="header-anchor">#</a> 判断程序是否在前台运行</h3> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Widge <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">FC</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  AppState<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>nextAppState<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextAppState<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="消息推送"><a href="#消息推送" class="header-anchor">#</a> 消息推送</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @notifee/react-native
</code></pre></div><p>若安装失败，可以考虑更换淘宝源</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
</code></pre></div><p>在<code>index.js</code>中注册</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> index.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>AppRegistry<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>name <span class="token keyword">as</span> appName<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app.json'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> notifee<span class="token punctuation">,</span> <span class="token punctuation">{</span>EventType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@notifee/react-native'</span><span class="token punctuation">;</span>

notifee<span class="token punctuation">.</span><span class="token function">registerForegroundService</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">notification</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 注册</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
notifee<span class="token punctuation">.</span><span class="token function">onBackgroundEvent</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 监听后台事件，可以写在子组件内</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'BackgroundEvent:'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>type <span class="token operator">===</span> EventType<span class="token punctuation">.</span><span class="token constant">ACTION_PRESS</span> <span class="token operator">&amp;&amp;</span> info<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>pressAction<span class="token operator">?.</span>id <span class="token operator">===</span> <span class="token string">'testPressActionId'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">cancelNotification</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>notification<span class="token operator">?.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
notifee<span class="token punctuation">.</span><span class="token function">onForegroundEvent</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 监听前台事件，可以写在子组件内</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ForegroundEvent:'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span>appName<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在组件中使用</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>
<span class="token keyword">import</span> notifee<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  TimestampTrigger<span class="token punctuation">,</span>
  TriggerType<span class="token punctuation">,</span>
  AuthorizationStatus<span class="token punctuation">,</span>
  AndroidImportance<span class="token punctuation">,</span>
  AndroidStyle<span class="token punctuation">,</span>
  Notification<span class="token punctuation">,</span>
  AndroidCategory<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@notifee/react-native'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">pushNotify</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 申请权限</span>
      <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">cancelAllNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消以前的推送</span>
      <span class="token keyword">const</span> channelId <span class="token operator">=</span> <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'defaultId'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'defaultName'</span><span class="token punctuation">,</span>
        importance<span class="token operator">:</span> AndroidImportance<span class="token punctuation">.</span><span class="token constant">HIGH</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">displayNotification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'title7'</span><span class="token punctuation">,</span>
        body<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          message<span class="token operator">:</span> <span class="token string">'i is fish'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        android<span class="token operator">:</span> <span class="token punctuation">{</span>
          channelId<span class="token operator">:</span> <span class="token string">'defaultId'</span><span class="token punctuation">,</span>
          largeIcon<span class="token operator">:</span> <span class="token string">'https://kexiong.vip/oss/kefu.jpg'</span><span class="token punctuation">,</span>
          style<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> AndroidStyle<span class="token punctuation">.</span><span class="token constant">BIGPICTURE</span><span class="token punctuation">,</span>
            picture<span class="token operator">:</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'../assets/imgs/bg.jpg'</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          actions<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              pressAction<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">'testPressActionId'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              title<span class="token operator">:</span> <span class="token string">'actionTitle'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'推送失败:'</span><span class="token punctuation">)</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">pushNotify2</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 申请权限</span>
    <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">cancelAllNotifications</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消以前的推送</span>
    <span class="token keyword">const</span> channelId <span class="token operator">=</span> <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'defaultId'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'defaultName'</span><span class="token punctuation">,</span>
      importance<span class="token operator">:</span> AndroidImportance<span class="token punctuation">.</span><span class="token constant">HIGH</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> reminderNotification<span class="token operator">:</span> Notification <span class="token operator">=</span> <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'NotificationId'</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">'NotificationTitle'</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token string">'NotificationBody'</span><span class="token punctuation">,</span>
      data<span class="token operator">:</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token string">'NotificationMessage'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      android<span class="token operator">:</span> <span class="token punctuation">{</span>
        channelId<span class="token punctuation">,</span>
        <span class="token comment">// category: AndroidCategory.RECOMMENDATION,</span>
        <span class="token comment">// fullScreenAction: {</span>
        <span class="token comment">//     id: 'fullScreenActionId',</span>
        <span class="token comment">//     mainComponent: 'full-screen-reminder'</span>
        <span class="token comment">// },</span>
        <span class="token comment">// asForegroundService: true,</span>
        largeIcon<span class="token operator">:</span> <span class="token string">'https://kexiong.vip/oss/kefu.jpg'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    date<span class="token punctuation">.</span><span class="token function">setSeconds</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 3秒后推送</span>
    <span class="token keyword">await</span> notifee<span class="token punctuation">.</span><span class="token function">createTriggerNotification</span><span class="token punctuation">(</span>reminderNotification<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> TriggerType<span class="token punctuation">.</span><span class="token constant">TIMESTAMP</span><span class="token punctuation">,</span>
      timestamp<span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'推送失败:'</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pushNotify2<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">推送2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>pushNotify<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">推送</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="修改app名字"><a href="#修改app名字" class="header-anchor">#</a> 修改APP名字</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> android<span class="token punctuation">\</span>app<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main<span class="token punctuation">\</span>res<span class="token punctuation">\</span>values<span class="token punctuation">\</span>strings.xml
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的APP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="真机调试"><a href="#真机调试" class="header-anchor">#</a> 真机调试</h2> <ul><li>手机用数据线连接电脑，选择数据传输</li> <li>设置菜单中寻找“关于手机”（或类似的选项）并点击进入</li> <li>在“关于手机”界面中，找到“软件信息”或“版本号”选项，并连续点击7次，直到出现“开发者选项已启用”的提示信息</li> <li>进入“开发者选项”界面，在其中找到“USB调试”选项并打开它</li> <li>命令行执行<code>adb devices</code>查询设备情况</li> <li>yarn start --reset-cache</li></ul> <h3 id="版本控制"><a href="#版本控制" class="header-anchor">#</a> 版本控制</h3> <p>修改<code>android\app\build.gradle</code>下<code>defaultConfig.versionName</code>即可控制版本。注意每次修改<code>versionName</code>需要增加<code>versionCode</code></p> <div class="language-gradle extra-class"><pre class="language-gradle"><code><span class="token punctuation">...</span>
android <span class="token punctuation">{</span>
  <span class="token punctuation">...</span>
  defaultConfig <span class="token punctuation">{</span>
    <span class="token punctuation">...</span>
    versionCode <span class="token number">2</span>
    versionName <span class="token interpolation-string"><span class="token string">&quot;1.2.3&quot;</span></span>
    <span class="token punctuation">...</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</code></pre></div><p>使用<code>react-native-device-info</code>中<code>getVersion</code>方法即可获取版本号</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@rneui/themed'</span>
<span class="token keyword">import</span> DeviceInfo <span class="token keyword">from</span> <span class="token string">'react-native-device-info'</span>


<span class="token keyword">export</span> <span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getVersion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'version:'</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>DeviceInfo<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>getVersion<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">获取version</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="app更新"><a href="#app更新" class="header-anchor">#</a> app更新</h3> <p>使用包<code>@dominicvonk/react-native-apk-installer</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> @dominicvonk/react-native-apk-installer
</code></pre></div><p>使用<code>react-native link</code>链接下,添加<code>package.json</code>的<code>scripts</code></p> <div class="language- extra-class"><pre class="language-text"><code>...
&quot;scripts&quot;: {
  ...
  &quot;link&quot;: &quot;react-native link @dominicvonk/react-native-apk-installer&quot;,
  ...
}
...
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">link</span>
</code></pre></div><p>申请安装app的权限</p> <div class="language- extra-class"><pre class="language-text"><code>vim android\app\src\main\java\com\[your_app_name]\MainApplication.java
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.REQUEST_INSTALL_PACKAGES<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">FC</span><span class="token punctuation">,</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  Text<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  Alert<span class="token punctuation">,</span>
  View
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>
<span class="token keyword">import</span> DeviceInfo <span class="token keyword">from</span> <span class="token string">'react-native-device-info'</span> 
<span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token constant">RNFS</span> <span class="token keyword">from</span> <span class="token string">'react-native-fs'</span> 
<span class="token keyword">import</span> RNApkInstaller <span class="token keyword">from</span> <span class="token string">&quot;@dominicvonk/react-native-apk-installer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Widget<span class="token operator">:</span> <span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取当前app版本</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>version<span class="token punctuation">,</span> _setVersion<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>DeviceInfo<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
  <span class="token comment">// apk文件下载情况</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>apkDownStatu<span class="token punctuation">,</span> setApkDownStatu<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>DownloadProgressCallbackResult<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    jobId<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    contentLength<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    bytesWritten<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 是否在下载文件</span>
  <span class="token keyword">let</span> downloadLoading <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token comment">/**
   * 下载文件
   * @param {string} fromUrl 文件下载地址
  */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">downFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>fromUrl<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>downloadLoading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'正在下载'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    downloadLoading <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">const</span> fileName <span class="token operator">=</span> fromUrl<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> options<span class="token operator">:</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span>DownloadFileOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
      fromUrl<span class="token punctuation">,</span>
      toFile<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>TemporaryDirectoryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token function-variable function">begin</span><span class="token operator">:</span> res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ToastAndroid<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">size:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>contentLength<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,type:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>ToastAndroid<span class="token punctuation">.</span><span class="token constant">SHORT</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">progress</span><span class="token operator">:</span> res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token function">setApkDownStatu</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token function">deleteFile</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>toFile<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token constant">RNFS</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span>promise
    downloadLoading <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 对比a版本是否大于b版本
   * @param {[number, number, number]} a a版本
   * @param {[number, number, number]} b b版本
   * @returns boolean a版本是否大于b版本
  */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">comparedVersion</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">checkUpdate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取远程apk信息</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> Axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://kexiong.vip/oss/release/output-metadata.json'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> remote <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>versionName <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>str <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> local <span class="token operator">=</span> version<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>str <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
      <span class="token comment">// 远程版本不大于本地</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">comparedVersion</span><span class="token punctuation">(</span>remote<span class="token punctuation">,</span> local<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> fileName <span class="token operator">=</span> <span class="token string">'app-release.apk'</span>
      <span class="token comment">// 下载apk文件</span>
      <span class="token keyword">await</span> <span class="token function">downFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://kexiong.vip/oss/release/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> localFile <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">RNFS</span><span class="token punctuation">.</span>TemporaryDirectoryPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token comment">// 安装apk文件</span>
      RNApkInstaller<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span>localFile<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error:'</span><span class="token punctuation">)</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>version<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>apkDownStatu<span class="token punctuation">.</span>bytesWritten<span class="token punctuation">}</span><span class="token plain-text">/</span><span class="token punctuation">{</span>apkDownStatu<span class="token punctuation">.</span>contentLength<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>检查更新<span class="token punctuation">'</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>checkUpdate<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意</strong>:必须打包成apk文件,再安装测试</p> <h2 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h2> <h3 id="error-referenceerror-property-react-doesn-t-exist"><a href="#error-referenceerror-property-react-doesn-t-exist" class="header-anchor">#</a> ERROR  ReferenceError: Property 'React' doesn't exist</h3> <p>用以下方式运行项目</p> <div class="language- extra-class"><pre class="language-text"><code>yarn start --reset-cache
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">4/17/2024, 7:38:54 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/react+react-router-dom+redux.html" class="prev">
        react+react-router-dom+redux
      </a></span> <span class="next"><a href="/docs/prometheus-docker.html">
        prometheus-docker
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.e9bf7062.js" defer></script><script src="/docs/assets/js/2.21081ec6.js" defer></script><script src="/docs/assets/js/1.d6a5e65b.js" defer></script><script src="/docs/assets/js/71.acb0758d.js" defer></script>
  </body>
</html>
