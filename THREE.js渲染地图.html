<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>月窗散记</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/docs/imgs/head.jpg">
    <meta name="description" content="闲暇记录学习代码时的点滴历程">
    <meta name="keywords" content="月窗散记,笔记,开发">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d5ec1c5.css" as="style"><link rel="preload" href="/docs/assets/js/app.e9bf7062.js" as="script"><link rel="preload" href="/docs/assets/js/2.21081ec6.js" as="script"><link rel="preload" href="/docs/assets/js/1.d6a5e65b.js" as="script"><link rel="preload" href="/docs/assets/js/29.b35680f8.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.9b4db267.js"><link rel="prefetch" href="/docs/assets/js/100.e311d782.js"><link rel="prefetch" href="/docs/assets/js/101.7499b16d.js"><link rel="prefetch" href="/docs/assets/js/102.f7d7d9fc.js"><link rel="prefetch" href="/docs/assets/js/103.a41cb2e9.js"><link rel="prefetch" href="/docs/assets/js/104.ce259601.js"><link rel="prefetch" href="/docs/assets/js/105.c940ba59.js"><link rel="prefetch" href="/docs/assets/js/106.7c947769.js"><link rel="prefetch" href="/docs/assets/js/107.1a04a9d6.js"><link rel="prefetch" href="/docs/assets/js/108.30de9c83.js"><link rel="prefetch" href="/docs/assets/js/109.22a243b0.js"><link rel="prefetch" href="/docs/assets/js/11.690021fa.js"><link rel="prefetch" href="/docs/assets/js/110.d198aa34.js"><link rel="prefetch" href="/docs/assets/js/111.dcfc4fa5.js"><link rel="prefetch" href="/docs/assets/js/112.865ed45e.js"><link rel="prefetch" href="/docs/assets/js/113.61279f07.js"><link rel="prefetch" href="/docs/assets/js/114.5250c33f.js"><link rel="prefetch" href="/docs/assets/js/115.326839b0.js"><link rel="prefetch" href="/docs/assets/js/116.b1d4cbbb.js"><link rel="prefetch" href="/docs/assets/js/117.1acfbebc.js"><link rel="prefetch" href="/docs/assets/js/118.93f13cdc.js"><link rel="prefetch" href="/docs/assets/js/119.5a980eba.js"><link rel="prefetch" href="/docs/assets/js/12.6fcc671a.js"><link rel="prefetch" href="/docs/assets/js/120.fbd81856.js"><link rel="prefetch" href="/docs/assets/js/121.1b960932.js"><link rel="prefetch" href="/docs/assets/js/122.b29fb009.js"><link rel="prefetch" href="/docs/assets/js/123.63cbd0d2.js"><link rel="prefetch" href="/docs/assets/js/124.3f1d290b.js"><link rel="prefetch" href="/docs/assets/js/125.59469aaf.js"><link rel="prefetch" href="/docs/assets/js/126.b09e4266.js"><link rel="prefetch" href="/docs/assets/js/127.fc7fda67.js"><link rel="prefetch" href="/docs/assets/js/128.01e1c038.js"><link rel="prefetch" href="/docs/assets/js/129.df69bdbf.js"><link rel="prefetch" href="/docs/assets/js/13.c7a0c6d5.js"><link rel="prefetch" href="/docs/assets/js/14.2b8b9240.js"><link rel="prefetch" href="/docs/assets/js/15.20728d29.js"><link rel="prefetch" href="/docs/assets/js/16.5321a22c.js"><link rel="prefetch" href="/docs/assets/js/17.60ed3f63.js"><link rel="prefetch" href="/docs/assets/js/18.cb38b1ad.js"><link rel="prefetch" href="/docs/assets/js/19.b58682e0.js"><link rel="prefetch" href="/docs/assets/js/20.08fed5a8.js"><link rel="prefetch" href="/docs/assets/js/21.b6e62902.js"><link rel="prefetch" href="/docs/assets/js/22.24c69e91.js"><link rel="prefetch" href="/docs/assets/js/23.921f8a74.js"><link rel="prefetch" href="/docs/assets/js/24.f2152ebf.js"><link rel="prefetch" href="/docs/assets/js/25.55cb6df7.js"><link rel="prefetch" href="/docs/assets/js/26.ba83a3fb.js"><link rel="prefetch" href="/docs/assets/js/27.174b1678.js"><link rel="prefetch" href="/docs/assets/js/28.309b00b4.js"><link rel="prefetch" href="/docs/assets/js/3.04f428b9.js"><link rel="prefetch" href="/docs/assets/js/30.6aaabbcf.js"><link rel="prefetch" href="/docs/assets/js/31.cc5cffb7.js"><link rel="prefetch" href="/docs/assets/js/32.ad41d324.js"><link rel="prefetch" href="/docs/assets/js/33.1140989d.js"><link rel="prefetch" href="/docs/assets/js/34.ff497298.js"><link rel="prefetch" href="/docs/assets/js/35.4d523d75.js"><link rel="prefetch" href="/docs/assets/js/36.1c20b66a.js"><link rel="prefetch" href="/docs/assets/js/37.2da1705f.js"><link rel="prefetch" href="/docs/assets/js/38.0fe1c3f1.js"><link rel="prefetch" href="/docs/assets/js/39.1f6a5c7b.js"><link rel="prefetch" href="/docs/assets/js/4.1ce2464c.js"><link rel="prefetch" href="/docs/assets/js/40.eddd46af.js"><link rel="prefetch" href="/docs/assets/js/41.42a73812.js"><link rel="prefetch" href="/docs/assets/js/42.43955417.js"><link rel="prefetch" href="/docs/assets/js/43.bd3ec667.js"><link rel="prefetch" href="/docs/assets/js/44.62cbaa5b.js"><link rel="prefetch" href="/docs/assets/js/45.233edbc3.js"><link rel="prefetch" href="/docs/assets/js/46.aafdef08.js"><link rel="prefetch" href="/docs/assets/js/47.595fd768.js"><link rel="prefetch" href="/docs/assets/js/48.a6540ad3.js"><link rel="prefetch" href="/docs/assets/js/49.726d0669.js"><link rel="prefetch" href="/docs/assets/js/5.8739eddd.js"><link rel="prefetch" href="/docs/assets/js/50.304f5c8a.js"><link rel="prefetch" href="/docs/assets/js/51.a24e9848.js"><link rel="prefetch" href="/docs/assets/js/52.e2dd0be4.js"><link rel="prefetch" href="/docs/assets/js/53.4f656f8b.js"><link rel="prefetch" href="/docs/assets/js/54.773afa1e.js"><link rel="prefetch" href="/docs/assets/js/55.b4b04462.js"><link rel="prefetch" href="/docs/assets/js/56.36eec085.js"><link rel="prefetch" href="/docs/assets/js/57.157d15a4.js"><link rel="prefetch" href="/docs/assets/js/58.e0c6d305.js"><link rel="prefetch" href="/docs/assets/js/59.33bac785.js"><link rel="prefetch" href="/docs/assets/js/6.05d88696.js"><link rel="prefetch" href="/docs/assets/js/60.fbb2bc1c.js"><link rel="prefetch" href="/docs/assets/js/61.31e6b365.js"><link rel="prefetch" href="/docs/assets/js/62.b21dbcb9.js"><link rel="prefetch" href="/docs/assets/js/63.d300ff10.js"><link rel="prefetch" href="/docs/assets/js/64.69f65722.js"><link rel="prefetch" href="/docs/assets/js/65.8f8d018d.js"><link rel="prefetch" href="/docs/assets/js/66.f335df08.js"><link rel="prefetch" href="/docs/assets/js/67.df717949.js"><link rel="prefetch" href="/docs/assets/js/68.11cf70a1.js"><link rel="prefetch" href="/docs/assets/js/69.cdd6ce02.js"><link rel="prefetch" href="/docs/assets/js/7.97313c33.js"><link rel="prefetch" href="/docs/assets/js/70.166b14ea.js"><link rel="prefetch" href="/docs/assets/js/71.acb0758d.js"><link rel="prefetch" href="/docs/assets/js/72.82990d4e.js"><link rel="prefetch" href="/docs/assets/js/73.53ae9974.js"><link rel="prefetch" href="/docs/assets/js/74.81e7b0e1.js"><link rel="prefetch" href="/docs/assets/js/75.a7db37d2.js"><link rel="prefetch" href="/docs/assets/js/76.2734cbb8.js"><link rel="prefetch" href="/docs/assets/js/77.a64ef896.js"><link rel="prefetch" href="/docs/assets/js/78.4c503dcb.js"><link rel="prefetch" href="/docs/assets/js/79.b0b40de1.js"><link rel="prefetch" href="/docs/assets/js/80.608970d9.js"><link rel="prefetch" href="/docs/assets/js/81.537f238c.js"><link rel="prefetch" href="/docs/assets/js/82.9e80b244.js"><link rel="prefetch" href="/docs/assets/js/83.21f21168.js"><link rel="prefetch" href="/docs/assets/js/84.8b2f4ce4.js"><link rel="prefetch" href="/docs/assets/js/85.b52f4b36.js"><link rel="prefetch" href="/docs/assets/js/86.625023d9.js"><link rel="prefetch" href="/docs/assets/js/87.96c0892d.js"><link rel="prefetch" href="/docs/assets/js/88.31271f14.js"><link rel="prefetch" href="/docs/assets/js/89.18d6c9a7.js"><link rel="prefetch" href="/docs/assets/js/90.e8c786af.js"><link rel="prefetch" href="/docs/assets/js/91.9d4e8723.js"><link rel="prefetch" href="/docs/assets/js/92.ae174bc0.js"><link rel="prefetch" href="/docs/assets/js/93.baaf9bc5.js"><link rel="prefetch" href="/docs/assets/js/94.0d885c47.js"><link rel="prefetch" href="/docs/assets/js/95.0d0b9732.js"><link rel="prefetch" href="/docs/assets/js/96.48dfb6f2.js"><link rel="prefetch" href="/docs/assets/js/97.1541b4e2.js"><link rel="prefetch" href="/docs/assets/js/98.728cf299.js"><link rel="prefetch" href="/docs/assets/js/99.791c7aa4.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d5ec1c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/imgs/head.jpg" alt="月窗散记" class="logo"> <span class="site-name can-hide">月窗散记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/wujie.html" class="sidebar-link">wujie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/wujie.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#安装依赖" class="sidebar-link">安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块a" class="sidebar-link">子模块A</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块b" class="sidebar-link">子模块B</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#基座" class="sidebar-link">基座</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/实现Promise.html" class="sidebar-link">实现Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/坐标拾取组件封装.html" class="sidebar-link">坐标拾取组件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/坐标拾取组件封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/高德地图轨迹回放与滑块控制.html" class="sidebar-link">高德地图轨迹回放与滑块控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/高德地图2.0点聚合bug及处理办法.html" class="sidebar-link">高德地图2.0点聚合bug及处理办法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#解决思路" class="sidebar-link">解决思路</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/SharedWorker.html" class="sidebar-link">SharedWorker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#备注" class="sidebar-link">备注</a></li></ul></li><li><a href="/docs/分时函数.html" class="sidebar-link">分时函数</a></li><li><a href="/docs/大文件分片上传.html" class="sidebar-link">大文件分片上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#启动" class="sidebar-link">启动</a></li></ul></li><li><a href="/docs/sse.html" class="sidebar-link">SSE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sse.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/PWA.html" class="sidebar-link">PWA</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-manifest-json" class="sidebar-link">配置 manifest.json</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化样式" class="sidebar-link">初始化样式</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化测试数据" class="sidebar-link">初始化测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-index-html" class="sidebar-link">配置 index.html</a></li></ul></li><li><a href="/docs/请求工具函数封装.html" class="sidebar-link">请求工具函数封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/请求工具函数封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/访问器处理双向影响数据.html" class="sidebar-link">访问器处理双向影响数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/访问器处理双向影响数据.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/自定义日期组件.html" class="sidebar-link">自定义日期组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/http缓存.html" class="sidebar-link">http缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/http缓存.html#强缓存" class="sidebar-link">强缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#协商缓存" class="sidebar-link">协商缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/深拷贝、防抖和节流.html" class="sidebar-link">深拷贝、防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#深拷贝" class="sidebar-link">深拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#防抖" class="sidebar-link">防抖</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#节流" class="sidebar-link">节流</a></li></ul></li><li><a href="/docs/pdf.js+带线条标注.html" class="sidebar-link">pdf.js+带线条标注</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/动态表单设计方案.html" class="sidebar-link">动态表单设计方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/cadvisor+prometheus+grafana监控容器.html" class="sidebar-link">cadvisor+prometheus+grafana监控容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/VScode实现远程免密登录.html" class="sidebar-link">VScode实现远程免密登录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#客户端生成公钥-若没有" class="sidebar-link">客户端生成公钥(若没有)</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#将客户端的公钥放到服务器" class="sidebar-link">将客户端的公钥放到服务器</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#配置权限" class="sidebar-link">配置权限</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/docs/vue3单元测试.html" class="sidebar-link">vue3单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#初始化项目" class="sidebar-link">初始化项目</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试函数" class="sidebar-link">测试函数</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试vue组件" class="sidebar-link">测试vue组件</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#交互测试-事件测试" class="sidebar-link">交互测试&amp;事件测试</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#请求-注入" class="sidebar-link">请求&amp;注入</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/THREE.js渲染地图.html" class="active sidebar-link">THREE.js渲染地图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#效果演示" class="sidebar-link">效果演示</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#前置说明" class="sidebar-link">前置说明</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#定义类型" class="sidebar-link">定义类型</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/使用视口尺寸和计算属性做响应式开发.html" class="sidebar-link">使用视口尺寸和计算属性做响应式开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用视口尺寸和计算属性做响应式开发.html#定义等分大小" class="sidebar-link">定义等分大小</a></li></ul></li><li><a href="/docs/使用indexDB缓存THREE.js模型.html" class="sidebar-link">使用indexDB缓存THREE.js模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#封装indexdb" class="sidebar-link">封装indexDB</a></li><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#调用" class="sidebar-link">调用</a></li></ul></li><li><a href="/docs/THREE笔记.html" class="sidebar-link">THREE笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#纹理" class="sidebar-link">纹理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#_3d字体" class="sidebar-link">3D字体</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#光源辅助" class="sidebar-link">光源辅助</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#阴影" class="sidebar-link">阴影</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#raycaster射线拾取" class="sidebar-link">Raycaster射线拾取</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#模型加载" class="sidebar-link">模型加载</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#blender" class="sidebar-link">blender</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#图像优化" class="sidebar-link">图像优化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#顶点着色器" class="sidebar-link">顶点着色器</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#three钩子" class="sidebar-link">THREE钩子</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#后期处理" class="sidebar-link">后期处理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#性能调优" class="sidebar-link">性能调优</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#向量" class="sidebar-link">向量</a></li></ul></li><li><a href="/docs/vue3响应式与组件渲染.html" class="sidebar-link">vue3响应式与组件渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#初始化环境" class="sidebar-link">初始化环境</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#工具库函数编写" class="sidebar-link">工具库函数编写</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#依赖收集与触发" class="sidebar-link">依赖收集与触发</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#reactive和computed" class="sidebar-link">reactive和computed</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#组件渲染" class="sidebar-link">组件渲染</a></li></ul></li><li><a href="/docs/前端渲染大量数据方案.html" class="sidebar-link">前端渲染大量数据方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#效果演示" class="sidebar-link">效果演示</a></li></ul></li><li><a href="/docs/yapi.html" class="sidebar-link">yapi</a></li><li><a href="/docs/递归转while.html" class="sidebar-link">递归转while</a></li><li><a href="/docs/实现promise.all方法.html" class="sidebar-link">实现promise.all方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/vue3+tsx+keepAlive.html" class="sidebar-link">vue3+tsx+keepAlive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#路由定义" class="sidebar-link">路由定义</a></li><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#组件keep-alive" class="sidebar-link">组件keep-alive</a></li></ul></li><li><a href="/docs/Vue3+Electron.html" class="sidebar-link">Vue3+Electron</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#打包" class="sidebar-link">打包</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#报错" class="sidebar-link">报错</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#处理preload" class="sidebar-link">处理preload</a></li></ul></li><li><a href="/docs/ts重新设置类型.html" class="sidebar-link">ts重新设置类型</a></li><li><a href="/docs/ts指定key类型和其余任意key类型.html" class="sidebar-link">ts指定key类型和其余任意key类型</a></li><li><a href="/docs/ts将可选字段转化为必填字段.html" class="sidebar-link">ts将可选字段转化为必填字段</a></li><li><a href="/docs/ts定义必填属性，其余必须以指定开头为key.html" class="sidebar-link">ts定义必填属性，其余必须以指定开头为key</a></li><li><a href="/docs/skywalking.html" class="sidebar-link">skywalking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/skywalking.html#创建挂载卷" class="sidebar-link">创建挂载卷</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#编写docker-compose-yml" class="sidebar-link">编写docker-compose.yml</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#nodejs使用" class="sidebar-link">nodejs使用</a></li></ul></li><li><a href="/docs/sass.html" class="sidebar-link">sass</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sass.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#嵌套" class="sidebar-link">嵌套</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#混入" class="sidebar-link">混入</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#interpolation" class="sidebar-link">Interpolation</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#if-else" class="sidebar-link">@if @else</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#for" class="sidebar-link">@for</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#each" class="sidebar-link">@each</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#while" class="sidebar-link">@while</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#function" class="sidebar-link">@function</a></li></ul></li><li><a href="/docs/rollup简要笔记.html" class="sidebar-link">rollup简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改tsconfig-json" class="sidebar-link">修改tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写src-index-ts" class="sidebar-link">编写src/index.ts</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写rollup-config-js" class="sidebar-link">编写rollup.config.js</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改package-json" class="sidebar-link">修改package.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#打包" class="sidebar-link">打包</a></li></ul></li><li><a href="/docs/redis主从.html" class="sidebar-link">redis主从</a></li><li><a href="/docs/redis集群.html" class="sidebar-link">redis集群</a></li><li><a href="/docs/react+react-router-dom+redux.html" class="sidebar-link">react+react-router-dom+redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#导出具有ref的组件" class="sidebar-link">导出具有ref的组件</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#antd" class="sidebar-link">antd</a></li></ul></li><li><a href="/docs/react-navtive.html" class="sidebar-link">react-navtive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#版本信息" class="sidebar-link">版本信息</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#环境安装参考" class="sidebar-link">环境安装参考</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装jdk" class="sidebar-link">安装jdk</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#配置环境变量" class="sidebar-link">配置环境变量</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装-android-studio" class="sidebar-link">安装 Android Studio</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#小技巧" class="sidebar-link">小技巧</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#真机调试" class="sidebar-link">真机调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#错误处理" class="sidebar-link">错误处理</a></li></ul></li><li><a href="/docs/prometheus-docker.html" class="sidebar-link">prometheus-docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#prometheus主机-192-168-2-200" class="sidebar-link">prometheus主机（192.168.2.200）：</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#被监控主机-192-168-2-201" class="sidebar-link">被监控主机（192.168.2.201）:</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#使用" class="sidebar-link">使用</a></li></ul></li><li><a href="/docs/onlyoffice.html" class="sidebar-link">onlyoffice</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#部署-onlyoffice" class="sidebar-link">部署 onlyoffice</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/nuxt3笔记.html" class="sidebar-link">nuxt3笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#布局系统" class="sidebar-link">布局系统</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求" class="sidebar-link">请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#动态请求" class="sidebar-link">动态请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求代理" class="sidebar-link">请求代理</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#服务端中间件" class="sidebar-link">服务端中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#状态管理-组合逻辑" class="sidebar-link">状态管理(组合逻辑)</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#sass" class="sidebar-link">sass</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#环境判断" class="sidebar-link">环境判断</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#全局css注入" class="sidebar-link">全局css注入</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#使用阿里图标库" class="sidebar-link">使用阿里图标库</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#配置路径别名" class="sidebar-link">配置路径别名</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#pinia使用" class="sidebar-link">pinia使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#自定义指令" class="sidebar-link">自定义指令</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#装饰器的使用" class="sidebar-link">装饰器的使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#seo" class="sidebar-link">seo</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#客户端特定渲染" class="sidebar-link">客户端特定渲染</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#打包部署" class="sidebar-link">打包部署</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#其他问题" class="sidebar-link">其他问题</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#追加" class="sidebar-link">追加</a></li></ul></li><li><a href="/docs/nuxt3.html" class="sidebar-link">nuxt3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#动态路由" class="sidebar-link">动态路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#_404页面" class="sidebar-link">404页面</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#layout" class="sidebar-link">layout</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组合逻辑" class="sidebar-link">组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#三方插件pinia代替组合逻辑" class="sidebar-link">三方插件pinia代替组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#全局样式" class="sidebar-link">全局样式</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#其他" class="sidebar-link">其他</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#未解决的问题" class="sidebar-link">未解决的问题</a></li></ul></li><li><a href="/docs/nginx简要笔记.html" class="sidebar-link">nginx简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#root" class="sidebar-link">root</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#路径匹配" class="sidebar-link">路径匹配</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#proxy-pass" class="sidebar-link">proxy_pass</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#http升级https" class="sidebar-link">http升级https</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#跨域代理" class="sidebar-link">跨域代理</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#gzip压缩" class="sidebar-link">gzip压缩</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#完整示例" class="sidebar-link">完整示例</a></li></ul></li><li><a href="/docs/Nginx.html" class="sidebar-link">Nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Nginx.html#中间件架构" class="sidebar-link">中间件架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器架构" class="sidebar-link">代理服务器架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的安装和使用" class="sidebar-link">Nginx的安装和使用</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的请求限制配置" class="sidebar-link">Nginx的请求限制配置</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的web静态资源服务" class="sidebar-link">Nginx的Web静态资源服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器" class="sidebar-link">代理服务器</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx代理服务" class="sidebar-link">Nginx代理服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#负载均衡调度slb" class="sidebar-link">负载均衡调度SLB</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#动态缓存" class="sidebar-link">动态缓存</a></li></ul></li><li><a href="/docs/nexus3.html" class="sidebar-link">nexus3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nexus3.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#npm" class="sidebar-link">npm</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#docker" class="sidebar-link">docker</a></li></ul></li><li><a href="/docs/nest-GRPC.html" class="sidebar-link">nest-GRPC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-a" class="sidebar-link">nest-a</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-b" class="sidebar-link">nest-b</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#验收" class="sidebar-link">验收</a></li></ul></li><li><a href="/docs/mysql8&amp;json.html" class="sidebar-link">mysql8&amp;json</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#部署mysql8" class="sidebar-link">部署mysql8</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#结合nestjs" class="sidebar-link">结合nestjs</a></li></ul></li><li><a href="/docs/nestjs单元测试.html" class="sidebar-link">nestjs单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#前置代码" class="sidebar-link">前置代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#测试代码" class="sidebar-link">测试代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#修改package-json配置" class="sidebar-link">修改package.json配置</a></li></ul></li><li><a href="/docs/nestjs+typeorm定时建表，动态查询表.html" class="sidebar-link">nestjs+typeorm定时建表，动态查询表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定义实体" class="sidebar-link">定义实体</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定时创建表" class="sidebar-link">定时创建表</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#动态查询表" class="sidebar-link">动态查询表</a></li></ul></li><li><a href="/docs/nest.html" class="sidebar-link">nest</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest.html#项目生成" class="sidebar-link">项目生成</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#依赖安装" class="sidebar-link">依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#过滤器" class="sidebar-link">过滤器</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#守卫-权限验证" class="sidebar-link">守卫（权限验证）</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#集成安装过滤器、守卫、api文档和安全设置" class="sidebar-link">集成安装过滤器、守卫、api文档和安全设置</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#数据库" class="sidebar-link">数据库</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#测试案例" class="sidebar-link">测试案例</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件和子模块加入" class="sidebar-link">中间件和子模块加入</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#文件操作" class="sidebar-link">文件操作</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#定时任务" class="sidebar-link">定时任务</a></li></ul></li><li><a href="/docs/mysql.html" class="sidebar-link">mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql.html#使用docker安装mysql" class="sidebar-link">使用docker安装mysql</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#创建测试数据库并生成测试数据" class="sidebar-link">创建测试数据库并生成测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#基础查询" class="sidebar-link">基础查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见内置函数" class="sidebar-link">常见内置函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#连接查询-多表查询" class="sidebar-link">连接查询(多表查询)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#查询关键字执行顺序" class="sidebar-link">查询关键字执行顺序</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#插入" class="sidebar-link">插入</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#修改" class="sidebar-link">修改</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#库的管理" class="sidebar-link">库的管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#表达管理" class="sidebar-link">表达管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见数据类型" class="sidebar-link">常见数据类型</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见约束" class="sidebar-link">常见约束</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#视图-用的少" class="sidebar-link">视图(用的少)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#锁" class="sidebar-link">锁</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#存储过程和函数" class="sidebar-link">存储过程和函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#循环" class="sidebar-link">循环</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#递归查询" class="sidebar-link">递归查询</a></li></ul></li><li><a href="/docs/MinIO.html" class="sidebar-link">MinIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/MinIO.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/MinIO.html#在nestjs中使用" class="sidebar-link">在nestjs中使用</a></li></ul></li><li><a href="/docs/mariadb主从.html" class="sidebar-link">mariadb主从</a></li><li><a href="/docs/lodash源码阅读-cloneDeep.html" class="sidebar-link">lodash源码阅读-cloneDeep</a></li><li><a href="/docs/kafka-nestjs.html" class="sidebar-link">kafka-nestjs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#kafka基础概念" class="sidebar-link">kafka基础概念</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#部署-3个节点" class="sidebar-link">部署(3个节点)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#结合nestjs-使用kafkajs" class="sidebar-link">结合nestjs(使用kafkajs)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/js通过字符串拿到对象属性.html" class="sidebar-link">js通过字符串拿到对象属性</a></li><li><a href="/docs/js判断对象是否存在某个属性.html" class="sidebar-link">js判断对象是否存在某个属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#直接判断是否等于undefined" class="sidebar-link">直接判断是否等于undefined</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#object-keys" class="sidebar-link">Object.keys</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#hasownproperty" class="sidebar-link">hasOwnProperty</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#in" class="sidebar-link">in</a></li></ul></li><li><a href="/docs/实现new.html" class="sidebar-link">实现new</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现new.html#new的过程发生了什么" class="sidebar-link">new的过程发生了什么</a></li><li class="sidebar-sub-header"><a href="/docs/实现new.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/gsap.html" class="sidebar-link">gsap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gsap.html#to" class="sidebar-link">to</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#from" class="sidebar-link">from</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#timeline" class="sidebar-link">timeline</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#ticker" class="sidebar-link">ticker</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#exportroot" class="sidebar-link">exportRoot</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#getproperty" class="sidebar-link">getProperty</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#gettweensof" class="sidebar-link">getTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#istweening" class="sidebar-link">isTweening</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#killtweensof" class="sidebar-link">killTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmedia" class="sidebar-link">matchMedia</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmediarefresh" class="sidebar-link">matchMediaRefresh</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#random" class="sidebar-link">random</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#flip" class="sidebar-link">Flip</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#draggable" class="sidebar-link">Draggable</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#motionpathplugin" class="sidebar-link">MotionPathPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#observer" class="sidebar-link">Observer</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltoplugin" class="sidebar-link">ScrollToPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#textplugin" class="sidebar-link">TextPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltrigger" class="sidebar-link">scrollTrigger</a></li></ul></li><li><a href="/docs/graphgl(nest).html" class="sidebar-link">graphgl(nest)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#nest项目生成-依赖安装" class="sidebar-link">nest项目生成&amp;&amp;依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#schema" class="sidebar-link">schema</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#database" class="sidebar-link">database</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#resolver" class="sidebar-link">resolver</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#访问" class="sidebar-link">访问</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#参数" class="sidebar-link">参数</a></li></ul></li><li><a href="/docs/gitlab(docker)+git免密+CICD.html" class="sidebar-link">gitlab(docker)+git免密+CICD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab" class="sidebar-link">安装gitlab</a></li><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab-runner-ci-cd" class="sidebar-link">安装gitlab-runner(CI/CD)</a></li></ul></li><li><a href="/docs/elasticsearch.html" class="sidebar-link">elasticsearch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#docker部署elasticsearch" class="sidebar-link">docker部署elasticsearch</a></li><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#ik分词器添加" class="sidebar-link">ik分词器添加</a></li></ul></li><li><a href="/docs/EFK.html" class="sidebar-link">EFK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/EFK.html#拉取镜像" class="sidebar-link">拉取镜像</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#elasticsearch" class="sidebar-link">ElasticSearch</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#kibana" class="sidebar-link">Kibana</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#filebeat" class="sidebar-link">FileBeat</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#设置密码" class="sidebar-link">设置密码</a></li></ul></li><li><a href="/docs/docker安装zookeeper集群.html" class="sidebar-link">docker安装zookeeper集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#最新版本报错找不到端口-百度说最新的发行版有问题-回到3-4-13版本" class="sidebar-link">最新版本报错找不到端口，百度说最新的发行版有问题，回到3.4.13版本</a></li><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#后台运行-compose-project-name-zk-test-docker-compose-up-d-zk-test自定义名称" class="sidebar-link">后台运行 COMPOSEPROJECTNAME=zktest docker-compose up -d （zktest自定义名称）</a></li></ul></li><li><a href="/docs/docker-compose部署redis.html" class="sidebar-link">docker-compose部署redis</a></li><li><a href="/docs/js this指向.html" class="sidebar-link">js this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js this指向.html#常规" class="sidebar-link">常规</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#call、apply和bind" class="sidebar-link">call、apply和bind</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li><a href="/docs/css高度从0过渡到auto.html" class="sidebar-link">css高度从0过渡到auto</a></li><li><a href="/docs/console.html" class="sidebar-link">console</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/console.html#常用方法" class="sidebar-link">常用方法</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#部分实例" class="sidebar-link">部分实例</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#css" class="sidebar-link">css</a></li></ul></li><li><a href="/docs/class-validator自定义校验.html" class="sidebar-link">class-validator自定义校验</a></li><li><a href="/docs/class-validator 验证装饰器.html" class="sidebar-link">class-validator 验证装饰器</a></li><li><a href="/docs/Blob 下载文件时 type 类型 大全.html" class="sidebar-link">Blob 下载文件时 type 类型 大全</a></li><li><a href="/docs/自定义装饰器校验数据.html" class="sidebar-link">自定义装饰器校验数据</a></li><li><a href="/docs/网站换肤.html" class="sidebar-link">网站换肤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#创建项目-安装依赖" class="sidebar-link">创建项目&amp;安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编写sass文件" class="sidebar-link">编写sass文件</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编辑vite-config-ts" class="sidebar-link">编辑vite.config.ts</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/算法-KMP.html" class="sidebar-link">算法-KMP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#个人理解" class="sidebar-link">个人理解</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#最长相等前后缀" class="sidebar-link">最长相等前后缀</a></li></ul></li><li><a href="/docs/算法-bf.html" class="sidebar-link">算法-bf</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#举例" class="sidebar-link">举例</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/算法-希尔排序.html" class="sidebar-link">算法-希尔排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-直接插入排序.html" class="sidebar-link">算法-直接插入排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#算法描述" class="sidebar-link">算法描述</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#适用范围" class="sidebar-link">适用范围</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#个人理解" class="sidebar-link">个人理解</a></li></ul></li><li><a href="/docs/算法-快速排序.html" class="sidebar-link">算法-快速排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-简单选择排序.html" class="sidebar-link">算法-简单选择排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-赫夫曼编码.html" class="sidebar-link">算法-赫夫曼编码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#工作原理" class="sidebar-link">工作原理</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#赫夫曼树" class="sidebar-link">赫夫曼树</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-回溯法与八皇后问题.html" class="sidebar-link">算法-回溯法与八皇后问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#八皇后问题" class="sidebar-link">八皇后问题</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#回溯法" class="sidebar-link">回溯法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/算法-汉诺塔.html" class="sidebar-link">算法-汉诺塔</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#玩法" class="sidebar-link">玩法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-斐波那契数列.html" class="sidebar-link">算法-斐波那契数列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-二分查找.html" class="sidebar-link">算法-二分查找</a></li><li><a href="/docs/算法-堆排序.html" class="sidebar-link">算法-堆排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#前置名词解释" class="sidebar-link">前置名词解释</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-度量方法.html" class="sidebar-link">算法-度量方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#时间复杂度" class="sidebar-link">时间复杂度</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#大o计数法" class="sidebar-link">大O计数法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#常用时间复杂度排序" class="sidebar-link">常用时间复杂度排序</a></li></ul></li><li><a href="/docs/数据结构-图.html" class="sidebar-link">数据结构-图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的存储" class="sidebar-link">图的存储</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的遍历" class="sidebar-link">图的遍历</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最小生成树" class="sidebar-link">最小生成树</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最短路径" class="sidebar-link">最短路径</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aov网" class="sidebar-link">AOV网</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aoe网" class="sidebar-link">AOE网</a></li></ul></li><li><a href="/docs/数据结构-散列表.html" class="sidebar-link">数据结构-散列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列表" class="sidebar-link">散列表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列函数" class="sidebar-link">散列函数</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列地址" class="sidebar-link">散列地址</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列冲突" class="sidebar-link">散列冲突</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#处理冲突的方法" class="sidebar-link">处理冲突的方法</a></li></ul></li><li><a href="/docs/数据结构-平衡二叉树.html" class="sidebar-link">数据结构-平衡二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉排序树.html" class="sidebar-link">数据结构-二叉排序树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#性质" class="sidebar-link">性质</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉树.html" class="sidebar-link">数据结构-二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉树.html#定义" class="sidebar-link">定义</a></li></ul></li><li><a href="/docs/数据结构-栈&amp;队列.html" class="sidebar-link">数据结构-栈&amp;队列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#栈" class="sidebar-link">栈</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#队列" class="sidebar-link">队列</a></li></ul></li><li><a href="/docs/数据结构-链表.html" class="sidebar-link">数据结构-链表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#单向链表" class="sidebar-link">单向链表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#双向链表" class="sidebar-link">双向链表</a></li></ul></li><li><a href="/docs/ca自签名+配置https.html" class="sidebar-link">ca自签名+配置https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成私钥" class="sidebar-link">生成私钥</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成csr-证书签名请求" class="sidebar-link">生成CSR（证书签名请求）</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#删除私钥中的密码" class="sidebar-link">删除私钥中的密码</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成自签名证书" class="sidebar-link">生成自签名证书</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#express使用" class="sidebar-link">express使用</a></li></ul></li><li><a href="/docs/centos7安装docker.html" class="sidebar-link">centos7安装docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#更新yum包-安装需要的软件包" class="sidebar-link">更新yum包&amp;安装需要的软件包</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#设置yum源-选择其中一个-我选的阿里仓库" class="sidebar-link">设置yum源（选择其中一个,我选的阿里仓库）</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker" class="sidebar-link">安装Docker</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#启动docker-并加入开机启动" class="sidebar-link">启动Docker,并加入开机启动</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#配置阿里云加速-否则不能下载镜像" class="sidebar-link">配置阿里云加速，否则不能下载镜像</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker-compose" class="sidebar-link">安装docker-compose</a></li></ul></li><li><a href="/docs/centos7搭建vsftp.html" class="sidebar-link">centos7搭建vsftp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#安装应用" class="sidebar-link">安装应用</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#备份配置文件" class="sidebar-link">备份配置文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建载体用户" class="sidebar-link">创建载体用户</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#修改载体用户目录权限" class="sidebar-link">修改载体用户目录权限</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建虚拟用户表" class="sidebar-link">创建虚拟用户表</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#生成db文件" class="sidebar-link">生成db文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#设置认证文件pam" class="sidebar-link">设置认证文件PAM</a></li></ul></li><li><a href="/docs/linux安装mysql.html" class="sidebar-link">linux安装mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置mysql-8-0安装源" class="sidebar-link">配置Mysql 8.0安装源</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#安装mysql-8-0" class="sidebar-link">安装Mysql 8.0</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#启动mysql服务" class="sidebar-link">启动mysql服务</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#拿到临时密码" class="sidebar-link">拿到临时密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#登录" class="sidebar-link">登录</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#查看当前的密码验证策略" class="sidebar-link">查看当前的密码验证策略</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#重设密码" class="sidebar-link">重设密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置远程访问" class="sidebar-link">配置远程访问</a></li></ul></li><li><a href="/docs/安全连接远程linux.html" class="sidebar-link">安全连接远程linux</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="three-js渲染地图"><a href="#three-js渲染地图" class="header-anchor">#</a> <center>THREE.js渲染地图</center></h1> <p>使用vite+vue3+THREE.js渲染地图</p> <h2 id="效果演示"><a href="#效果演示" class="header-anchor">#</a> 效果演示</h2> <p><img src="/docs/gifs/threejs渲染地图效果.gif"></p> <h2 id="前置说明"><a href="#前置说明" class="header-anchor">#</a> 前置说明</h2> <p>以前用Echarts渲染地图时，直接一股脑把geojson扔到Echarts中就直接渲染完成了，但在threejs中需要手动绘制，是以需要对geojson有所了解。</p> <p>geojson中最基础的是坐标，类型是<code>[number, number]</code>,其余形状都是由坐标组成。 geojson有7中形状，分别是：</p> <ul><li>Point:点</li> <li>MultiPoint: 多个点</li> <li>LineString: 线</li> <li>MultiLineString: 多条线</li> <li>Polygon: 面,一个面至少是一个环(首位坐标一样的线)</li> <li>MultiPolygon: 多面</li> <li>GeometryCollection: 集合,可以是以上任一</li></ul> <h2 id="定义类型"><a href="#定义类型" class="header-anchor">#</a> 定义类型</h2> <p>需要用到d3 geoMercator，但d3的类型有些问题，安装了但没有效果，先给d3定义</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> vite-env.d.ts
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'*.glsl'</span> <span class="token punctuation">{</span> <span class="token comment">// glsl</span>
    <span class="token keyword">const</span> value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Coordinate</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token comment">// 坐标</span>
<span class="token keyword">interface</span> <span class="token class-name">GeoMercator</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>coordinate<span class="token operator">:</span> Coordinate<span class="token punctuation">)</span> <span class="token operator">:</span> Coordinate
    <span class="token function-variable function">center</span><span class="token operator">:</span> <span class="token punctuation">(</span>coordinate<span class="token operator">:</span> Coordinate<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> GeoMercator
    <span class="token function-variable function">scale</span><span class="token operator">:</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> GeoMercator
    <span class="token function-variable function">translate</span><span class="token operator">:</span> <span class="token punctuation">(</span>oordinate<span class="token operator">:</span> Coordinate<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> GeoMercator
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'d3'</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">geoMercator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> GeoMercator
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>定义geojson类型</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> src/type/index.ts
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">type</span> <span class="token class-name">Ref</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// 我不是渲染在整个窗口，而是部分窗口，定义部分窗口尺寸</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CtxSize</span> <span class="token operator">=</span> Ref<span class="token operator">&lt;</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span> 

<span class="token comment">// /**</span>
<span class="token comment">//  * @description 坐标</span>
<span class="token comment">// */</span>
<span class="token comment">// export type Coordinate = [number, number]</span>

<span class="token comment">/**
 * @description 点
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;Point&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 多个点
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MultiPoint</span>  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;MultiPoint&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 线
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">LineString</span>  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;LineString&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 多条线
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MultiLineString</span>  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;MultiLineString&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 多边形
 * @description 多条环形线组成的图形
 * @description 第一个环为外环，其余为内环
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Polygon</span>  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;Polygon&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 多个多边形
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MultiPolygon</span>  <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;MultiPolygon&quot;</span>
    coordinates<span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description 形状
 * @description 可以是点、多个点、线、多条线、多边形、多个多边形
*/</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Geometry</span> <span class="token operator">=</span> Point <span class="token operator">|</span> MultiPoint <span class="token operator">|</span> LineString <span class="token operator">|</span> MultiLineString <span class="token operator">|</span> Polygon <span class="token operator">|</span> MultiPolygon<span class="token punctuation">;</span>
<span class="token comment">/**
 * @description 多个形状
*/</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GeometryCollection</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'GeometryCollection'</span><span class="token punctuation">;</span>
    geometries<span class="token operator">:</span> Geometry<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Feature</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'Feature'</span><span class="token punctuation">;</span>
    geometry<span class="token operator">:</span> Geometry <span class="token operator">|</span> GeometryCollection<span class="token punctuation">;</span>
    properties<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">FeatureCollection</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'FeatureCollection'</span><span class="token punctuation">;</span>
    features<span class="token operator">:</span> Feature<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="实现思路"><a href="#实现思路" class="header-anchor">#</a> 实现思路</h2> <ul><li>geojson中的点、线、多边形都是由一个个经纬度坐标组成，先将经纬度坐标转换为平面坐标，这个直接使用d3提供的方法就行</li> <li>将坐标转换为平面坐标后，转化成threejs中的点、线、面，然后将它们组合起来，最后渲染出来。</li> <li>飞线的原理是通过两个点求出两点的中点，给一个高度给中点，用插值法得到一条曲线，在曲线上裁剪出数量合适的点位连接起来就是一条曲线，即飞线</li> <li>飞线高亮的原理是截取飞线的某一段的点，组成一组Points，将这组Points设置下别的颜色再缩放渲染就可造成高亮效果，在根据时间重复刚才动作即可形成动画</li></ul> <h2 id="实现代码"><a href="#实现代码" class="header-anchor">#</a> 实现代码</h2> <p>有些资源比较大，使用indexDB缓存到本地.封装下indexDB</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> src/utils/fileStore.ts
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Row</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span>
    blob<span class="token operator">:</span> Blob
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> dbName <span class="token operator">=</span> <span class="token string">'file-store'</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> tableName <span class="token operator">=</span> <span class="token string">'file-table'</span>
    <span class="token keyword">private</span> db<span class="token operator">:</span> IDBDatabase <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> dbVersion<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token keyword">as</span> IDBDatabase
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>db<span class="token punctuation">.</span>objectStoreNames<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> objectStore <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">createObjectStore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">,</span> <span class="token punctuation">{</span> keyPath<span class="token operator">:</span> <span class="token string">'path'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            objectStore<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">,</span> <span class="token string">'path'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> unique<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> objectStore
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">,</span> <span class="token string">'readwrite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IDBDatabase<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> request <span class="token operator">=</span> indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dbName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dbVersion<span class="token punctuation">)</span>
            request<span class="token punctuation">.</span><span class="token function-variable function">onupgradeneeded</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token keyword">as</span> IDBOpenDBRequest<span class="token punctuation">)</span><span class="token punctuation">.</span>result
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            request<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token keyword">as</span> IDBOpenDBRequest<span class="token punctuation">)</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            request<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">add</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> blob<span class="token operator">:</span> Blob<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                path<span class="token punctuation">,</span>
                blob
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">get</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>result<span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token function-variable function">condition</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> Row<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Row<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> models<span class="token operator">:</span> Row<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> cursor <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token keyword">as</span> IDBRequest<span class="token punctuation">)</span><span class="token punctuation">.</span>result
                <span class="token keyword">if</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">condition</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        models<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cursor<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    cursor<span class="token punctuation">.</span><span class="token function">continue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>models<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">put</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> blob<span class="token operator">:</span> Blob<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                path<span class="token punctuation">,</span>
                blob
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token keyword">delete</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getObjectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>开始画地图</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">vim</span> src/components/Map.vue
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ev =&gt; wrapper = (ev as HTMLDivElement)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    type CtxSize<span class="token punctuation">,</span>
    type FeatureCollection<span class="token punctuation">,</span>
    type Geometry<span class="token punctuation">,</span>
    type GeometryCollection<span class="token punctuation">,</span>
    type LineString<span class="token punctuation">,</span>
    type MultiLineString<span class="token punctuation">,</span>
    type MultiPoint<span class="token punctuation">,</span>
    type MultiPolygon<span class="token punctuation">,</span>
    type Point<span class="token punctuation">,</span>
    type Polygon<span class="token punctuation">,</span>
    <span class="token comment">// type Coordinate</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/type/index'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    Scene<span class="token punctuation">,</span>
    AmbientLight<span class="token punctuation">,</span>
    DirectionalLight<span class="token punctuation">,</span>
    PerspectiveCamera<span class="token punctuation">,</span>
    WebGLRenderer<span class="token punctuation">,</span>
    PCFSoftShadowMap<span class="token punctuation">,</span>
    ReinhardToneMapping<span class="token punctuation">,</span>
    Mesh<span class="token punctuation">,</span>
    PlaneGeometry<span class="token punctuation">,</span>
    ShaderMaterial<span class="token punctuation">,</span>
    DoubleSide<span class="token punctuation">,</span>
    Vector3<span class="token punctuation">,</span>
    Raycaster<span class="token punctuation">,</span>
    AxesHelper<span class="token punctuation">,</span>
    Object3D<span class="token punctuation">,</span>
    Shape<span class="token punctuation">,</span>
    MeshStandardMaterial<span class="token punctuation">,</span>
    ExtrudeGeometry<span class="token punctuation">,</span>
    Color<span class="token punctuation">,</span>
    BufferGeometry<span class="token punctuation">,</span>
    LineBasicMaterial<span class="token punctuation">,</span>
    Line<span class="token punctuation">,</span>
    Group<span class="token punctuation">,</span>
    Box3<span class="token punctuation">,</span>
    Box3Helper<span class="token punctuation">,</span>
    MeshBasicMaterial<span class="token punctuation">,</span>
    Vector2<span class="token punctuation">,</span>
    BufferAttribute<span class="token punctuation">,</span>
    SphereGeometry<span class="token punctuation">,</span>
    CylinderGeometry<span class="token punctuation">,</span>
    CatmullRomCurve3<span class="token punctuation">,</span>
    PointsMaterial<span class="token punctuation">,</span>
    Points<span class="token punctuation">,</span>
    Clock<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'three'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> inject<span class="token punctuation">,</span> onBeforeUnmount<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    type Font<span class="token punctuation">,</span>
    FontLoader<span class="token punctuation">,</span>
    OrbitControls<span class="token punctuation">,</span>
    TextGeometry<span class="token punctuation">,</span>
    TextGeometryParameters
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'three/examples/jsm/Addons.js'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> base <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/config'</span> <span class="token comment">// 这个不用关心，因为我部署的位置不是服务器的根路径</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> geoMercator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'d3'</span>
<span class="token keyword">import</span> <span class="token constant">GUI</span> <span class="token keyword">from</span> <span class="token string">'lil-gui'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    CSS2DRenderer<span class="token punctuation">,</span>
    <span class="token comment">// CSS2DObject</span>
    <span class="token comment">// @ts-ignore</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'three/examples/jsm/renderers/CSS2DRenderer'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/fileStore'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> gsap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gsap'</span>

<span class="token keyword">const</span> ctxSize <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'ctxSize'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> CtxSize
<span class="token keyword">let</span> <span class="token literal-property property">wrapper</span><span class="token operator">:</span> HTMLDivElement
<span class="token keyword">let</span> <span class="token literal-property property">loadingBar</span><span class="token operator">:</span> HTMLDivElement


<span class="token keyword">interface</span> <span class="token class-name">WorldOptions</span> <span class="token punctuation">{</span>
    axesHelperSize<span class="token operator">?</span><span class="token operator">:</span> number
    ambientLight<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
        <span class="token literal-property property">intensity</span><span class="token operator">:</span> number
    <span class="token punctuation">}</span>
    directionalLight<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
        <span class="token literal-property property">intensity</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
        <span class="token literal-property property">position</span><span class="token operator">:</span> Vector3
    <span class="token punctuation">}</span>
    <span class="token literal-property property">ctxSize</span><span class="token operator">:</span> CtxSize
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">World</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> debugUI <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">flyLineHighligh</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">39</span><span class="token punctuation">,</span>
            <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">defaultColor</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x0000ff</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">hoverColor</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">axesHelper</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> readonly gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> readonly raycaster<span class="token operator">:</span> Raycaster
    <span class="token keyword">private</span> readonly mouse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 鼠标是否移动过。坐标默认是(0,0)，防止直接选中默认地块</span>
    <span class="token keyword">private</span> moused <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">private</span> readonly scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> readonly camera<span class="token operator">:</span> PerspectiveCamera
    <span class="token keyword">private</span> readonly renderer<span class="token operator">:</span> WebGLRenderer
    <span class="token keyword">private</span> readonly controls<span class="token operator">:</span> OrbitControls

    <span class="token keyword">private</span> readonly clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> previusTime <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">private</span> <span class="token literal-property property">requestAnimationFrameId</span><span class="token operator">:</span> number <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>

    <span class="token keyword">private</span> <span class="token literal-property property">axesHelper</span><span class="token operator">:</span> AxesHelper
    <span class="token keyword">private</span> <span class="token literal-property property">overlayMesh</span><span class="token operator">:</span> Mesh<span class="token operator">&lt;</span>PlaneGeometry<span class="token punctuation">,</span> ShaderMaterial<span class="token operator">&gt;</span>
    <span class="token keyword">public</span> <span class="token literal-property property">geoJson</span><span class="token operator">:</span> FeatureCollection <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token keyword">as</span> unknown <span class="token keyword">as</span> FeatureCollection

    <span class="token keyword">private</span> readonly offsetXY <span class="token operator">=</span> <span class="token function">geoMercator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> readonly labelRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CSS2DRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> readonly fontLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 3d字体url,CSS2DObject渲染效果差点意思</span>
    <span class="token comment">// private readonly fontPath = `${base}fonts3d/Alibaba PuHuiTi_Regular.json`</span>
    <span class="token keyword">private</span> readonly fontPath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">fonts3d/Microsoft YaqiHei Light_Regular.json</span><span class="token template-punctuation string">`</span></span>
    <span class="token comment">// 3d字体</span>
    <span class="token keyword">private</span> <span class="token literal-property property">font</span><span class="token operator">:</span> Font <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span> <span class="token keyword">as</span> unknown <span class="token keyword">as</span> Font
    <span class="token comment">// 地图点形状(本次下载地图貌似没有点)</span>
    <span class="token keyword">private</span> readonly ponitGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SphereGeometry</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token comment">// 地图点材质(本次下载地图貌似没有点)</span>
    <span class="token keyword">private</span> readonly ponitMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x00ff00</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 地图线材质(本次下载地图貌似没有线)</span>
    <span class="token keyword">private</span> readonly lineMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x00ff00</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 地图块上边线材质</span>
    <span class="token keyword">private</span> readonly uplineMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 地图块下边线材质</span>
    <span class="token keyword">private</span> readonly downlineMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x0000ff</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 地图块默认颜色</span>
    <span class="token keyword">private</span> readonly defaultPolygonColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x0000ff</span><span class="token punctuation">)</span>
    <span class="token comment">// 地图块hover颜色</span>
    <span class="token keyword">private</span> readonly hoverPolygonColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span>

    <span class="token comment">// 需要检测的地图块的父级</span>
    <span class="token keyword">private</span> readonly needCheckItem<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> Mesh<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> Object3D <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// 需要检测的地图块。优化一下，提取出来不用每次都去遍历</span>
    <span class="token keyword">private</span> readonly needCheckItemKey<span class="token operator">:</span> Mesh<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment">// 锥型柱子形状</span>
    <span class="token keyword">private</span> readonly pillarGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CylinderGeometry</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span>
    <span class="token comment">// 锥型柱子材质</span>
    <span class="token keyword">private</span> readonly pillarMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vertexShader</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            varying float y;
            void main() {
                y = position.y;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">fragmentShader</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            varying float y;
            void main() {
                float alpha = 0.8 - y;
                gl_FragColor = vec4(1.0 - alpha, 1.0, 1.0, alpha); 
            }
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 飞线材质</span>
    <span class="token keyword">private</span> readonly flyLineMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#ffffff'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 飞线点个数</span>
    <span class="token keyword">private</span> readonly flyLinePointsCount <span class="token operator">=</span> <span class="token number">1000</span>
    <span class="token comment">// 高亮飞线截取点个数 </span>
    <span class="token keyword">private</span> readonly flyLineHighlightSlicePointSize <span class="token operator">=</span> <span class="token number">50</span>
    <span class="token comment">// 高亮飞线截取位置个数 = 高亮飞线截取点个数  * 3</span>
    <span class="token keyword">private</span> readonly flyLineHighlightPositionSize <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightSlicePointSize <span class="token operator">*</span> <span class="token number">3</span>
    <span class="token comment">// 高亮飞线渐变开始颜色</span>
    <span class="token keyword">private</span> readonly flyLineHighlightPointStartColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x006666</span><span class="token punctuation">)</span>
    <span class="token comment">// 高亮飞线渐变结束颜色</span>
    <span class="token keyword">private</span> readonly flyLineHighlightPointEndColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0xffff00</span><span class="token punctuation">)</span>
    <span class="token comment">// 高亮飞线点材质</span>
    <span class="token keyword">private</span> readonly flyLineHighlightPointMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointsMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
        <span class="token literal-property property">vertexColors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// depthTest: false,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 高亮飞线状态保存，记录上次的截取位置</span>
    <span class="token keyword">private</span> readonly flyLineHighlightMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span>Points<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">line</span><span class="token operator">:</span> Line<span class="token punctuation">,</span> <span class="token literal-property property">index</span><span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 高亮飞线点池。数目是固定了，防止每帧都new 大量实例，优化下性能</span>
    <span class="token keyword">private</span> flyLineHighlightPointVec3Pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span>Vector3<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightSlicePointSize<span class="token punctuation">)</span>
    <span class="token comment">// 高亮飞线速度 3的倍数</span>
    <span class="token keyword">public</span> flyLineHighlightSpeed <span class="token operator">=</span> <span class="token number">39</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> <span class="token literal-property property">options</span><span class="token operator">:</span> WorldOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>camera <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>renderer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>controls <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initAmbientLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initDirectionalLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>axesHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AxesHelper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>axesHelperSize <span class="token operator">??</span> <span class="token number">25</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>axesHelper<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>axesHelper<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>raycaster <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initRaycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>overlayMesh <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initOverlayMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>overlayMesh<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initLabelRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">flyLineHighlightPointMaterialCorrection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initFlyLineHighlightPointVec3Pool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initRaycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> raycaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Raycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        raycaster<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">51</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> raycaster
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initFlyLineHighlightPointVec3Pool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightSlicePointSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointVec3Pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">flyLineHighlightPointMaterialCorrection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointMaterial<span class="token punctuation">.</span><span class="token function-variable function">onBeforeCompile</span> <span class="token operator">=</span> <span class="token parameter">shader</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">void main() {</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    attribute float percent;
                    void main() {
                </span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">)</span>
            shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gl_PointSize = size;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gl_PointSize = percent * size;</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">)</span>
            shader<span class="token punctuation">.</span>fragmentShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>fragmentShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#include &lt;output_fragment&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                #ifdef OPAQUE
                diffuseColor.a = 1.0;
                #endif
                // https://github.com/mrdoob/three.js/pull/22425
                #ifdef USE_TRANSMISSION
                diffuseColor.a *= transmissionAlpha + 0.1;
                #endif
                // 设置透明度变化
                float r = distance(gl_PointCoord, vec2(0.5, 0.5));
                // diffuseColor.a = diffuseColor.a*(1.0 - r/0.5);//透明度线性变化
                diffuseColor.a = diffuseColor.a*pow( 1.0 - r/0.5, 6.0 );//透明度非线性变化  参数2越大，gl_PointSize要更大，可以直接设置着色器代码，可以设置材质size属性
                gl_FragColor = vec4( outgoingLight, diffuseColor.a );
                </span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerspectiveCamera</span><span class="token punctuation">(</span>
            <span class="token number">75</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>height<span class="token punctuation">,</span>
            <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token number">3000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> camera
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">powerPreference</span><span class="token operator">:</span> <span class="token string">&quot;high-performance&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token string">'#1e1a20'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width<span class="token punctuation">,</span> ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> PCFSoftShadowMap<span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span>toneMapping <span class="token operator">=</span> ReinhardToneMapping
        renderer<span class="token punctuation">.</span>toneMappingExposure <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> renderer
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrbitControls</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>camera<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">0.1</span>
        controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">500</span>
        controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
        <span class="token comment">// controls.autoRotate = true;</span>
        <span class="token comment">// controls.autoRotateSpeed = 0.5;</span>
        <span class="token keyword">return</span> controls
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initAmbientLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmbientLight</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ambientLight<span class="token operator">?.</span>color <span class="token operator">??</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ambientLight<span class="token operator">?.</span>intensity <span class="token operator">??</span> <span class="token number">0.1</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">initDirectionalLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> directionalLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DirectionalLight</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>directionalLight<span class="token operator">?.</span>color <span class="token operator">??</span> <span class="token string">'#ffffff'</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>directionalLight<span class="token operator">?.</span>intensity <span class="token operator">??</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">const</span> directionalLightPosi <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>directionalLight<span class="token operator">?.</span>position <span class="token operator">??</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2.25</span><span class="token punctuation">)</span>
        directionalLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>directionalLightPosi<span class="token punctuation">)</span>
        directionalLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>near <span class="token operator">=</span> <span class="token number">0.1</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">initOverlayMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">side</span><span class="token operator">:</span> DoubleSide<span class="token punctuation">,</span>
                <span class="token literal-property property">depthWrite</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">uniforms</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">uAlpha</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">vertexShader</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    void main() {
                        gl_Position =  vec4(position, 1.0);
                    }
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">fragmentShader</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    uniform float uAlpha;
                    void main() {
                        gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);
                    }
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function-variable function">setMouse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>moused <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 将鼠标在wrapper内的位置映射到-1 ~ 1的范围内</span>
        <span class="token comment">// 防止不同屏幕分辨率计算出的位置不一致</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> y<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">axesHelperSwitch</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">bool</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>axesHelper<span class="token punctuation">.</span>visible <span class="token operator">=</span> bool
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 获取geojson
     * @desription https://datav.aliyun.com/portal/school/atlas/area_selector 可以获取
    */</span>
    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">fetchGeoJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>base<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">geo/china.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token literal-property property">json</span><span class="token operator">:</span> FeatureCollection <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>geoJson <span class="token operator">=</span> json
    <span class="token punctuation">}</span>

    <span class="token comment">/***
     * @description 初始化LabelRenderer
     * */</span>
    <span class="token keyword">private</span> <span class="token function">initLabelRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>pointerEvents <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span> <span class="token comment">// 防止覆盖OrbitControls</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>ctxSize<span class="token punctuation">.</span>value<span class="token punctuation">.</span>height
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 获取字体
    */</span>
    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">getFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>font<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>font
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fontPath<span class="token punctuation">)</span>
        <span class="token keyword">let</span> <span class="token literal-property property">blob</span><span class="token operator">:</span> Blob
        <span class="token keyword">if</span> <span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            blob <span class="token operator">=</span> row<span class="token punctuation">.</span>blob
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fontPath<span class="token punctuation">)</span>
            blob <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fontPath<span class="token punctuation">,</span> blob<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">reslove</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>fontLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token parameter">font</span> <span class="token operator">=&gt;</span> <span class="token function">reslove</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>font
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 生成文字
    */</span>
    <span class="token keyword">private</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>text<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">point</span><span class="token operator">:</span> Coordinate<span class="token punctuation">,</span> <span class="token literal-property property">depth</span><span class="token operator">:</span> number<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'#ff00ff'</span><span class="token punctuation">,</span> fontSize <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// const div = document.createElement('div')</span>
        <span class="token comment">// div.style.color = color </span>
        <span class="token comment">// div.style.fontSize = `${fontSize}px`</span>
        <span class="token comment">// div.textContent = text</span>
        <span class="token comment">// const label = new CSS2DObject(div)</span>
        <span class="token comment">// // label.rotation.set(0, 0, 0)</span>
        <span class="token comment">// label.scale.set(0.01, 0.01, 0.01)</span>
        <span class="token comment">// const [x, y] = offsetXY(point)</span>
        <span class="token comment">// label.position.set(x, -y, depth * 0.01);</span>
        <span class="token comment">// return label</span>

        <span class="token keyword">const</span> textGeometryOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">font</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>font<span class="token punctuation">,</span>
            <span class="token literal-property property">size</span><span class="token operator">:</span> fontSize<span class="token punctuation">,</span> <span class="token comment">//字体大小</span>
            <span class="token literal-property property">depth</span><span class="token operator">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token comment">//厚度</span>
            <span class="token literal-property property">curveSegments</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token comment">//弧线分段数，使得文字的曲线更加光滑</span>
            <span class="token literal-property property">bevelEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否使用倒角(弧形圆角，这个好像是占用字体外的空间，类似margin)，让文字有3d效果</span>
            <span class="token literal-property property">bevelThickness</span><span class="token operator">:</span> <span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token comment">//倒角厚度</span>
            <span class="token literal-property property">bevelSize</span><span class="token operator">:</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token comment">//倒角大小</span>
            <span class="token literal-property property">bevelOffset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//倒角偏移</span>
            <span class="token literal-property property">bevelSegments</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//倒角分段数</span>
            <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">anchor</span><span class="token operator">:</span> <span class="token string">&quot;bottom left&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token keyword">as</span> TextGeometryParameters

        <span class="token keyword">const</span> textGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextGeometry</span><span class="token punctuation">(</span>
            text<span class="token punctuation">,</span>
            textGeometryOptions
        <span class="token punctuation">)</span>
        textGeometry<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>
            <span class="token operator">-</span>textGeometryOptions<span class="token punctuation">.</span>bevelSize<span class="token operator">!</span><span class="token punctuation">,</span>
            textGeometryOptions<span class="token punctuation">.</span>bevelSize<span class="token operator">!</span><span class="token punctuation">,</span>
            textGeometryOptions<span class="token punctuation">.</span>bevelThickness<span class="token operator">!</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">const</span> textMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span>
            textGeometry<span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                color<span class="token punctuation">,</span>
                <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
                <span class="token literal-property property">side</span><span class="token operator">:</span> DoubleSide<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span>
        textMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
        textMesh<span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">0.25</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> textMesh
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">guiSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'地图'</span><span class="token punctuation">)</span>
        map<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>map<span class="token punctuation">,</span> <span class="token string">'hoverColor'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'地图选中颜色'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>hoverPolygonColor<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>map<span class="token punctuation">.</span>hoverColor<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> flyLineHighlight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'高亮飞线'</span><span class="token punctuation">)</span>
        flyLineHighlight
            <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>flyLineHighligh<span class="token punctuation">,</span> <span class="token string">'speed'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'高亮飞线速度'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">onFinishChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightSpeed <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>flyLineHighligh<span class="token punctuation">.</span>speed
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        flyLineHighlight<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>flyLineHighligh<span class="token punctuation">,</span> <span class="token string">'size'</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'高亮飞线大小'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">onFinishChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointMaterial<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>flyLineHighligh<span class="token punctuation">.</span>size
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> axesHelper <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'辅助轴'</span><span class="token punctuation">)</span>
        axesHelper<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>axesHelper<span class="token punctuation">,</span> <span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'显示\隐藏辅助轴'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">axesHelperSwitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>debugUI<span class="token punctuation">.</span>axesHelper<span class="token punctuation">.</span>show<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createMap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>geoJson<span class="token punctuation">)</span>
        <span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFromObject</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> boxHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box3Helper</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> <span class="token number">0xffff00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boxHelper<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>boxHelper<span class="token punctuation">)</span>
        <span class="token keyword">const</span> center <span class="token operator">=</span> box<span class="token punctuation">.</span><span class="token function">getCenter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        map<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> map<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> center<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        map<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> map<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">-</span> center<span class="token punctuation">.</span>y<span class="token punctuation">;</span>

        <span class="token keyword">const</span> mapGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Group</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        mapGroup<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>
        mapGroup<span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">0.08</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mapGroup<span class="token punctuation">)</span>

        wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
        wrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>setMouse<span class="token punctuation">)</span>
        wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>labelRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">guiSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 清理
    */</span>
    <span class="token keyword">public</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token literal-property property">meshs</span><span class="token operator">:</span> Mesh<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token keyword">instanceof</span> <span class="token class-name">Mesh</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> mesh <span class="token keyword">of</span> meshs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mesh<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>material<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>controls<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gui<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        wrapper<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>setMouse<span class="token punctuation">)</span>
        <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>requestAnimationFrameId <span class="token keyword">as</span> number<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 加载文件
    */</span>
    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchGeoJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>overlayMesh<span class="token punctuation">.</span>material<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uAlpha<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token literal-property property">ease</span><span class="token operator">:</span> <span class="token string">'power2.inOut'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">onComplete</span><span class="token operator">:</span> t
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 创建多边形的线段，双层
    */</span>
    <span class="token keyword">private</span> <span class="token function">createPolygonLine</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">line</span><span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">depth</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> points <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> lineGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFromPoints</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>
        <span class="token keyword">const</span> upLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>lineGeometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uplineMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> downLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>lineGeometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>downlineMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        downLine<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.0001</span><span class="token punctuation">;</span>
        upLine<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> depth <span class="token operator">+</span> <span class="token number">0.0001</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>upLine<span class="token punctuation">,</span> downLine<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 创建多边形
    */</span>
    <span class="token keyword">private</span> <span class="token function">createPolygonMesh</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">depth</span><span class="token operator">:</span> number<span class="token punctuation">,</span> color<span class="token operator">?</span><span class="token operator">:</span> Color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> meshs <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> shape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            element<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
                idx <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> shape<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">)</span> <span class="token operator">:</span> shape<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> shapeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtrudeGeometry</span><span class="token punctuation">(</span>shape<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                depth<span class="token punctuation">,</span>
                <span class="token literal-property property">bevelEnabled</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> shapematerial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">color</span><span class="token operator">:</span> color <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">side</span><span class="token operator">:</span> DoubleSide<span class="token punctuation">,</span>
                <span class="token literal-property property">transparent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span>shapeGeometry<span class="token punctuation">,</span> shapematerial<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'PolygonMesh'</span>
            <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPolygonLine</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                mesh<span class="token punctuation">,</span>
                line
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> meshs
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 创建点
     *
    */</span>
    <span class="token keyword">private</span> <span class="token function">createPoint</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">coordinates</span><span class="token operator">:</span> Coordinate<span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span>
        <span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ponitGeometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ponitMaterial<span class="token punctuation">)</span>
        mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
        <span class="token keyword">return</span> mesh
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @description 创建线条
    */</span>
    <span class="token keyword">private</span> <span class="token function">createLine</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">coordinates</span><span class="token operator">:</span> Coordinate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> count <span class="token operator">=</span> coordinates<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">3</span>
        <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
        <span class="token keyword">const</span> points <span class="token operator">=</span> coordinates<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> number<span class="token punctuation">,</span> number<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> points<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> i3 <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">3</span>
            position<span class="token punctuation">[</span>i3<span class="token punctuation">]</span> <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            position<span class="token punctuation">[</span>i3 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            position<span class="token punctuation">[</span>i3 <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> lineGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        lineGeometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferAttribute</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>lineGeometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lineMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> line
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description geo 类型Geometry的处理方法
    */</span>
    <span class="token keyword">private</span> <span class="token function">geometryHandle</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">geometry</span><span class="token operator">:</span> Geometry<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token literal-property property">meshs</span><span class="token operator">:</span> <span class="token punctuation">(</span>Mesh <span class="token operator">|</span> Line<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Point'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPoint</span><span class="token punctuation">(</span><span class="token punctuation">(</span>geometry <span class="token keyword">as</span> Point<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'MultiPoint'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>geometry <span class="token keyword">as</span> MultiPoint<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPoint</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'LineString'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createLine</span><span class="token punctuation">(</span><span class="token punctuation">(</span>geometry <span class="token keyword">as</span> LineString<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'MultiLineString'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>geometry <span class="token keyword">as</span> MultiLineString<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createLine</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Polygon'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> polygon <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPolygonMesh</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>geometry <span class="token keyword">as</span> Polygon<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">,</span>
                depth<span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>defaultPolygonColor
            <span class="token punctuation">)</span>
            polygon<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>mesh<span class="token punctuation">)</span>
                meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token punctuation">.</span>line<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'MultiPolygon'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>geometry <span class="token keyword">as</span> MultiPolygon<span class="token punctuation">)</span><span class="token punctuation">.</span>coordinates<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> polygon <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPolygonMesh</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> depth<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultPolygonColor<span class="token punctuation">)</span>
                polygon<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>mesh<span class="token punctuation">)</span>
                    meshs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token punctuation">.</span>line<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> meshs
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 创建锥形柱子
    */</span>
    <span class="token keyword">private</span> <span class="token function">createPillar</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">coordinates</span><span class="token operator">:</span> Coordinate<span class="token punctuation">,</span> <span class="token literal-property property">depth</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span>
        <span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1.0001</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> pillar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pillarGeometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pillarMaterial<span class="token punctuation">)</span>
        pillar<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span>
        pillar<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span>
        <span class="token keyword">return</span> pillar
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token function">updateFlyLineHighlight</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">points</span><span class="token operator">:</span> Points<span class="token punctuation">,</span> <span class="token literal-property property">line</span><span class="token operator">:</span> Line<span class="token punctuation">,</span> <span class="token literal-property property">index</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> line<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">.</span>array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPositionSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            item<span class="token punctuation">.</span>index <span class="token operator">=</span> index
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> newPosition <span class="token operator">=</span> line<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">.</span>array<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPositionSize<span class="token punctuation">)</span>
        points<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferAttribute</span><span class="token punctuation">(</span>newPosition<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token function">createFlyLineHighlight</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">line</span><span class="token operator">:</span> Line</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token number">30</span>
        <span class="token keyword">const</span> position <span class="token operator">=</span> line<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">.</span>array<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPositionSize<span class="token punctuation">)</span>
        <span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        geometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferAttribute</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> len <span class="token operator">=</span> geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">.</span>array<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">3</span>
        <span class="token keyword">const</span> percentArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span>
        <span class="token keyword">const</span> colorsArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">.</span>array<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> i3 <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">3</span>
            percentArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">/</span> <span class="token punctuation">(</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointEndColor<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lerp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointStartColor<span class="token punctuation">,</span> i <span class="token operator">/</span> len<span class="token punctuation">)</span>
            colorsArr<span class="token punctuation">[</span>i3<span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>r
            colorsArr<span class="token punctuation">[</span>i3 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>g
            colorsArr<span class="token punctuation">[</span>i3 <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> color<span class="token punctuation">.</span>b
        <span class="token punctuation">}</span>

        geometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferAttribute</span><span class="token punctuation">(</span>colorsArr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        geometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'percent'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BufferAttribute</span><span class="token punctuation">(</span>percentArr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> flyLineHighlightPoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Points</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightPointMaterial<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>flyLineHighlightPoint<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            line<span class="token punctuation">,</span>
            index
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> flyLineHighlightPoint
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">createFlyLine</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">start</span><span class="token operator">:</span> Coordinate<span class="token punctuation">,</span> <span class="token literal-property property">end</span><span class="token operator">:</span> Coordinate<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> maxHeight <span class="token operator">=</span> <span class="token number">3</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>startX<span class="token punctuation">,</span> startY<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
        <span class="token keyword">const</span> startPoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>startX<span class="token punctuation">,</span> <span class="token operator">-</span>startY<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>endX<span class="token punctuation">,</span> endY<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetXY</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span>
        <span class="token keyword">const</span> endPoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span>endX<span class="token punctuation">,</span> <span class="token operator">-</span>endY<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
        <span class="token keyword">const</span> middlePoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        middlePoint<span class="token punctuation">.</span><span class="token function">addVectors</span><span class="token punctuation">(</span>startPoint<span class="token punctuation">,</span> endPoint<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divideScalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        middlePoint<span class="token punctuation">.</span>z <span class="token operator">+=</span> maxHeight
        <span class="token keyword">const</span> curve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CatmullRomCurve3</span><span class="token punctuation">(</span><span class="token punctuation">[</span>startPoint<span class="token punctuation">,</span> middlePoint<span class="token punctuation">,</span> endPoint<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> points <span class="token operator">=</span> curve<span class="token punctuation">.</span><span class="token function">getSpacedPoints</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flyLinePointsCount<span class="token punctuation">)</span>

        <span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFromPoints</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>
        <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineMaterial<span class="token punctuation">)</span>
        <span class="token keyword">const</span> flyLineHighlight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createFlyLineHighlight</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            line<span class="token punctuation">,</span>
            flyLineHighlight
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 创建地图
    */</span>
    <span class="token keyword">private</span> <span class="token function">createMap</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">json</span><span class="token operator">:</span> FeatureCollection<span class="token punctuation">,</span> depth <span class="token operator">=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> first <span class="token operator">=</span> json<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">.</span>properties
        <span class="token keyword">const</span> center <span class="token operator">=</span> <span class="token punctuation">(</span>first<span class="token punctuation">.</span>centroid <span class="token operator">||</span> first<span class="token punctuation">.</span>center<span class="token punctuation">)</span> <span class="token keyword">as</span> Coordinate
        <span class="token comment">// 将center设置为地图的中心点(没有其他位移的话与threejs辅助轴的坐标轴重合)</span>
        <span class="token comment">// .translate([0, 0])是指定投影的平移量。这里的 [0, 0] 表示在平面坐标系中的 x 和 y 方向上都没有平移，也就是将地图的投影结果放置在平面坐标系的原点位置。</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>offsetXY<span class="token punctuation">.</span><span class="token function">center</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">// offsetXY.center([118.767413, 32.041544]).translate([0, 0])</span>

        json<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">feature<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> unit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>feature<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'GeometryCollection'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> geometryCollection <span class="token operator">=</span> feature<span class="token punctuation">.</span>geometry <span class="token keyword">as</span> GeometryCollection
                geometryCollection<span class="token punctuation">.</span>geometries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">geometry</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> meshs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">geometryHandle</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
                    <span class="token keyword">const</span> polygonMesh <span class="token operator">=</span> meshs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">mesh</span> <span class="token operator">=&gt;</span> mesh<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'PolygonMesh'</span><span class="token punctuation">)</span>
                    meshs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        unit<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">key</span><span class="token operator">:</span> polygonMesh <span class="token keyword">as</span> Mesh<span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> unit
                    <span class="token punctuation">}</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> meshs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">geometryHandle</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span>geometry <span class="token keyword">as</span> Geometry<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
                <span class="token keyword">const</span> polygonMesh <span class="token operator">=</span> meshs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">mesh</span> <span class="token operator">=&gt;</span> mesh<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'PolygonMesh'</span><span class="token punctuation">)</span>
                meshs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    unit<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">key</span><span class="token operator">:</span> polygonMesh <span class="token keyword">as</span> Mesh<span class="token punctuation">,</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> unit
                <span class="token punctuation">}</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">const</span> fCenter <span class="token operator">=</span> feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>centroid <span class="token operator">||</span> feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>center
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fCenter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createLabel</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span> fCenter<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
                unit<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
                <span class="token keyword">const</span> pillar <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPillar</span><span class="token punctuation">(</span>fCenter<span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
                unit<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pillar<span class="token punctuation">)</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> line<span class="token punctuation">,</span> flyLineHighlight <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createFlyLine</span><span class="token punctuation">(</span>center<span class="token punctuation">,</span> fCenter<span class="token punctuation">)</span>
                    map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> flyLineHighlight<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>unit<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItemKey<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> map
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>moused<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>raycaster<span class="token punctuation">.</span><span class="token function">setFromCamera</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mouse<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> intersects <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>raycaster<span class="token punctuation">.</span><span class="token function">intersectObjects</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItemKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>key <span class="token keyword">as</span> Mesh<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> MeshBasicMaterial<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>material
                    material<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
                    material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultPolygonColor<span class="token punctuation">)</span>
                    item<span class="token punctuation">.</span>value<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> intersect <span class="token operator">=</span> intersects<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>intersect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> mesh <span class="token operator">=</span> intersect<span class="token punctuation">.</span>object <span class="token keyword">as</span> Mesh<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> MeshBasicMaterial<span class="token operator">&gt;</span>
                <span class="token keyword">const</span> material <span class="token operator">=</span> mesh<span class="token punctuation">.</span>material
                <span class="token keyword">if</span><span class="token punctuation">(</span>material<span class="token punctuation">.</span>opacity <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    material<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                    material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hoverPolygonColor<span class="token punctuation">)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>needCheckItem<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>key <span class="token operator">===</span> mesh<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">1.2</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> elapsedTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> deltaTime <span class="token operator">=</span> elapsedTime <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>previusTime<span class="token punctuation">;</span>
        <span class="token comment">// console.log(deltaTime)</span>
        <span class="token keyword">const</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>deltaTime <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>previusTime <span class="token operator">=</span> elapsedTime<span class="token punctuation">;</span>
            <span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightMap<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateFlyLineHighlight</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">.</span>line<span class="token punctuation">,</span> value<span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>flyLineHighlightSpeed<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// this.labelRenderer.render(this.scene, this.camera);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>requestAnimationFrameId <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description 尺寸变化回调
     * */</span>
    <span class="token keyword">public</span> <span class="token function">resizeCallback</span><span class="token punctuation">(</span>value<span class="token operator">:</span> CtxSize<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>width<span class="token punctuation">,</span> value<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>camera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> value<span class="token punctuation">.</span>width <span class="token operator">/</span> value<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">const</span> world <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">World</span><span class="token punctuation">(</span><span class="token punctuation">{</span> ctxSize <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    world<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ctxSize<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    world<span class="token punctuation">.</span><span class="token function">resizeCallback</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    world<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">5/4/2024, 5:21:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/vue3单元测试.html" class="prev">
        vue3单元测试
      </a></span> <span class="next"><a href="/docs/使用视口尺寸和计算属性做响应式开发.html">
        使用视口尺寸和计算属性做响应式开发
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.e9bf7062.js" defer></script><script src="/docs/assets/js/2.21081ec6.js" defer></script><script src="/docs/assets/js/1.d6a5e65b.js" defer></script><script src="/docs/assets/js/29.b35680f8.js" defer></script>
  </body>
</html>
