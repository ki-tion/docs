<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>月窗散记</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/docs/imgs/head.jpg">
    <meta name="description" content="闲暇记录学习代码时的点滴历程">
    <meta name="keywords" content="月窗散记,笔记,开发">
    
    <link rel="preload" href="/docs/assets/css/0.styles.5d5ec1c5.css" as="style"><link rel="preload" href="/docs/assets/js/app.e9bf7062.js" as="script"><link rel="preload" href="/docs/assets/js/2.21081ec6.js" as="script"><link rel="preload" href="/docs/assets/js/1.d6a5e65b.js" as="script"><link rel="preload" href="/docs/assets/js/30.6aaabbcf.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.9b4db267.js"><link rel="prefetch" href="/docs/assets/js/100.e311d782.js"><link rel="prefetch" href="/docs/assets/js/101.7499b16d.js"><link rel="prefetch" href="/docs/assets/js/102.f7d7d9fc.js"><link rel="prefetch" href="/docs/assets/js/103.a41cb2e9.js"><link rel="prefetch" href="/docs/assets/js/104.ce259601.js"><link rel="prefetch" href="/docs/assets/js/105.c940ba59.js"><link rel="prefetch" href="/docs/assets/js/106.7c947769.js"><link rel="prefetch" href="/docs/assets/js/107.1a04a9d6.js"><link rel="prefetch" href="/docs/assets/js/108.30de9c83.js"><link rel="prefetch" href="/docs/assets/js/109.22a243b0.js"><link rel="prefetch" href="/docs/assets/js/11.690021fa.js"><link rel="prefetch" href="/docs/assets/js/110.d198aa34.js"><link rel="prefetch" href="/docs/assets/js/111.dcfc4fa5.js"><link rel="prefetch" href="/docs/assets/js/112.865ed45e.js"><link rel="prefetch" href="/docs/assets/js/113.61279f07.js"><link rel="prefetch" href="/docs/assets/js/114.5250c33f.js"><link rel="prefetch" href="/docs/assets/js/115.326839b0.js"><link rel="prefetch" href="/docs/assets/js/116.b1d4cbbb.js"><link rel="prefetch" href="/docs/assets/js/117.1acfbebc.js"><link rel="prefetch" href="/docs/assets/js/118.93f13cdc.js"><link rel="prefetch" href="/docs/assets/js/119.5a980eba.js"><link rel="prefetch" href="/docs/assets/js/12.6fcc671a.js"><link rel="prefetch" href="/docs/assets/js/120.fbd81856.js"><link rel="prefetch" href="/docs/assets/js/121.1b960932.js"><link rel="prefetch" href="/docs/assets/js/122.b29fb009.js"><link rel="prefetch" href="/docs/assets/js/123.63cbd0d2.js"><link rel="prefetch" href="/docs/assets/js/124.3f1d290b.js"><link rel="prefetch" href="/docs/assets/js/125.59469aaf.js"><link rel="prefetch" href="/docs/assets/js/126.b09e4266.js"><link rel="prefetch" href="/docs/assets/js/127.fc7fda67.js"><link rel="prefetch" href="/docs/assets/js/128.01e1c038.js"><link rel="prefetch" href="/docs/assets/js/129.df69bdbf.js"><link rel="prefetch" href="/docs/assets/js/13.c7a0c6d5.js"><link rel="prefetch" href="/docs/assets/js/14.2b8b9240.js"><link rel="prefetch" href="/docs/assets/js/15.20728d29.js"><link rel="prefetch" href="/docs/assets/js/16.5321a22c.js"><link rel="prefetch" href="/docs/assets/js/17.60ed3f63.js"><link rel="prefetch" href="/docs/assets/js/18.cb38b1ad.js"><link rel="prefetch" href="/docs/assets/js/19.b58682e0.js"><link rel="prefetch" href="/docs/assets/js/20.08fed5a8.js"><link rel="prefetch" href="/docs/assets/js/21.b6e62902.js"><link rel="prefetch" href="/docs/assets/js/22.24c69e91.js"><link rel="prefetch" href="/docs/assets/js/23.921f8a74.js"><link rel="prefetch" href="/docs/assets/js/24.f2152ebf.js"><link rel="prefetch" href="/docs/assets/js/25.55cb6df7.js"><link rel="prefetch" href="/docs/assets/js/26.ba83a3fb.js"><link rel="prefetch" href="/docs/assets/js/27.174b1678.js"><link rel="prefetch" href="/docs/assets/js/28.309b00b4.js"><link rel="prefetch" href="/docs/assets/js/29.b35680f8.js"><link rel="prefetch" href="/docs/assets/js/3.04f428b9.js"><link rel="prefetch" href="/docs/assets/js/31.cc5cffb7.js"><link rel="prefetch" href="/docs/assets/js/32.ad41d324.js"><link rel="prefetch" href="/docs/assets/js/33.1140989d.js"><link rel="prefetch" href="/docs/assets/js/34.ff497298.js"><link rel="prefetch" href="/docs/assets/js/35.4d523d75.js"><link rel="prefetch" href="/docs/assets/js/36.1c20b66a.js"><link rel="prefetch" href="/docs/assets/js/37.2da1705f.js"><link rel="prefetch" href="/docs/assets/js/38.0fe1c3f1.js"><link rel="prefetch" href="/docs/assets/js/39.1f6a5c7b.js"><link rel="prefetch" href="/docs/assets/js/4.1ce2464c.js"><link rel="prefetch" href="/docs/assets/js/40.eddd46af.js"><link rel="prefetch" href="/docs/assets/js/41.42a73812.js"><link rel="prefetch" href="/docs/assets/js/42.43955417.js"><link rel="prefetch" href="/docs/assets/js/43.bd3ec667.js"><link rel="prefetch" href="/docs/assets/js/44.62cbaa5b.js"><link rel="prefetch" href="/docs/assets/js/45.233edbc3.js"><link rel="prefetch" href="/docs/assets/js/46.aafdef08.js"><link rel="prefetch" href="/docs/assets/js/47.595fd768.js"><link rel="prefetch" href="/docs/assets/js/48.a6540ad3.js"><link rel="prefetch" href="/docs/assets/js/49.726d0669.js"><link rel="prefetch" href="/docs/assets/js/5.8739eddd.js"><link rel="prefetch" href="/docs/assets/js/50.304f5c8a.js"><link rel="prefetch" href="/docs/assets/js/51.a24e9848.js"><link rel="prefetch" href="/docs/assets/js/52.e2dd0be4.js"><link rel="prefetch" href="/docs/assets/js/53.4f656f8b.js"><link rel="prefetch" href="/docs/assets/js/54.773afa1e.js"><link rel="prefetch" href="/docs/assets/js/55.b4b04462.js"><link rel="prefetch" href="/docs/assets/js/56.36eec085.js"><link rel="prefetch" href="/docs/assets/js/57.157d15a4.js"><link rel="prefetch" href="/docs/assets/js/58.e0c6d305.js"><link rel="prefetch" href="/docs/assets/js/59.33bac785.js"><link rel="prefetch" href="/docs/assets/js/6.05d88696.js"><link rel="prefetch" href="/docs/assets/js/60.fbb2bc1c.js"><link rel="prefetch" href="/docs/assets/js/61.31e6b365.js"><link rel="prefetch" href="/docs/assets/js/62.b21dbcb9.js"><link rel="prefetch" href="/docs/assets/js/63.d300ff10.js"><link rel="prefetch" href="/docs/assets/js/64.69f65722.js"><link rel="prefetch" href="/docs/assets/js/65.8f8d018d.js"><link rel="prefetch" href="/docs/assets/js/66.f335df08.js"><link rel="prefetch" href="/docs/assets/js/67.df717949.js"><link rel="prefetch" href="/docs/assets/js/68.11cf70a1.js"><link rel="prefetch" href="/docs/assets/js/69.cdd6ce02.js"><link rel="prefetch" href="/docs/assets/js/7.97313c33.js"><link rel="prefetch" href="/docs/assets/js/70.166b14ea.js"><link rel="prefetch" href="/docs/assets/js/71.acb0758d.js"><link rel="prefetch" href="/docs/assets/js/72.82990d4e.js"><link rel="prefetch" href="/docs/assets/js/73.53ae9974.js"><link rel="prefetch" href="/docs/assets/js/74.81e7b0e1.js"><link rel="prefetch" href="/docs/assets/js/75.a7db37d2.js"><link rel="prefetch" href="/docs/assets/js/76.2734cbb8.js"><link rel="prefetch" href="/docs/assets/js/77.a64ef896.js"><link rel="prefetch" href="/docs/assets/js/78.4c503dcb.js"><link rel="prefetch" href="/docs/assets/js/79.b0b40de1.js"><link rel="prefetch" href="/docs/assets/js/80.608970d9.js"><link rel="prefetch" href="/docs/assets/js/81.537f238c.js"><link rel="prefetch" href="/docs/assets/js/82.9e80b244.js"><link rel="prefetch" href="/docs/assets/js/83.21f21168.js"><link rel="prefetch" href="/docs/assets/js/84.8b2f4ce4.js"><link rel="prefetch" href="/docs/assets/js/85.b52f4b36.js"><link rel="prefetch" href="/docs/assets/js/86.625023d9.js"><link rel="prefetch" href="/docs/assets/js/87.96c0892d.js"><link rel="prefetch" href="/docs/assets/js/88.31271f14.js"><link rel="prefetch" href="/docs/assets/js/89.18d6c9a7.js"><link rel="prefetch" href="/docs/assets/js/90.e8c786af.js"><link rel="prefetch" href="/docs/assets/js/91.9d4e8723.js"><link rel="prefetch" href="/docs/assets/js/92.ae174bc0.js"><link rel="prefetch" href="/docs/assets/js/93.baaf9bc5.js"><link rel="prefetch" href="/docs/assets/js/94.0d885c47.js"><link rel="prefetch" href="/docs/assets/js/95.0d0b9732.js"><link rel="prefetch" href="/docs/assets/js/96.48dfb6f2.js"><link rel="prefetch" href="/docs/assets/js/97.1541b4e2.js"><link rel="prefetch" href="/docs/assets/js/98.728cf299.js"><link rel="prefetch" href="/docs/assets/js/99.791c7aa4.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.5d5ec1c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/imgs/head.jpg" alt="月窗散记" class="logo"> <span class="site-name can-hide">月窗散记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/wujie.html" class="sidebar-link">wujie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/wujie.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#安装依赖" class="sidebar-link">安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块a" class="sidebar-link">子模块A</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#子模块b" class="sidebar-link">子模块B</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#基座" class="sidebar-link">基座</a></li><li class="sidebar-sub-header"><a href="/docs/wujie.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/实现Promise.html" class="sidebar-link">实现Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/docs/实现Promise.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/坐标拾取组件封装.html" class="sidebar-link">坐标拾取组件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/坐标拾取组件封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/高德地图轨迹回放与滑块控制.html" class="sidebar-link">高德地图轨迹回放与滑块控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图轨迹回放与滑块控制.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/高德地图2.0点聚合bug及处理办法.html" class="sidebar-link">高德地图2.0点聚合bug及处理办法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#问题描述" class="sidebar-link">问题描述</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#解决思路" class="sidebar-link">解决思路</a></li><li class="sidebar-sub-header"><a href="/docs/高德地图2.0点聚合bug及处理办法.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/SharedWorker.html" class="sidebar-link">SharedWorker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/SharedWorker.html#备注" class="sidebar-link">备注</a></li></ul></li><li><a href="/docs/分时函数.html" class="sidebar-link">分时函数</a></li><li><a href="/docs/大文件分片上传.html" class="sidebar-link">大文件分片上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/大文件分片上传.html#启动" class="sidebar-link">启动</a></li></ul></li><li><a href="/docs/sse.html" class="sidebar-link">SSE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sse.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/sse.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/PWA.html" class="sidebar-link">PWA</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-manifest-json" class="sidebar-link">配置 manifest.json</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#编写worker" class="sidebar-link">编写worker</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化样式" class="sidebar-link">初始化样式</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#初始化测试数据" class="sidebar-link">初始化测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/PWA.html#配置-index-html" class="sidebar-link">配置 index.html</a></li></ul></li><li><a href="/docs/请求工具函数封装.html" class="sidebar-link">请求工具函数封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/请求工具函数封装.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/访问器处理双向影响数据.html" class="sidebar-link">访问器处理双向影响数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/访问器处理双向影响数据.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/自定义日期组件.html" class="sidebar-link">自定义日期组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/自定义日期组件.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/http缓存.html" class="sidebar-link">http缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/http缓存.html#强缓存" class="sidebar-link">强缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#协商缓存" class="sidebar-link">协商缓存</a></li><li class="sidebar-sub-header"><a href="/docs/http缓存.html#代码" class="sidebar-link">代码</a></li></ul></li><li><a href="/docs/深拷贝、防抖和节流.html" class="sidebar-link">深拷贝、防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#深拷贝" class="sidebar-link">深拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#防抖" class="sidebar-link">防抖</a></li><li class="sidebar-sub-header"><a href="/docs/深拷贝、防抖和节流.html#节流" class="sidebar-link">节流</a></li></ul></li><li><a href="/docs/pdf.js+带线条标注.html" class="sidebar-link">pdf.js+带线条标注</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/pdf.js+带线条标注.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/动态表单设计方案.html" class="sidebar-link">动态表单设计方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/动态表单设计方案.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/cadvisor+prometheus+grafana监控容器.html" class="sidebar-link">cadvisor+prometheus+grafana监控容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/cadvisor+prometheus+grafana监控容器.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/VScode实现远程免密登录.html" class="sidebar-link">VScode实现远程免密登录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#客户端生成公钥-若没有" class="sidebar-link">客户端生成公钥(若没有)</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#将客户端的公钥放到服务器" class="sidebar-link">将客户端的公钥放到服务器</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#配置权限" class="sidebar-link">配置权限</a></li><li class="sidebar-sub-header"><a href="/docs/VScode实现远程免密登录.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/docs/vue3单元测试.html" class="sidebar-link">vue3单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#初始化项目" class="sidebar-link">初始化项目</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试函数" class="sidebar-link">测试函数</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#测试vue组件" class="sidebar-link">测试vue组件</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#交互测试-事件测试" class="sidebar-link">交互测试&amp;事件测试</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#请求-注入" class="sidebar-link">请求&amp;注入</a></li><li class="sidebar-sub-header"><a href="/docs/vue3单元测试.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/THREE.js渲染地图.html" class="sidebar-link">THREE.js渲染地图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#效果演示" class="sidebar-link">效果演示</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#前置说明" class="sidebar-link">前置说明</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#定义类型" class="sidebar-link">定义类型</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现思路" class="sidebar-link">实现思路</a></li><li class="sidebar-sub-header"><a href="/docs/THREE.js渲染地图.html#实现代码" class="sidebar-link">实现代码</a></li></ul></li><li><a href="/docs/使用视口尺寸和计算属性做响应式开发.html" class="sidebar-link">使用视口尺寸和计算属性做响应式开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用视口尺寸和计算属性做响应式开发.html#定义等分大小" class="sidebar-link">定义等分大小</a></li></ul></li><li><a href="/docs/使用indexDB缓存THREE.js模型.html" class="sidebar-link">使用indexDB缓存THREE.js模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#封装indexdb" class="sidebar-link">封装indexDB</a></li><li class="sidebar-sub-header"><a href="/docs/使用indexDB缓存THREE.js模型.html#调用" class="sidebar-link">调用</a></li></ul></li><li><a href="/docs/THREE笔记.html" class="active sidebar-link">THREE笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#纹理" class="sidebar-link">纹理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#_3d字体" class="sidebar-link">3D字体</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#光源辅助" class="sidebar-link">光源辅助</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#阴影" class="sidebar-link">阴影</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#raycaster射线拾取" class="sidebar-link">Raycaster射线拾取</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#模型加载" class="sidebar-link">模型加载</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#blender" class="sidebar-link">blender</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#图像优化" class="sidebar-link">图像优化</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#顶点着色器" class="sidebar-link">顶点着色器</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#three钩子" class="sidebar-link">THREE钩子</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#后期处理" class="sidebar-link">后期处理</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#性能调优" class="sidebar-link">性能调优</a></li><li class="sidebar-sub-header"><a href="/docs/THREE笔记.html#向量" class="sidebar-link">向量</a></li></ul></li><li><a href="/docs/vue3响应式与组件渲染.html" class="sidebar-link">vue3响应式与组件渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#初始化环境" class="sidebar-link">初始化环境</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#工具库函数编写" class="sidebar-link">工具库函数编写</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#依赖收集与触发" class="sidebar-link">依赖收集与触发</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#reactive和computed" class="sidebar-link">reactive和computed</a></li><li class="sidebar-sub-header"><a href="/docs/vue3响应式与组件渲染.html#组件渲染" class="sidebar-link">组件渲染</a></li></ul></li><li><a href="/docs/前端渲染大量数据方案.html" class="sidebar-link">前端渲染大量数据方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/前端渲染大量数据方案.html#效果演示" class="sidebar-link">效果演示</a></li></ul></li><li><a href="/docs/yapi.html" class="sidebar-link">yapi</a></li><li><a href="/docs/递归转while.html" class="sidebar-link">递归转while</a></li><li><a href="/docs/实现promise.all方法.html" class="sidebar-link">实现promise.all方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/实现promise.all方法.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/vue3+tsx+keepAlive.html" class="sidebar-link">vue3+tsx+keepAlive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#路由定义" class="sidebar-link">路由定义</a></li><li class="sidebar-sub-header"><a href="/docs/vue3+tsx+keepAlive.html#组件keep-alive" class="sidebar-link">组件keep-alive</a></li></ul></li><li><a href="/docs/Vue3+Electron.html" class="sidebar-link">Vue3+Electron</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#打包" class="sidebar-link">打包</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#报错" class="sidebar-link">报错</a></li><li class="sidebar-sub-header"><a href="/docs/Vue3+Electron.html#处理preload" class="sidebar-link">处理preload</a></li></ul></li><li><a href="/docs/ts重新设置类型.html" class="sidebar-link">ts重新设置类型</a></li><li><a href="/docs/ts指定key类型和其余任意key类型.html" class="sidebar-link">ts指定key类型和其余任意key类型</a></li><li><a href="/docs/ts将可选字段转化为必填字段.html" class="sidebar-link">ts将可选字段转化为必填字段</a></li><li><a href="/docs/ts定义必填属性，其余必须以指定开头为key.html" class="sidebar-link">ts定义必填属性，其余必须以指定开头为key</a></li><li><a href="/docs/skywalking.html" class="sidebar-link">skywalking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/skywalking.html#创建挂载卷" class="sidebar-link">创建挂载卷</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#编写docker-compose-yml" class="sidebar-link">编写docker-compose.yml</a></li><li class="sidebar-sub-header"><a href="/docs/skywalking.html#nodejs使用" class="sidebar-link">nodejs使用</a></li></ul></li><li><a href="/docs/sass.html" class="sidebar-link">sass</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sass.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#嵌套" class="sidebar-link">嵌套</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#混入" class="sidebar-link">混入</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#interpolation" class="sidebar-link">Interpolation</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#if-else" class="sidebar-link">@if @else</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#for" class="sidebar-link">@for</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#each" class="sidebar-link">@each</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#while" class="sidebar-link">@while</a></li><li class="sidebar-sub-header"><a href="/docs/sass.html#function" class="sidebar-link">@function</a></li></ul></li><li><a href="/docs/rollup简要笔记.html" class="sidebar-link">rollup简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改tsconfig-json" class="sidebar-link">修改tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写src-index-ts" class="sidebar-link">编写src/index.ts</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#编写rollup-config-js" class="sidebar-link">编写rollup.config.js</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#修改package-json" class="sidebar-link">修改package.json</a></li><li class="sidebar-sub-header"><a href="/docs/rollup简要笔记.html#打包" class="sidebar-link">打包</a></li></ul></li><li><a href="/docs/redis主从.html" class="sidebar-link">redis主从</a></li><li><a href="/docs/redis集群.html" class="sidebar-link">redis集群</a></li><li><a href="/docs/react+react-router-dom+redux.html" class="sidebar-link">react+react-router-dom+redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#导出具有ref的组件" class="sidebar-link">导出具有ref的组件</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/docs/react+react-router-dom+redux.html#antd" class="sidebar-link">antd</a></li></ul></li><li><a href="/docs/react-navtive.html" class="sidebar-link">react-navtive</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#版本信息" class="sidebar-link">版本信息</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#环境安装参考" class="sidebar-link">环境安装参考</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装jdk" class="sidebar-link">安装jdk</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#配置环境变量" class="sidebar-link">配置环境变量</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#安装-android-studio" class="sidebar-link">安装 Android Studio</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#创建项目" class="sidebar-link">创建项目</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#小技巧" class="sidebar-link">小技巧</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#真机调试" class="sidebar-link">真机调试</a></li><li class="sidebar-sub-header"><a href="/docs/react-navtive.html#错误处理" class="sidebar-link">错误处理</a></li></ul></li><li><a href="/docs/prometheus-docker.html" class="sidebar-link">prometheus-docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#prometheus主机-192-168-2-200" class="sidebar-link">prometheus主机（192.168.2.200）：</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#被监控主机-192-168-2-201" class="sidebar-link">被监控主机（192.168.2.201）:</a></li><li class="sidebar-sub-header"><a href="/docs/prometheus-docker.html#使用" class="sidebar-link">使用</a></li></ul></li><li><a href="/docs/onlyoffice.html" class="sidebar-link">onlyoffice</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#部署-onlyoffice" class="sidebar-link">部署 onlyoffice</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#后台" class="sidebar-link">后台</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/onlyoffice.html#效果" class="sidebar-link">效果</a></li></ul></li><li><a href="/docs/nuxt3笔记.html" class="sidebar-link">nuxt3笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#布局系统" class="sidebar-link">布局系统</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求" class="sidebar-link">请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#动态请求" class="sidebar-link">动态请求</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#请求代理" class="sidebar-link">请求代理</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#服务端中间件" class="sidebar-link">服务端中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#状态管理-组合逻辑" class="sidebar-link">状态管理(组合逻辑)</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#sass" class="sidebar-link">sass</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#环境判断" class="sidebar-link">环境判断</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#全局css注入" class="sidebar-link">全局css注入</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#使用阿里图标库" class="sidebar-link">使用阿里图标库</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#配置路径别名" class="sidebar-link">配置路径别名</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#pinia使用" class="sidebar-link">pinia使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#自定义指令" class="sidebar-link">自定义指令</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#装饰器的使用" class="sidebar-link">装饰器的使用</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#seo" class="sidebar-link">seo</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#客户端特定渲染" class="sidebar-link">客户端特定渲染</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#打包部署" class="sidebar-link">打包部署</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#其他问题" class="sidebar-link">其他问题</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3笔记.html#追加" class="sidebar-link">追加</a></li></ul></li><li><a href="/docs/nuxt3.html" class="sidebar-link">nuxt3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#动态路由" class="sidebar-link">动态路由</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#_404页面" class="sidebar-link">404页面</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#layout" class="sidebar-link">layout</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#组合逻辑" class="sidebar-link">组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#运行时配置" class="sidebar-link">运行时配置</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#三方插件pinia代替组合逻辑" class="sidebar-link">三方插件pinia代替组合逻辑</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#全局样式" class="sidebar-link">全局样式</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#其他" class="sidebar-link">其他</a></li><li class="sidebar-sub-header"><a href="/docs/nuxt3.html#未解决的问题" class="sidebar-link">未解决的问题</a></li></ul></li><li><a href="/docs/nginx简要笔记.html" class="sidebar-link">nginx简要笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#root" class="sidebar-link">root</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#路径匹配" class="sidebar-link">路径匹配</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#proxy-pass" class="sidebar-link">proxy_pass</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#http升级https" class="sidebar-link">http升级https</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#跨域代理" class="sidebar-link">跨域代理</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#gzip压缩" class="sidebar-link">gzip压缩</a></li><li class="sidebar-sub-header"><a href="/docs/nginx简要笔记.html#完整示例" class="sidebar-link">完整示例</a></li></ul></li><li><a href="/docs/Nginx.html" class="sidebar-link">Nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Nginx.html#中间件架构" class="sidebar-link">中间件架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器架构" class="sidebar-link">代理服务器架构</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的安装和使用" class="sidebar-link">Nginx的安装和使用</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的请求限制配置" class="sidebar-link">Nginx的请求限制配置</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx的web静态资源服务" class="sidebar-link">Nginx的Web静态资源服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#代理服务器" class="sidebar-link">代理服务器</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#nginx代理服务" class="sidebar-link">Nginx代理服务</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#负载均衡调度slb" class="sidebar-link">负载均衡调度SLB</a></li><li class="sidebar-sub-header"><a href="/docs/Nginx.html#动态缓存" class="sidebar-link">动态缓存</a></li></ul></li><li><a href="/docs/nexus3.html" class="sidebar-link">nexus3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nexus3.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#npm" class="sidebar-link">npm</a></li><li class="sidebar-sub-header"><a href="/docs/nexus3.html#docker" class="sidebar-link">docker</a></li></ul></li><li><a href="/docs/nest-GRPC.html" class="sidebar-link">nest-GRPC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-a" class="sidebar-link">nest-a</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#nest-b" class="sidebar-link">nest-b</a></li><li class="sidebar-sub-header"><a href="/docs/nest-GRPC.html#验收" class="sidebar-link">验收</a></li></ul></li><li><a href="/docs/mysql8&amp;json.html" class="sidebar-link">mysql8&amp;json</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#部署mysql8" class="sidebar-link">部署mysql8</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/mysql8&amp;json.html#结合nestjs" class="sidebar-link">结合nestjs</a></li></ul></li><li><a href="/docs/nestjs单元测试.html" class="sidebar-link">nestjs单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#前置代码" class="sidebar-link">前置代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#测试代码" class="sidebar-link">测试代码</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs单元测试.html#修改package-json配置" class="sidebar-link">修改package.json配置</a></li></ul></li><li><a href="/docs/nestjs+typeorm定时建表，动态查询表.html" class="sidebar-link">nestjs+typeorm定时建表，动态查询表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定义实体" class="sidebar-link">定义实体</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#定时创建表" class="sidebar-link">定时创建表</a></li><li class="sidebar-sub-header"><a href="/docs/nestjs+typeorm定时建表，动态查询表.html#动态查询表" class="sidebar-link">动态查询表</a></li></ul></li><li><a href="/docs/nest.html" class="sidebar-link">nest</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nest.html#项目生成" class="sidebar-link">项目生成</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#依赖安装" class="sidebar-link">依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#过滤器" class="sidebar-link">过滤器</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#守卫-权限验证" class="sidebar-link">守卫（权限验证）</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#集成安装过滤器、守卫、api文档和安全设置" class="sidebar-link">集成安装过滤器、守卫、api文档和安全设置</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#数据库" class="sidebar-link">数据库</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#测试案例" class="sidebar-link">测试案例</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#中间件和子模块加入" class="sidebar-link">中间件和子模块加入</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#文件操作" class="sidebar-link">文件操作</a></li><li class="sidebar-sub-header"><a href="/docs/nest.html#定时任务" class="sidebar-link">定时任务</a></li></ul></li><li><a href="/docs/mysql.html" class="sidebar-link">mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mysql.html#使用docker安装mysql" class="sidebar-link">使用docker安装mysql</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#创建测试数据库并生成测试数据" class="sidebar-link">创建测试数据库并生成测试数据</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#基础查询" class="sidebar-link">基础查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见内置函数" class="sidebar-link">常见内置函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#连接查询-多表查询" class="sidebar-link">连接查询(多表查询)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#联合查询" class="sidebar-link">联合查询</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#查询关键字执行顺序" class="sidebar-link">查询关键字执行顺序</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#插入" class="sidebar-link">插入</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#修改" class="sidebar-link">修改</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#库的管理" class="sidebar-link">库的管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#表达管理" class="sidebar-link">表达管理</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见数据类型" class="sidebar-link">常见数据类型</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#常见约束" class="sidebar-link">常见约束</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#视图-用的少" class="sidebar-link">视图(用的少)</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#锁" class="sidebar-link">锁</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#存储过程和函数" class="sidebar-link">存储过程和函数</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#循环" class="sidebar-link">循环</a></li><li class="sidebar-sub-header"><a href="/docs/mysql.html#递归查询" class="sidebar-link">递归查询</a></li></ul></li><li><a href="/docs/MinIO.html" class="sidebar-link">MinIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/MinIO.html#部署" class="sidebar-link">部署</a></li><li class="sidebar-sub-header"><a href="/docs/MinIO.html#在nestjs中使用" class="sidebar-link">在nestjs中使用</a></li></ul></li><li><a href="/docs/mariadb主从.html" class="sidebar-link">mariadb主从</a></li><li><a href="/docs/lodash源码阅读-cloneDeep.html" class="sidebar-link">lodash源码阅读-cloneDeep</a></li><li><a href="/docs/kafka-nestjs.html" class="sidebar-link">kafka-nestjs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#kafka基础概念" class="sidebar-link">kafka基础概念</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#部署-3个节点" class="sidebar-link">部署(3个节点)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#结合nestjs-使用kafkajs" class="sidebar-link">结合nestjs(使用kafkajs)</a></li><li class="sidebar-sub-header"><a href="/docs/kafka-nestjs.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/js通过字符串拿到对象属性.html" class="sidebar-link">js通过字符串拿到对象属性</a></li><li><a href="/docs/js判断对象是否存在某个属性.html" class="sidebar-link">js判断对象是否存在某个属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#直接判断是否等于undefined" class="sidebar-link">直接判断是否等于undefined</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#object-keys" class="sidebar-link">Object.keys</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#hasownproperty" class="sidebar-link">hasOwnProperty</a></li><li class="sidebar-sub-header"><a href="/docs/js判断对象是否存在某个属性.html#in" class="sidebar-link">in</a></li></ul></li><li><a href="/docs/实现new.html" class="sidebar-link">实现new</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/实现new.html#new的过程发生了什么" class="sidebar-link">new的过程发生了什么</a></li><li class="sidebar-sub-header"><a href="/docs/实现new.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/gsap.html" class="sidebar-link">gsap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gsap.html#to" class="sidebar-link">to</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#from" class="sidebar-link">from</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#timeline" class="sidebar-link">timeline</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#ticker" class="sidebar-link">ticker</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#exportroot" class="sidebar-link">exportRoot</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#getproperty" class="sidebar-link">getProperty</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#gettweensof" class="sidebar-link">getTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#istweening" class="sidebar-link">isTweening</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#killtweensof" class="sidebar-link">killTweensOf</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmedia" class="sidebar-link">matchMedia</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#matchmediarefresh" class="sidebar-link">matchMediaRefresh</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#utils" class="sidebar-link">utils</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#random" class="sidebar-link">random</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#flip" class="sidebar-link">Flip</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#draggable" class="sidebar-link">Draggable</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#motionpathplugin" class="sidebar-link">MotionPathPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#observer" class="sidebar-link">Observer</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltoplugin" class="sidebar-link">ScrollToPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#textplugin" class="sidebar-link">TextPlugin</a></li><li class="sidebar-sub-header"><a href="/docs/gsap.html#scrolltrigger" class="sidebar-link">scrollTrigger</a></li></ul></li><li><a href="/docs/graphgl(nest).html" class="sidebar-link">graphgl(nest)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#nest项目生成-依赖安装" class="sidebar-link">nest项目生成&amp;&amp;依赖安装</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#schema" class="sidebar-link">schema</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#database" class="sidebar-link">database</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#server" class="sidebar-link">server</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#resolver" class="sidebar-link">resolver</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#访问" class="sidebar-link">访问</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/docs/graphgl(nest).html#参数" class="sidebar-link">参数</a></li></ul></li><li><a href="/docs/gitlab(docker)+git免密+CICD.html" class="sidebar-link">gitlab(docker)+git免密+CICD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab" class="sidebar-link">安装gitlab</a></li><li class="sidebar-sub-header"><a href="/docs/gitlab(docker)+git免密+CICD.html#安装gitlab-runner-ci-cd" class="sidebar-link">安装gitlab-runner(CI/CD)</a></li></ul></li><li><a href="/docs/elasticsearch.html" class="sidebar-link">elasticsearch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#docker部署elasticsearch" class="sidebar-link">docker部署elasticsearch</a></li><li class="sidebar-sub-header"><a href="/docs/elasticsearch.html#ik分词器添加" class="sidebar-link">ik分词器添加</a></li></ul></li><li><a href="/docs/EFK.html" class="sidebar-link">EFK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/EFK.html#拉取镜像" class="sidebar-link">拉取镜像</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#elasticsearch" class="sidebar-link">ElasticSearch</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#kibana" class="sidebar-link">Kibana</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#filebeat" class="sidebar-link">FileBeat</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/EFK.html#设置密码" class="sidebar-link">设置密码</a></li></ul></li><li><a href="/docs/docker安装zookeeper集群.html" class="sidebar-link">docker安装zookeeper集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#最新版本报错找不到端口-百度说最新的发行版有问题-回到3-4-13版本" class="sidebar-link">最新版本报错找不到端口，百度说最新的发行版有问题，回到3.4.13版本</a></li><li class="sidebar-sub-header"><a href="/docs/docker安装zookeeper集群.html#后台运行-compose-project-name-zk-test-docker-compose-up-d-zk-test自定义名称" class="sidebar-link">后台运行 COMPOSEPROJECTNAME=zktest docker-compose up -d （zktest自定义名称）</a></li></ul></li><li><a href="/docs/docker-compose部署redis.html" class="sidebar-link">docker-compose部署redis</a></li><li><a href="/docs/js this指向.html" class="sidebar-link">js this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/js this指向.html#常规" class="sidebar-link">常规</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#call、apply和bind" class="sidebar-link">call、apply和bind</a></li><li class="sidebar-sub-header"><a href="/docs/js this指向.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li><a href="/docs/css高度从0过渡到auto.html" class="sidebar-link">css高度从0过渡到auto</a></li><li><a href="/docs/console.html" class="sidebar-link">console</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/console.html#常用方法" class="sidebar-link">常用方法</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#部分实例" class="sidebar-link">部分实例</a></li><li class="sidebar-sub-header"><a href="/docs/console.html#css" class="sidebar-link">css</a></li></ul></li><li><a href="/docs/class-validator自定义校验.html" class="sidebar-link">class-validator自定义校验</a></li><li><a href="/docs/class-validator 验证装饰器.html" class="sidebar-link">class-validator 验证装饰器</a></li><li><a href="/docs/Blob 下载文件时 type 类型 大全.html" class="sidebar-link">Blob 下载文件时 type 类型 大全</a></li><li><a href="/docs/自定义装饰器校验数据.html" class="sidebar-link">自定义装饰器校验数据</a></li><li><a href="/docs/网站换肤.html" class="sidebar-link">网站换肤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#创建项目-安装依赖" class="sidebar-link">创建项目&amp;安装依赖</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编写sass文件" class="sidebar-link">编写sass文件</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#编辑vite-config-ts" class="sidebar-link">编辑vite.config.ts</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/docs/网站换肤.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/算法-KMP.html" class="sidebar-link">算法-KMP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#个人理解" class="sidebar-link">个人理解</a></li><li class="sidebar-sub-header"><a href="/docs/算法-KMP.html#最长相等前后缀" class="sidebar-link">最长相等前后缀</a></li></ul></li><li><a href="/docs/算法-bf.html" class="sidebar-link">算法-bf</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#举例" class="sidebar-link">举例</a></li><li class="sidebar-sub-header"><a href="/docs/算法-bf.html#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li><a href="/docs/算法-希尔排序.html" class="sidebar-link">算法-希尔排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-希尔排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-直接插入排序.html" class="sidebar-link">算法-直接插入排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#算法描述" class="sidebar-link">算法描述</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#适用范围" class="sidebar-link">适用范围</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-直接插入排序.html#个人理解" class="sidebar-link">个人理解</a></li></ul></li><li><a href="/docs/算法-快速排序.html" class="sidebar-link">算法-快速排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-快速排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-简单选择排序.html" class="sidebar-link">算法-简单选择排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-简单选择排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-赫夫曼编码.html" class="sidebar-link">算法-赫夫曼编码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#工作原理" class="sidebar-link">工作原理</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#赫夫曼树" class="sidebar-link">赫夫曼树</a></li><li class="sidebar-sub-header"><a href="/docs/算法-赫夫曼编码.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-回溯法与八皇后问题.html" class="sidebar-link">算法-回溯法与八皇后问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#八皇后问题" class="sidebar-link">八皇后问题</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#回溯法" class="sidebar-link">回溯法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header"><a href="/docs/算法-回溯法与八皇后问题.html#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/docs/算法-汉诺塔.html" class="sidebar-link">算法-汉诺塔</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#玩法" class="sidebar-link">玩法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/算法-汉诺塔.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-斐波那契数列.html" class="sidebar-link">算法-斐波那契数列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/算法-斐波那契数列.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-二分查找.html" class="sidebar-link">算法-二分查找</a></li><li><a href="/docs/算法-堆排序.html" class="sidebar-link">算法-堆排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#前置名词解释" class="sidebar-link">前置名词解释</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/算法-堆排序.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/算法-度量方法.html" class="sidebar-link">算法-度量方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#时间复杂度" class="sidebar-link">时间复杂度</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#大o计数法" class="sidebar-link">大O计数法</a></li><li class="sidebar-sub-header"><a href="/docs/算法-度量方法.html#常用时间复杂度排序" class="sidebar-link">常用时间复杂度排序</a></li></ul></li><li><a href="/docs/数据结构-图.html" class="sidebar-link">数据结构-图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的存储" class="sidebar-link">图的存储</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#图的遍历" class="sidebar-link">图的遍历</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最小生成树" class="sidebar-link">最小生成树</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#最短路径" class="sidebar-link">最短路径</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aov网" class="sidebar-link">AOV网</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-图.html#aoe网" class="sidebar-link">AOE网</a></li></ul></li><li><a href="/docs/数据结构-散列表.html" class="sidebar-link">数据结构-散列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#基本思想" class="sidebar-link">基本思想</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列表" class="sidebar-link">散列表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列函数" class="sidebar-link">散列函数</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列地址" class="sidebar-link">散列地址</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#散列冲突" class="sidebar-link">散列冲突</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-散列表.html#处理冲突的方法" class="sidebar-link">处理冲突的方法</a></li></ul></li><li><a href="/docs/数据结构-平衡二叉树.html" class="sidebar-link">数据结构-平衡二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-平衡二叉树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉排序树.html" class="sidebar-link">数据结构-二叉排序树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#性质" class="sidebar-link">性质</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉排序树.html#实现" class="sidebar-link">实现</a></li></ul></li><li><a href="/docs/数据结构-二叉树.html" class="sidebar-link">数据结构-二叉树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-二叉树.html#定义" class="sidebar-link">定义</a></li></ul></li><li><a href="/docs/数据结构-栈&amp;队列.html" class="sidebar-link">数据结构-栈&amp;队列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#栈" class="sidebar-link">栈</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-栈&amp;队列.html#队列" class="sidebar-link">队列</a></li></ul></li><li><a href="/docs/数据结构-链表.html" class="sidebar-link">数据结构-链表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#单向链表" class="sidebar-link">单向链表</a></li><li class="sidebar-sub-header"><a href="/docs/数据结构-链表.html#双向链表" class="sidebar-link">双向链表</a></li></ul></li><li><a href="/docs/ca自签名+配置https.html" class="sidebar-link">ca自签名+配置https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成私钥" class="sidebar-link">生成私钥</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成csr-证书签名请求" class="sidebar-link">生成CSR（证书签名请求）</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#删除私钥中的密码" class="sidebar-link">删除私钥中的密码</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#生成自签名证书" class="sidebar-link">生成自签名证书</a></li><li class="sidebar-sub-header"><a href="/docs/ca自签名+配置https.html#express使用" class="sidebar-link">express使用</a></li></ul></li><li><a href="/docs/centos7安装docker.html" class="sidebar-link">centos7安装docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#更新yum包-安装需要的软件包" class="sidebar-link">更新yum包&amp;安装需要的软件包</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#设置yum源-选择其中一个-我选的阿里仓库" class="sidebar-link">设置yum源（选择其中一个,我选的阿里仓库）</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker" class="sidebar-link">安装Docker</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#启动docker-并加入开机启动" class="sidebar-link">启动Docker,并加入开机启动</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#配置阿里云加速-否则不能下载镜像" class="sidebar-link">配置阿里云加速，否则不能下载镜像</a></li><li class="sidebar-sub-header"><a href="/docs/centos7安装docker.html#安装docker-compose" class="sidebar-link">安装docker-compose</a></li></ul></li><li><a href="/docs/centos7搭建vsftp.html" class="sidebar-link">centos7搭建vsftp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#安装应用" class="sidebar-link">安装应用</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#备份配置文件" class="sidebar-link">备份配置文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建载体用户" class="sidebar-link">创建载体用户</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#修改载体用户目录权限" class="sidebar-link">修改载体用户目录权限</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#创建虚拟用户表" class="sidebar-link">创建虚拟用户表</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#生成db文件" class="sidebar-link">生成db文件</a></li><li class="sidebar-sub-header"><a href="/docs/centos7搭建vsftp.html#设置认证文件pam" class="sidebar-link">设置认证文件PAM</a></li></ul></li><li><a href="/docs/linux安装mysql.html" class="sidebar-link">linux安装mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置mysql-8-0安装源" class="sidebar-link">配置Mysql 8.0安装源</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#安装mysql-8-0" class="sidebar-link">安装Mysql 8.0</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#启动mysql服务" class="sidebar-link">启动mysql服务</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#拿到临时密码" class="sidebar-link">拿到临时密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#登录" class="sidebar-link">登录</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#查看当前的密码验证策略" class="sidebar-link">查看当前的密码验证策略</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#重设密码" class="sidebar-link">重设密码</a></li><li class="sidebar-sub-header"><a href="/docs/linux安装mysql.html#配置远程访问" class="sidebar-link">配置远程访问</a></li></ul></li><li><a href="/docs/安全连接远程linux.html" class="sidebar-link">安全连接远程linux</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="three笔记"><a href="#three笔记" class="header-anchor">#</a> <center>THREE笔记</center></h1> <h2 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h2> <p>注意: vue中使用THREE，不要用响应式(ref或reactive)包裹THREE变量(比如:scene,camera和renderer等等)</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">THREE</span> <span class="token keyword">from</span> <span class="token string">&quot;three&quot;</span> <span class="token comment">// 引入THREE包</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token literal-property property">box</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// THREE渲染容器</span>
            <span class="token keyword">const</span> <span class="token function-variable function">getEle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ele</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token literal-property property">dom</span><span class="token operator">:</span> Element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>value <span class="token operator">=</span> dom<span class="token punctuation">)</span>
            <span class="token keyword">const</span> windowWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth
    		<span class="token keyword">const</span> windowHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight
            
            <span class="token keyword">const</span> scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 场景</span>
            <span class="token comment">// 相机 参数：视角 宽高比 最近距离 最远距离</span>
            <span class="token comment">// 小于最近距离或者大于最远距离物体就将不再显示</span>
    		<span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span>windowWidth <span class="token operator">/</span> windowHeight<span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
            <span class="token comment">// 渲染器(antialias:true增加抗锯齿效果)</span>
    		<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">antialias</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
            <span class="token keyword">const</span> clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 时间</span>
            
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0xeeeeee</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 设置渲染背景色</span>
      		renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span> <span class="token comment">// 渲染宽高设置</span>
            
            <span class="token comment">// 渲染物体阴影</span>
            renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>
            renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>PCFSoftShadowMap
            
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxesHelper</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 加入坐标系</span>
            
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token comment">// 相机位置</span>
      		camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>position<span class="token punctuation">)</span> <span class="token comment">// 相机视线方向</span>
            
            <span class="token comment">// 添加一个长方体</span>
            <span class="token keyword">const</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
            	<span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 长方体模型，长宽高</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 材质</span>
                    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span>
            
            <span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 帧动画</span>
              <span class="token comment">// 添加一个旋转动画</span>
              cube<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
              renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
              <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            
            <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                box<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
                <span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getEle</span><span class="token punctuation">(</span>box<span class="token punctuation">,</span> ev <span class="token keyword">as</span> Element<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="纹理"><a href="#纹理" class="header-anchor">#</a> 纹理</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 纹理加载器</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    map<span class="token operator">:</span> loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/earth.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_3d字体"><a href="#_3d字体" class="header-anchor">#</a> 3D字体</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FontLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/FontLoader&quot;</span> <span class="token comment">// 字体加载器不在three中，需单独进入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> TextGeometry <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/geometries/TextGeometry&quot;</span>

<span class="token keyword">const</span> fontLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 这里用的字体是three自带的，位置在/node_modulesthree/fonts/</span>
<span class="token comment">// 注意：json文件不要放assets(无法加载),要放在静态文件中public(vue3)</span>
fontLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;/fonts/helvetiker_regular.typeface.json&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> font <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> texture <span class="token operator">=</span> <span class="token keyword">await</span> loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/Wood-2093.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> textGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextGeometry</span><span class="token punctuation">(</span><span class="token string">&quot;i is fish&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        font<span class="token punctuation">,</span>
        size<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
        curveSegments<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        bevelEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        bevelThickness<span class="token operator">:</span> <span class="token number">0.03</span><span class="token punctuation">,</span>
        bevelSize<span class="token operator">:</span> <span class="token number">0.02</span><span class="token punctuation">,</span>
        bevelOffset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        bevelSegments<span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    textGeometry<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// const boundingBox = textGeometry.boundingBox as THREE.Box3</span>
    <span class="token comment">// textGeometry.translate(</span>
    <span class="token comment">//     -((boundingBox.max.x - boundingBox.min.x) / 2),</span>
    <span class="token comment">//     -((boundingBox.max.y - boundingBox.min.y) / 2),</span>
    <span class="token comment">//     -((boundingBox.max.z - boundingBox.min.z) / 2)</span>
    <span class="token comment">// )</span>
    textGeometry<span class="token punctuation">.</span><span class="token function">center</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> textMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        map<span class="token operator">:</span> texture
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> donutGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">TorusGeometry</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">.1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> donut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Mesh</span><span class="token punctuation">(</span>donutGeometry<span class="token punctuation">,</span> textMaterial<span class="token punctuation">)</span>
        donut<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
        donut<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
        donut<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>

        donut<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
        donut<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>

        <span class="token keyword">const</span> scale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        donut<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>donut<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span>textGeometry<span class="token punctuation">,</span> textMaterial<span class="token punctuation">)</span>
    text<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
    text<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span>
    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="光源辅助"><a href="#光源辅助" class="header-anchor">#</a> 光源辅助</h2> <p>环境光没有辅助</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 矩形光源比较特殊，他的辅助需要单独引入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RectAreaLightHelper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/helpers/RectAreaLightHelper&quot;</span> 
 <span class="token comment">// 平行光</span>
<span class="token keyword">const</span> directionalLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
directionalLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">)</span>
<span class="token comment">// 平行光源辅助</span>
<span class="token keyword">const</span> directionalLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">DirectionalLightHelper</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLightHelper<span class="token punctuation">)</span>


<span class="token comment">// 点光源</span>
<span class="token keyword">const</span> pointLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">PointLight</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
pointLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pointLight<span class="token punctuation">)</span>
<span class="token comment">// 点光源辅助</span>
<span class="token keyword">const</span> pointLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">PointLightHelper</span><span class="token punctuation">(</span>pointLight<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pointLightHelper<span class="token punctuation">)</span>


<span class="token comment">// 矩形光源</span>
<span class="token keyword">const</span> rectArealLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">RectAreaLight</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
rectArealLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment">// rectArealLight.position.y = 10</span>
rectArealLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">10</span>
rectArealLight<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
<span class="token comment">// 矩形光源辅助</span>
<span class="token keyword">const</span> rectAreaLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RectAreaLightHelper</span><span class="token punctuation">(</span>rectArealLight<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rectAreaLightHelper<span class="token punctuation">)</span>


<span class="token comment">// 聚光灯光源,可以理解成手电筒</span>
<span class="token keyword">const</span> spotLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">SpotLight</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">)</span>
spotLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">25</span><span class="token punctuation">)</span>
spotLight<span class="token punctuation">.</span>intensity <span class="token operator">=</span> <span class="token number">3</span>
spotLight<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>spotLight<span class="token punctuation">)</span>

<span class="token comment">// 聚光灯光源辅助</span>
<span class="token keyword">const</span> spotLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">SpotLightHelper</span><span class="token punctuation">(</span>spotLight<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>spotLightHelper<span class="token punctuation">)</span>

</code></pre></div><h2 id="阴影"><a href="#阴影" class="header-anchor">#</a> 阴影</h2> <p>开启阴影渲染条件：渲染器开启阴影渲染、灯光打开阴影投掷、物体打开阴影投掷、地板打开接收阴影</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token comment">// 渲染器渲染物体阴影</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>PCFSoftShadowMap <span class="token comment">// 可以优化显示效果（锯齿波）</span>
<span class="token comment">// 光源投掷阴影</span>
lightName<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>

lightName<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment">// 减少阴影锯齿波</span>

lightName<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment">// 减少阴影锯齿波</span>

lightName<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>near <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 灯光阴影相机可视距离</span>

lightName<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">30</span> <span class="token comment">// 灯光阴影相机可视距离</span>

<span class="token keyword">const</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Mesh</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">BoxGeometry</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">// 物体投掷阴影</span>
cube<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span> 
<span class="token comment">// 物体接收阴影</span>
cube<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment">// 平面接收阴影</span>
<span class="token keyword">const</span> plane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Mesh</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token number">0xcccccc</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
plane<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span>
plane<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment">// 接收阴影</span>
plane<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span>

</code></pre></div><p>可以使用THREE.CameraHelper辅助灯光阴影相机设置</p> <p>注意：灯光阴影比较消耗性能，可以考虑用纹理图片处理</p> <h2 id="raycaster射线拾取"><a href="#raycaster射线拾取" class="header-anchor">#</a> Raycaster射线拾取</h2> <p>Raycaster可以创建一条射线，并检测物体是否被该射线穿过</p> <p>注意： 第一帧检测有问题，可以放入微任务或者宏任务检测</p> <p>基础用法</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> raycaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Raycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 射线端点</span>
<span class="token keyword">const</span> direction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector3</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 方向是个三维向量，需要归一化</span>
raycaster<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> direction<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 创建射线</span>
<span class="token comment">// sphere, sphere1, sphere2为定义的物体</span>
<span class="token comment">// 检测sphere, sphere1, sphere2中物体有多少被射线穿过		</span>
<span class="token keyword">const</span> intersects <span class="token operator">=</span> raycaster<span class="token punctuation">.</span><span class="token function">intersectObjects</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sphere<span class="token punctuation">,</span> sphere1<span class="token punctuation">,</span> sphere2<span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre></div><p>常规用法(用于鼠标与物体检测)</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> raycaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Raycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 存放鼠标坐标</span>
<span class="token comment">// 注意：该坐标不是像素坐标，而是水平和垂直轴上从 -1 到 +1 的值</span>
<span class="token keyword">const</span> mouse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    raycaster<span class="token punctuation">.</span><span class="token function">setFromCamera</span><span class="token punctuation">(</span>mouse<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    <span class="token keyword">const</span> elapsedTime <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sphere<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>elapsedTime <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.5</span>
    sphere1<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>elapsedTime <span class="token operator">*</span> <span class="token number">0.6</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.5</span>
    sphere2<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>elapsedTime <span class="token operator">*</span> <span class="token number">0.9</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.5</span>
    <span class="token keyword">const</span> spheres <span class="token operator">=</span> <span class="token punctuation">[</span>sphere<span class="token punctuation">,</span> sphere1<span class="token punctuation">,</span> sphere2<span class="token punctuation">]</span>
    <span class="token keyword">const</span> intersects <span class="token operator">=</span> raycaster<span class="token punctuation">.</span><span class="token function">intersectObjects</span><span class="token punctuation">(</span>spheres<span class="token punctuation">)</span>
    spheres<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    intersects<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span>item<span class="token punctuation">.</span>object <span class="token keyword">as</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>Mesh<span class="token operator">&lt;</span><span class="token constant">THREE</span><span class="token punctuation">.</span>SphereGeometry<span class="token punctuation">,</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>MeshStandardMaterial<span class="token operator">&gt;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">0x00ffff</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将像素坐标转化为 水平和垂直轴上从 -1 到 +1 的值</span>
        mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">/</span> windowWidth <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span>
        mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientY <span class="token operator">/</span> windowHeight<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="模型加载"><a href="#模型加载" class="header-anchor">#</a> 模型加载</h2> <p>THREE推荐gltf格式，以下例子也是gltf格式</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 标准示例</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GLTFLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/GLTFLoader&quot;</span>
<span class="token keyword">const</span> fltfLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GLTFLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;/models/Duck/glTF/Duck.gltf&quot;</span><span class="token punctuation">,</span> gltf <span class="token operator">=&gt;</span> scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>THREE支持Draco方式加载，Draco文件体积会小很多</p> <p>但Draco本身体积不算小，模型不大的情况不要用</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">/**
* 先准备Draco wasm,位置在 node_modules/examples/js/libs/draco
* 将draco文件夹整个复制到静态资源目录，本例路径 /draco/
*/</span> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> GLTFLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/GLTFLoader&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DRACOLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/DRACOLoader&quot;</span>

<span class="token comment">/********DRACOLoader使用--start*********/</span>
<span class="token comment">// 模型不大不要用DRACOLoader,DRACOLoader本身体积不算小</span>
<span class="token keyword">const</span> dracoLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DRACOLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dracoLoader<span class="token punctuation">.</span><span class="token function">setDecoderPath</span><span class="token punctuation">(</span><span class="token string">&quot;/draco/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fltfLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GLTFLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">setDRACOLoader</span><span class="token punctuation">(</span>dracoLoader<span class="token punctuation">)</span>
<span class="token comment">/********DRACOLoader使用--end*********/</span>

fltfLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/models/Duck/glTF-Draco/Duck.gltf&quot;</span><span class="token punctuation">,</span> 
    gltf <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="模型动画"><a href="#模型动画" class="header-anchor">#</a> 模型动画</h3> <p>需要模型中有动画</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GLTFLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/GLTFLoader&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DRACOLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/loaders/DRACOLoader&quot;</span>

<span class="token keyword">const</span> clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 加载器设置</span>
<span class="token keyword">const</span> dracoLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DRACOLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 可以不用，模型没那么大</span>
dracoLoader<span class="token punctuation">.</span><span class="token function">setDecoderPath</span><span class="token punctuation">(</span><span class="token string">&quot;/draco/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fltfLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GLTFLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">setDRACOLoader</span><span class="token punctuation">(</span>dracoLoader<span class="token punctuation">)</span>

<span class="token keyword">let</span> mixer<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>AnimationMixer <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 动画混合器</span>
<span class="token keyword">let</span> oldTime <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 上一个时间</span>
<span class="token keyword">let</span> actions<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>AnimationAction<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 动画动作列表</span>
<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 播放第几个动画动作</span>

<span class="token comment">// 动画动作播放完了，播放下一个动画动作</span>
<span class="token keyword">const</span> <span class="token function-variable function">listenLoop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    actions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    index <span class="token operator">=</span> index <span class="token operator">&gt;=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token operator">++</span>index
    actions<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/models/Fox/glTF/Fox.gltf&quot;</span><span class="token punctuation">,</span> 
    gltf <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        gltf<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0.025</span><span class="token punctuation">,</span> <span class="token number">0.025</span><span class="token punctuation">,</span> <span class="token number">0.025</span><span class="token punctuation">)</span> <span class="token comment">// 模型空间有点大，缩小点</span>
        mixer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">AnimationMixer</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span>
        actions <span class="token operator">=</span> gltf<span class="token punctuation">.</span>animations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>animation <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>mixer <span class="token keyword">as</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>AnimationMixer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clipAction</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        mixer<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;loop&quot;</span><span class="token punctuation">,</span> listenLoop<span class="token punctuation">)</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nowTime <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    mixer<span class="token operator">?.</span><span class="token function">update</span><span class="token punctuation">(</span>nowTime<span class="token operator">-</span>oldTime<span class="token punctuation">)</span>
    oldTime <span class="token operator">=</span> nowTime
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
    <span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="blender"><a href="#blender" class="header-anchor">#</a> blender</h2> <p>编辑 -&gt; preferences -&gt;  输入 -&gt; 模拟3键鼠标  可以开启 alt + 鼠标左键旋转(绕场景中心)</p> <p>按鼠标滚轮再拖动也可以绕场景中心旋转</p> <p>shift + 按下标滚轮 再拖动 可以移动视图</p> <p>shift + c 视线平移至场景中心</p> <p>shift + a 创建物体菜单</p> <p>选中物体+x 删除物体</p> <p>选中物体+h 隐藏物体</p> <p>alt + h 恢复 隐藏物体</p> <p>t 呼出左侧边栏</p> <p>选中物体+g 移动物体</p> <p>选中物体+r 旋转物体</p> <p>选中物体+s 缩放物体</p> <p>ctrl + tab 模式选择</p> <p>选中物体+z 物体模式选择</p> <p>选中物体+f12 渲染物体</p> <h2 id="图像优化"><a href="#图像优化" class="header-anchor">#</a> 图像优化</h2> <h3 id="渲染器设置"><a href="#渲染器设置" class="header-anchor">#</a> 渲染器设置</h3> <p>初始化渲染器时(必须)，设置antialias(多重采样),像素比和光照模式,toneMapping,光线强度toneMappingExposure, 环境贴图光强envMapenvMapIntensity更具实际情况选择</p> <h3 id="阴影设置"><a href="#阴影设置" class="header-anchor">#</a> 阴影设置</h3> <p>对于阴影渲染，渲染器设置shadowMap.type</p> <p>光源需设置shadow.mapSize和shadow.camera.far</p> <p>并且shadow.normalBias应设置一个小的值，防止贴图产生波纹影响材质</p> <h3 id="贴图"><a href="#贴图" class="header-anchor">#</a> 贴图</h3> <p>贴图可以设置encoding为THREE.sRGBEncoding以更符合人眼习惯</p> <p>注意：法线图等不要使用 THREE.sRGBEncoding，THREE.sRGBEncoding会改变其数值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// antialias(多重采样)必须在初始化的时候设置</span>
<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>antialias<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">// 像素比</span>
renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span> 
<span class="token comment">// 使用物理上正确的光照模式,确保效果和3d建模软件一致</span>
renderer<span class="token punctuation">.</span>physicallyCorrectLights <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token comment">/**
 * THREE.sRGBEncoding会对颜色进行修正以符合人眼视觉效果(改变rgb数值)
 * 人眼在0.1亮度环境切换到0.2环境亮度，在视觉上会大于从0.8亮度环境切换到0.9环境亮度增量
 * THREE.sRGBEncoding修正过后更符合人眼直觉，但数值不是真正的原始数值
 * 所以法线图，凹凸图等等不表示颜色的贴图不要使用此编码
 * 总而言之：
 *     THREE.sRGBEncoding在亮度越高时，会减少更多亮度;越低越接近真实值
 */</span>
<span class="token comment">// 输出渲染编码,使用THREE.sRGBEncoding提升渲染效果</span>
renderer<span class="token punctuation">.</span>outputEncoding <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding
<span class="token comment">/**
*renderer.toneMapping可选项：
*THREE.NoToneMapping， THREE.LinearToneMapping， THREE.ReinhardToneMapping
*THREE.CineonToneMapping， THREE.ACESFilmicToneMapping
*/</span>
renderer<span class="token punctuation">.</span>toneMapping <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ReinhardToneMapping
<span class="token comment">// 贴出方便测试哪个更好代码</span>
<span class="token comment">// import * as dat from &quot;dat.gui&quot;</span>
<span class="token keyword">const</span> gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dat</span><span class="token punctuation">.</span><span class="token constant">GUI</span><span class="token punctuation">(</span><span class="token punctuation">{</span> closed<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> debugObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    envMapenvMapIntensity<span class="token operator">:</span> <span class="token number">5</span> <span class="token comment">// 环境贴图光强选取</span>
<span class="token punctuation">}</span>
<span class="token comment">// 更新子场景贴图（会递归子场景）</span>
<span class="token keyword">const</span> <span class="token function-variable function">updateAllMaterial</span> <span class="token operator">=</span> <span class="token punctuation">(</span>scene<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>Scene<span class="token punctuation">,</span> envMap<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>CubeTexture<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    scene<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span>child <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>child <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span>Mesh <span class="token operator">&amp;&amp;</span> child<span class="token punctuation">.</span>material <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span>MeshStandardMaterial<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            child<span class="token punctuation">.</span>material<span class="token punctuation">.</span>envMap <span class="token operator">=</span> envMap
            child<span class="token punctuation">.</span>material<span class="token punctuation">.</span>needsUpdate <span class="token operator">=</span> <span class="token boolean">true</span>
            child<span class="token punctuation">.</span>material<span class="token punctuation">.</span>envMapIntensity <span class="token operator">=</span> debugObj<span class="token punctuation">.</span>envMapenvMapIntensity
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>renderer<span class="token punctuation">,</span> <span class="token string">&quot;toneMapping&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token constant">NO</span><span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>NoToneMapping<span class="token punctuation">,</span>
    LinearToneMapping<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearToneMapping<span class="token punctuation">,</span>
    ReinhardToneMapping<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ReinhardToneMapping<span class="token punctuation">,</span>
    CineonToneMapping<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>CineonToneMapping<span class="token punctuation">,</span>
    ACESFilmicToneMapping<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>ACESFilmicToneMapping<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onFinishChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// gui bug</span>
    <span class="token comment">// number 会被转化成string</span>
    renderer<span class="token punctuation">.</span>toneMapping <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>toneMapping<span class="token punctuation">)</span> 
    <span class="token function">updateAllMaterial</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> envMap<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 环境贴图光强选取</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>debugObj<span class="token punctuation">,</span> <span class="token string">&quot;envMapenvMapIntensity&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;envMapenvMapIntensity&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">updateAllMaterial</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> envMap<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 场景光线强度</span>
renderer<span class="token punctuation">.</span>toneMappingExposure <span class="token operator">=</span> <span class="token number">3</span>
<span class="token comment">// 选个最合适的数值</span>
gui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>renderer<span class="token punctuation">,</span> <span class="token string">&quot;toneMappingExposure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token number">0.001</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;toneMappingExposure&quot;</span><span class="token punctuation">)</span>
<span class="token comment">/*******************对于阴影渲染优化处理*******************************/</span>
<span class="token comment">// 渲染器设置</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>PCFSoftShadowMap
<span class="token comment">// 光源设置(案例：平行光)</span>
<span class="token keyword">const</span> directionalLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
directionalLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">30</span>
<span class="token comment">// shadow.normalBias可设置一个较小的值，如果还存在波纹(贴图产生波纹影响材质)，再设置一个稍大的(不要设置太大)</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>normalBias <span class="token operator">=</span> <span class="token number">0.01</span>
<span class="token comment">// directionalLight.shadow.mapSize.set(1024, 1024) // 等价下面</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span>

<span class="token comment">/*******************环境贴图示例代码*******************************/</span>
<span class="token comment">// texture loader</span>
<span class="token keyword">const</span> cubeTextureLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">CubeTextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token comment">// 环境贴图</span>
<span class="token keyword">const</span> envMap <span class="token operator">=</span> cubeTextureLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/px.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// p表示正方向，n表示负方向，x轴正方向</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/nx.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// x轴负方向</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/py.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// y轴正方向</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/ny.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// y轴负方向</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/pz.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// z轴正方向</span>
    <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'@/assets/envmap/nz.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// z轴负方向</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 法线图等不要使用 THREE.sRGBEncoding，THREE.sRGBEncoding会改变其数值</span>
envMap<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding
scene<span class="token punctuation">.</span>background <span class="token operator">=</span> envMap <span class="token comment">// 3d vr看房效果居然一句话就解决了，啧啧</span>
<span class="token comment">// scene.environment = envMap</span>
</code></pre></div><h2 id="顶点着色器"><a href="#顶点着色器" class="header-anchor">#</a> 顶点着色器</h2> <h3 id="vue配置"><a href="#vue配置" class="header-anchor">#</a> vue配置</h3> <p>安装处理glsl格式文件的loader</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> raw-loader <span class="token parameter variable">-D</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
<span class="token comment">// 添加.glsl等后缀文件处理loader</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(glsl|vs|fs|vert|frag)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&quot;/node_modules/&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;raw-loader&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 新建一个.d.ts文件，或者直接在shims-vue.d.ts中加入</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;*.glsl&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue中使用"><a href="#vue中使用" class="header-anchor">#</a> vue中使用</h3> <p>新建fragment.glsl文件和vertex.glsl</p> <div class="language-glsl extra-class"><pre class="language-glsl"><code><span class="token comment">// vertex.glsl</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> projectionMatrix<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> viewMatrix<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> modelMatrix<span class="token punctuation">;</span>

<span class="token keyword">attribute</span> <span class="token keyword">vec3</span> position<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gl_Position <span class="token operator">=</span> projectionMatrix <span class="token operator">*</span> viewMatrix <span class="token operator">*</span> modelMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-glsl extra-class"><pre class="language-glsl"><code><span class="token comment">// fragment.glsl</span>
<span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// rgba</span>
    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>页面引用</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> vertex <span class="token keyword">from</span> <span class="token string">&quot;@/shaders/test/vertex.glsl&quot;</span> <span class="token comment">// 已经配置，当成普通文件引入</span>
<span class="token keyword">import</span> fragment <span class="token keyword">from</span> <span class="token string">&quot;@/shaders/test/fragment.glsl&quot;</span>
<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Mesh</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">PlaneBufferGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 着色器材质</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">RawShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        vertexShader<span class="token operator">:</span> vertex<span class="token punctuation">,</span> <span class="token comment">// 直接放进来，.glsl文件会被解析成字符串</span>
        fragmentShader<span class="token operator">:</span> fragment<span class="token punctuation">,</span>
        side<span class="token operator">:</span><span class="token constant">THREE</span><span class="token punctuation">.</span>DoubleSide<span class="token punctuation">,</span>
        <span class="token comment">// wireframe: true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token punctuation">)</span>
</code></pre></div><h3 id="前置知识-矩阵运算"><a href="#前置知识-矩阵运算" class="header-anchor">#</a> 前置知识-矩阵运算</h3> <h4 id="标量与矩阵运算"><a href="#标量与矩阵运算" class="header-anchor">#</a> 标量与矩阵运算</h4> <p>矩阵是一个线性变换，由一组向量构成。可以把它想象成一个中间件。比如一个向量经过一个矩阵变换就成了一个新的向量</p> <p>举例(乘法，其余加减除一样)</p> <div class="language- extra-class"><pre class="language-text"><code>矩阵上加、减、乘、除一个标量,直接对矩阵的每个元素进行这些数学运算
1 3 2                1*3 3*3 2*3        3  9 6
4 0 5    *3   =&gt;     4*3 0*3 5*3   =&gt;   12 0 15
2 1 7                2*3 1*3 7*3        6  3 21
</code></pre></div><h4 id="向量与矩阵运算"><a href="#向量与矩阵运算" class="header-anchor">#</a> 向量与矩阵运算</h4> <div class="language- extra-class"><pre class="language-text"><code>对一个矩阵乘以一个向量，可以理解为对矩阵的每一行乘以向量的每一列,运算结果会是一个向量，它的行数和矩阵的行数一样
公式:Ax=y   A:矩阵 x:输入向量 y:输出向量
1 3     1        1*1 + 3*5       16       a11  a12     c1          a11*c1 + a12*c2
4 0  *     =&gt;    4*1 + 0*5  =&gt;   4        a21  a22  *       =      a21*c1 + a22*c2
2 1     5        2*1 + 1*5       7        a31  a32     c2          a31*c1 + a32*c2
</code></pre></div><h4 id="矩阵间的加减法"><a href="#矩阵间的加减法" class="header-anchor">#</a> 矩阵间的加减法</h4> <div class="language- extra-class"><pre class="language-text"><code>矩阵间的加减法要求两个矩阵需要维度相同,运算结果也会是一个相同维度的矩阵
将第一个矩阵中的每一个元素和第二个矩阵中对应位置的元素相加或者相减就可以
1 3 1      5 4 7        1+5 3+4 1+7         6 7 8
4 0 7  +   3 1 2  =&gt;    4+3 0+1 7+2   =&gt;    7 1 9
6 3 3      1 0 7        6+1 3+0 3+7         7 3 10
</code></pre></div><h4 id="矩阵间的乘法"><a href="#矩阵间的乘法" class="header-anchor">#</a> 矩阵间的乘法</h4> <div class="language- extra-class"><pre class="language-text"><code>只有当第一个矩阵的列数和第二个矩阵的行数相等时，才能相乘.
运算结果会是一个矩阵，行数和第一个矩阵的行数相等，列数和第二个矩阵的列数相等
运算方法：将第二个矩阵的每一列分别与第二个矩阵的每行相乘，再相加
1 3 2         1 3        (1*1)+(2*0)+(2*5)  (1*3)+(3*1)+(2*2)         11 10
         *    0 1     =&gt;                                         =&gt; 
4 0 1         5 2        (4*1)+(0*0)+(1*5)  (4*3)+(0*1)+(1*2)         9  14
计算方式：
a1 a2 a3      c1 c2       c1*a1+d1*a2+e1*a3  c2*a1+d2*a2+e2*a3
              d1 d2   =&gt;  
b1 b2 b3      e1 e2       c1*b1+d1*b2+e1*b3  c2*b1+d2*b2+e2*b3

计算方式2：
a11 a12 a13     b11 b12 b13       a11*b11+a12*b21+a13*b31 a11*b12+a12+b22+a13+b32 a11*b13+a12*b23+a13*b33
a21 a22 a23  *  b21 b22 b23 =&gt;    a21*b11+a22*b21+a23*b21 a21*b12+a22*b22+a23*b32 a21*b13+a22*b23+a23*b33
a31 a32 a33     b31 b32 b33       a31*b11+a32*b21+a33*b31 a31*b12+a32*b22+a33*b32 a31*b12+a32*b23+a33*b33
总结:第一个矩阵的每行对应乘第二个矩阵每列(第一个矩阵每行第一个元素*第二个矩阵每列第二个元素，以此类推，即每行第n个乘以每列第n个)，然后相加得出一个值。
第一个矩阵的第n行*第二个矩阵第m列，得出的结果坐标为新矩阵的[n,m]。比如第一个矩阵第一行*第二个矩阵的第一列，得出结果为新矩阵的第一行第一列；比如第一个矩阵第二行*第二个矩阵的第一列，得出结果为新矩阵的第二行第一列；比如第一个矩阵第三行*第二个矩阵的第二列，得出结果为新矩阵的第三行第二列。

</code></pre></div><h3 id="目前理解"><a href="#目前理解" class="header-anchor">#</a> 目前理解</h3> <p>必需要使用着色器材质RawShaderMaterial或者ShaderMaterial</p> <p>THREEjs引用glsl文件(可以直接写js的字符串，因为解析过后也是字符串，但是没有代码提示)，并将参数传入，glsl解析过后直接调用gpu渲染</p> <p>着色器可以修改点的位置和颜色。传入模型坐标位置，首先进入vertexShader，对每个点(称为图元)进行(位置)处理；然后再由fragmentShader处理(颜色).</p> <p>注意：uniform 传入参数 vertexShader 和 fragmentShader都可以获取</p> <p>​			attribute 传入参数 只有 vertexShader可以获取</p> <p>​			vertexShader若想传递给fragmentShader，可以使用varying传递</p> <div class="language-glsl extra-class"><pre class="language-glsl"><code><span class="token comment">// 需要说明 uniform 声明的变量，vertex和fragment都可以使用</span>
<span class="token comment">// attribute声明的变量只有vertex可以使用</span>
<span class="token comment">// 若fragment也想使用attribute变量，可以在vertex用varying接收attribute变量，传导给fragment</span>

<span class="token comment">// 举例:将模型的uv坐标(uv坐标在geometry的attribute上)传给fragment.glsl</span>
<span class="token comment">/*********vertex.glsl*************/</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> projectionMatrix<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> viewMatrix<span class="token punctuation">;</span>
<span class="token keyword">uniform</span> <span class="token keyword">mat4</span> modelMatrix<span class="token punctuation">;</span>

<span class="token keyword">attribute</span> <span class="token keyword">vec3</span> position<span class="token punctuation">;</span> 

<span class="token keyword">attribute</span> <span class="token keyword">vec2</span> uv<span class="token punctuation">;</span> 
<span class="token keyword">varying</span> <span class="token keyword">vec2</span> vUv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// point x y z w (w分量表示视角，也就是该点距离相机的距离)</span>
    gl_Position <span class="token operator">=</span> projectionMatrix <span class="token operator">*</span> viewMatrix <span class="token operator">*</span> modelMatrix <span class="token operator">*</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vUv <span class="token operator">=</span> uv<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*********fragment.glsl*************/</span>
<span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span>
<span class="token keyword">varying</span> <span class="token keyword">vec2</span> vUv<span class="token punctuation">;</span> <span class="token comment">// 类型和名称必须和vertex.glsl相同</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// point rgba</span>
    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>vUv<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>总的来说:vertex设置空间点的坐标，fragment设置点的色彩颜色</p> <h2 id="three钩子"><a href="#three钩子" class="header-anchor">#</a> THREE钩子</h2> <p>若想只修改THREE提供材料的一部分特性，可以使用材质(material)的钩子onBeforeCompile替换着色器(shader)的部分代码，从而达到复用的效果，也不用全部重新编写</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 初始化代码省略</span>
<span class="token keyword">const</span> clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> mapTexture <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;/models/LeePerrySmith/Map-COL.jpg&quot;</span><span class="token punctuation">)</span>
mapTexture<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding
<span class="token keyword">const</span> normalTexture <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;/models/LeePerrySmith/Infinite-Level_02_Tangent_SmoothUV.jpg&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 定义自定义参数--时间，传递给glsl</span>
<span class="token comment">// 材质不是 RawShaderMaterial或者ShaderMaterial</span>
<span class="token comment">// 不能直接传递参数给glsl</span>
<span class="token comment">// 可以通过js传递</span>
<span class="token keyword">const</span> customUniform <span class="token operator">=</span> <span class="token punctuation">{</span>
    uTime<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这里的材质不再是 RawShaderMaterial或者ShaderMaterial</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    map<span class="token operator">:</span> mapTexture<span class="token punctuation">,</span>
    normalMap<span class="token operator">:</span> normalTexture<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 用这个材质处理阴影</span>
<span class="token keyword">const</span> depthMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshDepthMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    depthPacking<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RGBADepthPacking
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 材质渲染之前会调用onBeforeCompile钩子</span>
<span class="token comment">// 该钩子可以拿到 渲染器(shader) 并修改其值</span>
material<span class="token punctuation">.</span><span class="token function-variable function">onBeforeCompile</span> <span class="token operator">=</span> shader <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可以通过 渲染器(shader) 直接注入自定义参数传入</span>
    shader<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uTime <span class="token operator">=</span> customUniform<span class="token punctuation">.</span>uTime
    
    <span class="token comment">// 这里方便演示，就不把下面的glsl放在其他单独文件了</span>
    <span class="token comment">// 找个锚点，使用替换的方法就可以在渲染前插入自定义处理代码，比如这里的 #include &lt;common&gt;</span>
    shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#include &lt;common&gt;&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	#include &lt;common&gt;
        uniform float uTime;
        mat2 get2dRotateMatrix(float _angle) {
        	return mat2(cos(_angle), -sin(_angle), sin(_angle), cos(_angle));
        }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#include &lt;beginnormal_vertex&gt;&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	#include &lt;beginnormal_vertex&gt;
        float angle = (position.y + uTime) * 0.3;
        mat2 rotateMatrix = get2dRotateMatrix(angle);
        objectNormal.xz = rotateMatrix * objectNormal.xz;
	</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#include &lt;begin_vertex&gt;&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	#include &lt;begin_vertex&gt;
        // 注意：上边已经定义过angle和rotateMatrix，不要重复定义。可以理解成改的是同一个文件
        // float angle = (position.y + uTime) * 0.3;
        // mat2 rotateMatrix = get2dRotateMatrix(angle);
        transformed.xz = transformed.xz * rotateMatrix;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 阴影材质处理</span>
depthMaterial<span class="token punctuation">.</span><span class="token function-variable function">onBeforeCompile</span> <span class="token operator">=</span> shader <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    shader<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uTime <span class="token operator">=</span> customUniform<span class="token punctuation">.</span>uTime
    <span class="token comment">// 和上边修改的保持一致就可以使阴影一致</span>
    shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#include &lt;common&gt;&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	#include &lt;common&gt;
        uniform float uTime;
        mat2 get2dRotateMatrix(float _angle) {
        	return mat2(cos(_angle), -sin(_angle), sin(_angle), cos(_angle));
        }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    shader<span class="token punctuation">.</span>vertexShader <span class="token operator">=</span> shader<span class="token punctuation">.</span>vertexShader<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#include &lt;begin_vertex&gt;&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	#include &lt;begin_vertex&gt;
        float angle = (position.y + uTime) * 0.3;
        mat2 rotateMatrix = get2dRotateMatrix(angle);
        transformed.xz = transformed.xz * rotateMatrix;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 模型加载</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/models/LeePerrySmith/LeePerrySmith.glb&quot;</span><span class="token punctuation">,</span> 
    gltf <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> mesh <span class="token operator">=</span> gltf<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span>mesh <span class="token keyword">as</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>Mesh<span class="token punctuation">)</span><span class="token punctuation">.</span>material <span class="token operator">=</span> material <span class="token comment">// 替换成上边修改过的材料</span>
        mesh<span class="token punctuation">.</span>customDepthMaterial <span class="token operator">=</span> depthMaterial <span class="token comment">// 加上阴影材料(只改动本身材质阴影还会使原先的)</span>
        gltf<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>item <span class="token keyword">as</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>Mesh<span class="token punctuation">)</span><span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span>
        <span class="token comment">// updateAllMaterial(scene, envMap);</span>
        <span class="token comment">// gltf.scene.scale.set(10, 10, 10)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    customUniform<span class="token punctuation">.</span>uTime<span class="token punctuation">.</span>value <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
    <span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="后期处理"><a href="#后期处理" class="header-anchor">#</a> 后期处理</h2> <p>类似于“会声会影”的后期处理，在后期添加各种特效</p> <p>处理流程可以理解成流水线，或者express中的中间件，图像会先经过各种后期处理，然后再送到页面渲染</p> <p>代码流程：引入EffectComposer和RenderPass包</p> <p>​					实例化EffectComposer(effectComposer)和renderPass(renderPass)对象并设置参数</p> <p>​					将renderPass加入到effectComposer</p> <p>​					将后期处理(特效)包(例如:DotScreenPass、RGBShiftShader)导入，并实例化，然后加入effectComposer</p> <p>​					渲染时不再用renderer.render(scene, camera)，改为effectComposer.render()</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> EffectComposer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/EffectComposer&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RenderPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/RenderPass&quot;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> DotScreenPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/DotScreenPass&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GlitchPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/GlitchPass&quot;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ShaderPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/ShaderPass&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RGBShiftShader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/shaders/RGBShiftShader&quot;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> SMAAPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/SMAAPass&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> UnrealBloomPass <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/postprocessing/UnrealBloomPass&quot;</span>

<span class="token comment">// 初始化代码省略</span>

<span class="token comment">/**
*WebGLRenderTarget不支持抗锯齿。像素比大于1没有抗锯齿的问题,可直接用WebGLRenderTarget
*WebGLMultisampleRenderTarget支持抗锯齿,但某些旧版本浏览器可能不支持
*结论：像素比大于1，直接使用WebGLRenderTarget，此时不会有抗锯齿问题
*	  若像素比等于1，用WebGLMultisampleRenderTarget 
*	  		若浏览器不支持支持膨胀到2，添加SMAAPass
*备注：renderer.getPixelRatio()获取像素比;renderer.capabilities.isWebGL2为true表示浏览器支持像素比膨胀到2
*/</span>
<span class="token keyword">let</span> renderTarget<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>WebGLRenderTarget <span class="token operator">|</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>WebGLMultisampleRenderTarget

<span class="token keyword">if</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span><span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    renderTarget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">WebGLMultisampleRenderTarget</span><span class="token punctuation">(</span>
        <span class="token comment">// 宽高不用在意，只要不是太大或者0就行</span>
        windowWidth<span class="token punctuation">,</span> 
        windowHeight<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            minFilter<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearFilter<span class="token punctuation">,</span>
            magFilter<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearFilter<span class="token punctuation">,</span>
            format<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RGBAFormat<span class="token punctuation">,</span>
            encoding<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding <span class="token comment">// 不设置encoding会导致最终图像变暗</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// WebGLRenderTarget不支持抗锯齿</span>
    renderTarget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">WebGLRenderTarget</span><span class="token punctuation">(</span>
        <span class="token comment">// 宽高不用在意，只要不是太大或者0就行</span>
        windowWidth<span class="token punctuation">,</span> 
        windowHeight<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            minFilter<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearFilter<span class="token punctuation">,</span>
            magFilter<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>LinearFilter<span class="token punctuation">,</span>
            format<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RGBAFormat<span class="token punctuation">,</span>
            encoding<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>sRGBEncoding <span class="token comment">// 不设置encoding会导致最终图像变暗</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Composer</span>
<span class="token comment">// 不设置renderTarget(encoding)会导致最终图像变暗</span>
<span class="token keyword">const</span> effectComposer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EffectComposer</span><span class="token punctuation">(</span>renderer<span class="token punctuation">,</span> renderTarget<span class="token punctuation">)</span>
effectComposer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span><span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
effectComposer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span>

<span class="token comment">// scene:相机, camera:相机 参照初始化设置</span>
<span class="token keyword">const</span> renderPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RenderPass</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>renderPass<span class="token punctuation">)</span>

<span class="token comment">// 点像素效果,类似以前的黑白电视机，黑白两色，像素点很大</span>
<span class="token keyword">const</span> dotScreenPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DotScreenPass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dotScreenPass<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// true启用 false禁用</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>dotScreenPass<span class="token punctuation">)</span>

<span class="token comment">// 故障效果(屏幕闪动)</span>
<span class="token keyword">const</span> glitchPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlitchPass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
glitchPass<span class="token punctuation">.</span>goWild <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 一直闪动</span>
glitchPass<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>glitchPass<span class="token punctuation">)</span>

<span class="token comment">// 颜色位移，显示效果是添加模糊效果</span>
<span class="token comment">// 这个比较前边的要麻烦些，需要引入两个模块 ShaderPass 和 RGBShiftShader</span>
<span class="token keyword">const</span> rgbShiftPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShaderPass</span><span class="token punctuation">(</span>RGBShiftShader<span class="token punctuation">)</span>
rgbShiftPass<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>rgbShiftPass<span class="token punctuation">)</span>

<span class="token comment">// 炫光效果， 参数自己调整</span>
<span class="token keyword">const</span> unrealBloomPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnrealBloomPass</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector2</span><span class="token punctuation">(</span> windowWidth<span class="token punctuation">,</span> windowHeight <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">0.3</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">0.6</span>
<span class="token punctuation">)</span>   
unrealBloomPass<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>unrealBloomPass<span class="token punctuation">)</span>

<span class="token comment">// 自定义pass，为了方便vertexShader和fragmentShader直接写了</span>
<span class="token comment">// 流程类似于顶点着色器，通过vertexShader和fragmentShader修改坐标和色彩</span>
<span class="token keyword">const</span> TintSharder <span class="token operator">=</span> <span class="token punctuation">{</span>
    uniforms<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 和以前一样，传递参数</span>
        tDiffuse<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        uTint<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector3</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        uTime<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        uNormalMap<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    vertexShader<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	varying vec2 vUv;
        void main() {
        	gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
        	vUv = uv;
        }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    fragmentShader<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    	uniform sampler2D tDiffuse; // 原始贴图
        uniform sampler2D uNormalMap; // 传入的法线贴图
        uniform vec3 uTint;
        uniform float uTime;
        varying vec2 vUv;
        	void main(){
        		// 通过法线贴图添加特效
            	vec3 normalColor = texture2D(uNormalMap, vUv).xyz * 2.0 - 1.0;
                vec2 nUv = vUv + normalColor.xy * 0.1;
                // vec2 nUv = vec2( // 弄个正弦波试试
                //     vUv.x,
                //     vUv.y + sin(vUv.x * 10.0 + uTime) * 0.1
                // );
                vec4 color = texture2D(tDiffuse, nUv);
                // color.r += 0.1; // 可修改颜色
                // color.rgb += uTint; // 通过传入的颜色进行修改
                gl_FragColor =  color;
                // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
            }
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> tintPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShaderPass</span><span class="token punctuation">(</span>TintSharder<span class="token punctuation">)</span>
tintPass<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uTime<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span>
tintPass<span class="token punctuation">.</span>material<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uNormalMap<span class="token punctuation">.</span>value <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@/assets/earthNormal.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>tintPass<span class="token punctuation">)</span>

<span class="token comment">// renderer.capabilities.isWebGL2为true表示浏览器支持像素比膨胀到2</span>
<span class="token comment">// 注意：这个处理需要放到所有pass后面，是最后一个pass</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span><span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>renderer<span class="token punctuation">.</span>capabilities<span class="token punctuation">.</span>isWebGL2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在不支持WebGLMultisampleRenderTarget的浏览器上，使用SMAAPass(还有其他方式)处理抗锯齿</span>
    <span class="token keyword">const</span> sMAAPass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SMAAPass</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span>
    effectComposer<span class="token punctuation">.</span><span class="token function">addPass</span><span class="token punctuation">(</span>sMAAPass<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    windowWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth
    windowHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight

    <span class="token comment">// 更新相机</span>
    camera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> windowWidth<span class="token operator">/</span>windowHeight
    camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 更新渲染器</span>
    renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span>
    renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 后期处理 效果器更新</span>
    effectComposer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>windowWidth<span class="token punctuation">,</span> windowHeight<span class="token punctuation">)</span>
    effectComposer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span><span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 模型</span>
<span class="token comment">// fltfLoader设置参照 模型加载</span>
fltfLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/models/DamagedHelmet/glTF/DamagedHelmet.gltf&quot;</span><span class="token punctuation">,</span> 
    gltf <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        gltf<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>item <span class="token keyword">as</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>Mesh<span class="token punctuation">)</span><span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gltf<span class="token punctuation">.</span>scene<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> elapsedTime <span class="token operator">=</span> clock<span class="token punctuation">.</span><span class="token function">getElapsedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 错误写法,这种写法不能更新</span>
    <span class="token comment">// TintSharder.uniforms.uTime.value = elapsedTime</span>
    <span class="token comment">// 正确写法</span>
    tintPass<span class="token punctuation">.</span>uniforms<span class="token punctuation">.</span>uTime<span class="token punctuation">.</span>value <span class="token operator">=</span> elapsedTime
    
    <span class="token comment">// 添加后期渲染就不要直接用渲染器(renderer)渲染</span>
    <span class="token comment">// renderer.render(scene, camera)</span>
    effectComposer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// THREE提供了很多后期处理器，有空可以去了解一下</span>
</code></pre></div><h2 id="性能调优"><a href="#性能调优" class="header-anchor">#</a> 性能调优</h2> <h3 id="性能监控"><a href="#性能监控" class="header-anchor">#</a> 性能监控</h3> <p>使用 stats.js 查看页面性能</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// npm install stats.js</span>
<span class="token keyword">import</span> Stats <span class="token keyword">from</span> <span class="token string">&quot;stats.js&quot;</span>

<span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
stats<span class="token punctuation">.</span><span class="token function">showPanel</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 0: fps 1:ms 2:mb 3+:custom</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>dom<span class="token punctuation">)</span> <span class="token comment">// 需要添加到html</span>
<span class="token comment">// 在每帧动画开头使用begin，结尾使用end</span>
<span class="token keyword">const</span> <span class="token function-variable function">animation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    stats<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    stats<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="优化技巧"><a href="#优化技巧" class="header-anchor">#</a> 优化技巧</h3> <ul><li>保持animation函数高效，不要在该函数做过多运算</li> <li>不需要的Geometry和Material等，尽早地dispose掉，节约(gpu)内存(Geometry和Material使用dispose,Mesh使用remove)</li> <li>尽量少的使用光源，优先使用资源消耗少的光源。例如环境光，平行光等等</li> <li>尽量少的切换(移动)光源，添加或移除光源时，所有支持光源的材质会重新编译</li> <li>经量少的使用阴影，可以考虑阴影贴图代替(如果物体阴影不变化)</li> <li>使用相机辅助调整光源阴影相机覆盖范围，够用就行，不要弄太大</li> <li>尝试使用最小可能的光源阴影相机分辨率(mapSize)</li> <li>物体投掷和接收阴影在需要的时候才打开。比如对于地面来说已经没有物体接收他的阴影了，地面就不必要投掷阴影；再比如一个物体不可能接收到阴影，就不必要打开接收阴影</li> <li>若没有阴影变化(比如物体、光源移动),可以关闭渲染器的自动更新阴影</li> <li>在不影响观感的情况下，使用小的贴图(纹理数据会加载到gpu内存)</li> <li>纹理贴图最好是2的幂，否则THREE会自动调整为最接近的2的幂</li> <li>贴图压缩</li> <li>尽可能使用BufferGeometry，BufferGeometry性能更高</li> <li>动画设置尽可能避免在animation的设置；在着色器中做动画性能更高(难度也更高。。。)</li> <li>将一组Geometry聚合成一个(注意：这一组Geometry材质必须相同,Geometry可以不同),则一次就可渲染多个物体，否则有几个物体就要渲染几次。</li> <li>尽量使用更轻量的材料(例如MeshStandardMaterial，MeshPhysicalMaterial会比MeshBasicMaterial, MeshLambertMaterial消耗更多资源)</li> <li>后期处理特效应考虑性能，权衡是否使用后期处理，需要几个后期处理。尽量减少后期处理个数</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 平行光 辅助相机示例</span>
<span class="token keyword">const</span> directionalLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
directionalLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span>
directionalLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">5</span>
directionalLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment">// 光照最远距离</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">10</span>
<span class="token comment">// 光照距离顶部距离(辅助相机箭头指向)</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">8</span>
<span class="token comment">// 光照距离底部距离(注意:方向和顶部相反,参数是负数)</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">8</span>
<span class="token comment">// 光照距离右部距离(注意:方向根据顶部判断)</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token number">3</span>
<span class="token comment">// 光照距离左部距离(注意:方向根据顶部判断,参数是负数)</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span>

<span class="token comment">// 在不影响观感的情况下，选择小的mapSize</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span>
<span class="token comment">// shadow.normalBias可设置一个较小的值，如果还存在波纹(贴图产生波纹影响材质)，再设置一个稍大的</span>
directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>normalBias <span class="token operator">=</span> <span class="token number">0.01</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">)</span>

<span class="token comment">// 平行光源辅助</span>
<span class="token keyword">const</span> directionalLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">DirectionalLightHelper</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLightHelper<span class="token punctuation">)</span>
<span class="token comment">// 平行光源阴影相机辅助</span>
<span class="token keyword">const</span> directionalLightCameraHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">CameraHelper</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLightCameraHelper<span class="token punctuation">)</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 渲染器关闭自动更新阴影示例</span>
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>autoUpdate <span class="token operator">=</span> <span class="token boolean">false</span> 
renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>needsUpdate <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 至少要更新一次,否则没有阴影(第一次)</span>
</code></pre></div><div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 聚合Geometry示例1</span>
<span class="token comment">// 注意:此种聚合之后不能再更新单独一个物体</span>
<span class="token comment">// 引入聚合工具</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mergeBufferGeometries <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;three/examples/jsm/utils/BufferGeometryUtils&quot;</span>
<span class="token comment">// 存放需要聚合的geometry</span>
<span class="token keyword">const</span> geometrys<span class="token operator">:</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>BufferGeometry<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> patchGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">BoxBufferGeometry</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>
    patchGeometry<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span> <span class="token comment">// 平移 否则全堆在一起</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>
    <span class="token punctuation">)</span>
    geometrys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>patchGeometry<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Mesh</span><span class="token punctuation">(</span>mergedGeometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
<span class="token comment">/*******************************************************************************************/</span>

<span class="token comment">// 聚合Geometry示例2</span>
<span class="token comment">// 此种方式聚合之后可以操作单个物体</span>
<span class="token comment">// 但是操作也更能难，需要操作矩阵</span>
<span class="token comment">// 注意:此种方式需要Geometry和Material都相同才行</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">50</span> <span class="token comment">// 物体个数</span>
<span class="token keyword">const</span> patchGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">BoxBufferGeometry</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> patchMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">InstancedMesh</span><span class="token punctuation">(</span>patchGeometry<span class="token punctuation">,</span> patchMaterial<span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token comment">// 使用InstancedMesh生成一组mesh</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置位置</span>
    <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Vector3</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 设置旋转角度</span>
    <span class="token keyword">const</span> quaternion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Quaternion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    quaternion<span class="token punctuation">.</span><span class="token function">setFromEuler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token number">0</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">THREE</span></span><span class="token punctuation">.</span><span class="token function">Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    matrix<span class="token punctuation">.</span><span class="token function">makeRotationFromQuaternion</span><span class="token punctuation">(</span>quaternion<span class="token punctuation">)</span>
    matrix<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span><span class="token function">setMatrixAt</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span>          
<span class="token punctuation">}</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>

</code></pre></div><h2 id="向量"><a href="#向量" class="header-anchor">#</a> 向量</h2> <p>点乘 ：a•b=︱a︱︱b︱cosθ，意义：做功，例如 当力F与质点的位移S有夹角θ时，力F所作的功W=︱F︱︱S︱cosθ =F•S</p> <p>叉乘： a•b=︱a︱︱b︱sinθ，意义：a b向量相连围成的平行四边形面积</p> <p>向量加法：首尾相连，平行四边形法则可得</p> <p>向量减法：首首相连，平行四边形法则可得</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">4/17/2024, 7:38:54 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/使用indexDB缓存THREE.js模型.html" class="prev">
        使用indexDB缓存THREE.js模型
      </a></span> <span class="next"><a href="/docs/vue3响应式与组件渲染.html">
        vue3响应式与组件渲染
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.e9bf7062.js" defer></script><script src="/docs/assets/js/2.21081ec6.js" defer></script><script src="/docs/assets/js/1.d6a5e65b.js" defer></script><script src="/docs/assets/js/30.6aaabbcf.js" defer></script>
  </body>
</html>
